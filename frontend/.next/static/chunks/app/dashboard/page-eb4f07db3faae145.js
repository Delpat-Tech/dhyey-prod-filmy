(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7702],{90027:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(57068);let r=(0,a.Z)("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]])},70423:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(57068);let r=(0,a.Z)("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]])},57842:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(57068);let r=(0,a.Z)("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]])},49616:function(e,t,s){Promise.resolve().then(s.bind(s,80865))},80865:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return DashboardPage}});var a=s(37821),r=s(58078),o=s(45039),i=s.n(o),n=s(96871),l=s.n(n),c=s(70423),d=s(57842),u=s(90027),h=s(57068);let m=(0,h.Z)("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);var p=s(8494),g=s(86981),y=s(86965);let f=[{id:1,title:"The Midnight Train",author:{name:"Emma Wilson",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face",username:"emmawrites"},content:"The old train station stood empty, its platforms echoing with memories of countless journeys. Sarah clutched her suitcase tighter as the midnight train approached, its headlight cutting through the darkness like a beacon of hope...",image:"https://images.unsplash.com/photo-1544620347-c4fd4a3d5957?w=500&h=300&fit=crop",genre:"Fiction",likes:234,saves:45,comments:12,timeAgo:"2h",hashtags:["#fiction","#mystery","#train"]},{id:2,title:"Code of the Heart",author:{name:"David Kim",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=40&h=40&fit=crop&crop=face",username:"davidcodes"},content:"In the world of algorithms and data structures, love was the one equation I couldn't solve. Every line of code I wrote seemed to spell out her name, every function returned memories of us...",image:"https://images.unsplash.com/photo-1555066931-4365d14bab8c?w=500&h=300&fit=crop",genre:"Romance",likes:189,saves:67,comments:23,timeAgo:"4h",hashtags:["#romance","#tech","#love"]},{id:3,title:"Whispers of the Forest",author:{name:"Luna Martinez",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=40&h=40&fit=crop&crop=face",username:"lunapoetry"},content:"Beneath the canopy of ancient oaks,\nWhere sunlight dances and shadow cloaks,\nThe forest speaks in whispered tones,\nOf secrets kept in earth and stones...",image:"https://images.unsplash.com/photo-1441974231531-c6227db76b6e?w=500&h=300&fit=crop",genre:"Poetry",likes:156,saves:89,comments:8,timeAgo:"6h",hashtags:["#poetry","#nature","#forest"]}];function StoryFeed(e){let{genreFilter:t}=e,[s,o]=(0,r.useState)(new Set),[n,h]=(0,r.useState)(new Set),[x,v]=(0,r.useState)(new Set),[b,w]=(0,r.useState)(new Set),[S,k]=(0,r.useState)(new Set),[j,N]=(0,r.useState)(null),[R,q]=(0,r.useState)(null),[P,C]=(0,r.useState)([]),[T,A]=(0,r.useState)(!1),[O,_]=(0,r.useState)(new Set),[U,D]=(0,r.useState)(!0),I=(0,r.useRef)({}),F=(0,r.useRef)({});(0,r.useEffect)(()=>{let loadStories=async()=>{try{var e,s;D(!0);let a=new URLSearchParams;a.append("status","approved"),t&&a.append("genre",t);let r=await p.fh.getPublicStories(a),i=r.data.stories||f;console.log("First story isLiked:",null===(e=i[0])||void 0===e?void 0:e.isLiked,"isSaved:",null===(s=i[0])||void 0===s?void 0:s.isSaved),console.log("First story full data:",i[0]);let n=new Set,l=new Set;i.forEach(e=>{let t=e._id||e.id;e.isLiked&&n.add(t),e.isSaved&&l.add(t)}),o(n),h(l),console.log("Initialized liked stories:",Array.from(n)),console.log("Initialized saved stories:",Array.from(l)),C(i)}catch(s){console.error("Failed to load stories:",s);let e=t?f.filter(e=>e.genre===t):f;C(e)}finally{D(!1)}};loadStories()},[t]),(0,r.useEffect)(()=>{let handleClickOutside=e=>{if(null!==j){let t=I.current[j];t&&!t.contains(e.target)&&N(null)}if(null!==R){let t=F.current[R];t&&!t.contains(e.target)&&q(null)}};return document.addEventListener("mousedown",handleClickOutside),()=>{document.removeEventListener("mousedown",handleClickOutside)}},[j,R]);let E=(0,r.useCallback)(async e=>{let t=(e.startsWith("story-"),e);if(!O.has(t))try{_(e=>new Set(e).add(t));let e=await p.fh.likeStory(t),s=e.data.isLiked,a=e.data.likesCount;o(e=>{let a=new Set(e);return s?a.add(t):a.delete(t),a}),C(e=>e.map(e=>{let r=e._id||e.id;return r===t?{...e,likes:a,isLiked:s,stats:{...e.stats,likes:a}}:e}))}catch(e){console.error("Failed to like story:",e),y.Am.error("Failed to like story. Please try again.")}finally{_(e=>{let s=new Set(e);return s.delete(t),s})}},[O]),toggleSave=async e=>{if(!T)try{A(!0);let t=(e.startsWith("story-"),e);console.log("Toggling save for story:",t);let s=await p.fh.saveStory(t),a=s.data.isSaved,r=s.data.savesCount;console.log("Save response:",{isSaved:a,savesCount:r}),console.log("Story ID being processed:",t),h(e=>{let s=new Set(e);return a?s.add(t):s.delete(t),console.log("Updated saved stories set:",Array.from(s)),s}),a?y.Am.success("Story saved successfully!"):y.Am.success("Story removed from saved!"),C(e=>e.map(e=>{let s=e._id||e.id;return s===t?{...e,saves:r,isSaved:a,stats:{...e.stats,saves:r}}:e}))}catch(e){console.error("Failed to save story:",e),y.Am.error("Failed to save story. Please try again.")}finally{A(!1)}},handleShare=e=>{console.log("Share button clicked for story:",e),N(j===e?null:e),q(null)},shareStory=async(e,t)=>{let s="".concat(window.location.origin,"/story/").concat(t.id),a='Check out "'.concat(t.title,'" by ').concat(t.author.name);try{switch(await p.fh.shareStory(t.id,{platform:e}),e){case"copy":await navigator.clipboard.writeText(s),y.Am.success("Link copied to clipboard!");break;case"twitter":window.open("https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(a),"&url=").concat(encodeURIComponent(s)),"_blank");break;case"facebook":window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(s)),"_blank");break;case"linkedin":window.open("https://www.linkedin.com/sharing/share-offsite/?url=".concat(encodeURIComponent(s)),"_blank")}}catch(e){console.error("Share failed:",e),y.Am.error("Failed to share story. Please try again.")}N(null)},loadMoreStories=async()=>{A(!0);try{let e=new URLSearchParams;e.append("status","approved");let t=await p.fh.getPublicStories(e),s=t.data.stories||f.map((e,t)=>({...e,id:e.id+P.length+t,timeAgo:Math.floor(12*Math.random())+1+"h"}));C(e=>[...e,...s])}catch(e){console.error("Failed to load more stories:",e)}finally{A(!1)}};return U?(0,a.jsx)("div",{className:"space-y-6",children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 animate-pulse",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3 mb-4",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded-full"}),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-24"}),(0,a.jsx)("div",{className:"h-3 bg-gray-200 rounded w-16"})]})]}),(0,a.jsxs)("div",{className:"space-y-2 mb-4",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),(0,a.jsx)("div",{className:"h-48 bg-gray-200 rounded"})]},e))}):(0,a.jsxs)("div",{className:"space-y-6",children:[P.map((e,t)=>{var r,o,h;return(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden story-card transform transition-all duration-500 hover:shadow-lg hover:-translate-y-1",style:{animationDelay:"".concat(100*t,"ms"),animation:"fadeInUp 0.6s ease-out forwards"},children:[(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(l(),{href:"/story/".concat(e.id),children:(0,a.jsx)("h3",{className:"font-bold text-lg text-gray-900 hover:text-purple-600 transition-colors duration-300 font-display",children:e.title})})}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 ml-4",children:[(0,a.jsx)("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-md text-xs font-medium",children:e.genre}),(0,a.jsx)("div",{className:"flex space-x-1",children:null===(r=e.hashtags)||void 0===r?void 0:r.map((e,t)=>(0,a.jsx)("span",{className:"text-purple-600 text-sm hover:underline cursor-pointer transition-all duration-200 hover:text-purple-800 hover:scale-105",children:e},t))})]})]})}),(0,a.jsx)("div",{className:"px-4 pb-3",children:(0,a.jsx)(l(),{href:"/story/".concat(e.id),children:(0,a.jsx)("p",{className:"text-gray-700 leading-relaxed mb-4 line-clamp-3 font-body",children:e.content})})}),e.image&&(0,a.jsx)(l(),{href:"/story/".concat(e.id),className:"block overflow-hidden",children:(0,a.jsxs)("div",{className:"relative h-64 md:h-80 group",children:[(0,a.jsx)(i(),{src:(0,g.Jn)(e.image),alt:e.title,fill:!0,className:"object-cover group-hover:scale-110 transition-transform duration-700 ease-out"}),(0,a.jsx)("div",{className:"absolute inset-0 bg-black opacity-0 group-hover:opacity-10 transition-opacity duration-300"})]})}),(0,a.jsx)("div",{className:"p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)(l(),{href:"/profile/".concat(e.author.username),className:"flex items-center space-x-3 group",children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(i(),{src:(0,g.E$)(e.author.avatar),alt:e.author.name,width:40,height:40,className:"rounded-full transition-transform duration-300 group-hover:scale-110"}),(0,a.jsx)("div",{className:"absolute inset-0 rounded-full bg-gradient-to-r from-purple-500 to-pink-500 opacity-0 group-hover:opacity-20 transition-opacity duration-300"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h4",{className:"font-semibold text-gray-900",children:e.author.name}),(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:["@",e.author.username," • ",e.timeAgo]})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-6",children:[(0,a.jsxs)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),E(e._id||e.id)},disabled:O.has(e._id||e.id),className:"flex items-center space-x-2 text-gray-600 hover:text-red-500 transition-all duration-300 hover:scale-110 active:scale-95 disabled:opacity-50",children:[(0,a.jsx)(c.Z,{size:18,className:"transition-all duration-300 ".concat(s.has(e._id||e.id)?"fill-red-500 text-red-500 animate-pulse":"hover:scale-110")}),(0,a.jsx)("span",{className:"text-sm font-medium",children:(null===(o=e.stats)||void 0===o?void 0:o.likes)||e.likes||0})]}),(0,a.jsxs)(l(),{href:"/story/".concat(e._id||e.id,"#comments"),className:"flex items-center space-x-2 text-gray-600 hover:text-blue-500 transition-all duration-300 hover:scale-110 active:scale-95",children:[(0,a.jsx)(d.Z,{size:18,className:"transition-transform duration-300 hover:scale-110"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:(null===(h=e.stats)||void 0===h?void 0:h.comments)||e.comments||0})]}),(0,a.jsx)("button",{onClick:()=>toggleSave(e._id||e.id),className:"flex items-center space-x-2 text-gray-600 hover:text-purple-500 transition-all duration-300 hover:scale-110 active:scale-95",children:(0,a.jsx)(u.Z,{size:18,className:"transition-all duration-300 ".concat(n.has(e._id||e.id)?"fill-purple-500 text-purple-500 animate-bounce":"hover:scale-110")})}),(0,a.jsxs)("div",{className:"relative",ref:t=>{I.current[e.id]=t},children:[(0,a.jsxs)("button",{onClick:t=>{t.preventDefault(),t.stopPropagation(),console.log("Share button clicked - event triggered"),handleShare(e._id||e.id)},className:"flex items-center space-x-2 text-gray-600 hover:text-green-500 transition-all duration-300 hover:scale-110 active:scale-95 cursor-pointer",children:[(0,a.jsx)(m,{size:18,className:"transition-transform duration-300 hover:scale-110"}),(0,a.jsx)("span",{className:"text-sm font-medium",children:"Share"})]}),j===(e._id||e.id)&&(0,a.jsxs)("div",{className:"fixed bg-white border border-gray-200 rounded-lg shadow-2xl py-1 min-w-[180px]",style:{zIndex:9999,left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:[(0,a.jsxs)("div",{className:"text-xs text-gray-500 px-4 py-2 border-b border-gray-100",children:['Share "',e.title,'"']}),(0,a.jsx)("button",{onClick:()=>{console.log("Copy link clicked"),shareStory("copy",e)},className:"w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"\uD83D\uDCCB Copy Link"}),(0,a.jsx)("button",{onClick:()=>{console.log("Twitter share clicked"),shareStory("twitter",e)},className:"w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"\uD83D\uDC26 Share on Twitter"}),(0,a.jsx)("button",{onClick:()=>{console.log("Facebook share clicked"),shareStory("facebook",e)},className:"w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"\uD83D\uDCD8 Share on Facebook"}),(0,a.jsx)("button",{onClick:()=>{console.log("LinkedIn share clicked"),shareStory("linkedin",e)},className:"w-full text-left px-4 py-3 text-sm text-gray-700 hover:bg-gray-50 transition-colors",children:"\uD83D\uDCBC Share on LinkedIn"}),(0,a.jsx)("button",{onClick:()=>N(null),className:"w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-colors border-t border-gray-100",children:"❌ Cancel"})]}),j===(e._id||e.id)&&(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50",style:{zIndex:9998},onClick:()=>N(null)})]})]})]})})]},e.id)}),(0,a.jsx)("div",{className:"text-center py-8",children:(0,a.jsx)("button",{onClick:loadMoreStories,disabled:T,className:"bg-gradient-to-r from-purple-600 to-indigo-600 text-white px-10 py-3 rounded-xl font-medium hover:from-purple-700 hover:to-indigo-700 transition-all duration-300 hover:scale-105 hover:shadow-lg active:scale-95 transform disabled:opacity-50 disabled:cursor-not-allowed",children:T?"Loading...":"Load More Stories"})})]})}function DashboardPage(){let[e,t]=(0,r.useState)(null),handleGenreFilter=e=>{t(e)};return(0,a.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,a.jsxs)("div",{className:"bg-gradient-to-r from-purple-700 via-indigo-700 to-purple-900 text-white py-8 md:py-12 relative overflow-hidden",children:[(0,a.jsx)("div",{className:"absolute inset-0 bg-black/20 mix-blend-multiply"}),(0,a.jsxs)("div",{className:"relative max-w-6xl mx-auto px-4 text-center",children:[(0,a.jsx)("h1",{className:"text-2xl md:text-4xl font-bold mb-3 fade-in-up text-white",children:"Share Your Stories"}),(0,a.jsx)("p",{className:"text-white text-sm md:text-lg fade-in-up tracking-wide",style:{animationDelay:"0.2s"},children:"Discover amazing stories from creative writers around the world"})]}),(0,a.jsx)("div",{className:"absolute top-10 left-10 w-20 h-20 bg-white opacity-10 rounded-full animate-pulse"}),(0,a.jsx)("div",{className:"absolute bottom-10 right-10 w-16 h-16 bg-white opacity-10 rounded-full animate-pulse",style:{animationDelay:"1s"}})]}),(0,a.jsxs)("div",{className:"max-w-6xl mx-auto px-4 sm:px-6 py-6",children:[(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 sm:p-8 text-center mb-8",children:(0,a.jsxs)("div",{className:"max-w-md mx-auto",children:[(0,a.jsx)("div",{className:"w-16 h-16 bg-gradient-to-r from-purple-500 to-indigo-500 rounded-full flex items-center justify-center mx-auto mb-4",children:(0,a.jsx)("span",{className:"text-white font-bold text-xl",children:"\uD83D\uDE80"})}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Featured Stories"}),(0,a.jsx)("p",{className:"text-gray-600 mb-4",children:"Coming Soon"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"We're working on bringing you curated featured stories from our top authors. Stay tuned!"})]})}),(0,a.jsxs)("div",{className:"mt-8",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)("h2",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-4",children:"Latest Stories"}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsx)("button",{onClick:()=>handleGenreFilter(null),className:"px-4 py-2 text-sm rounded-full font-medium transition-all duration-300 ".concat(null===e?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100 hover:text-purple-600"),children:"All"}),(0,a.jsx)("button",{onClick:()=>handleGenreFilter("Fiction"),className:"px-4 py-2 text-sm rounded-full font-medium transition-all duration-300 ".concat("Fiction"===e?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100 hover:text-purple-600"),children:"Fiction"}),(0,a.jsx)("button",{onClick:()=>handleGenreFilter("Poetry"),className:"px-4 py-2 text-sm rounded-full font-medium transition-all duration-300 ".concat("Poetry"===e?"bg-purple-100 text-purple-700":"text-gray-600 hover:bg-gray-100 hover:text-purple-600"),children:"Poetry"})]})]}),(0,a.jsx)(StoryFeed,{genreFilter:e})]})]})]})}},8494:function(e,t,s){"use strict";s.d(t,{OF:function(){return n},Sb:function(){return l},TV:function(){return o},fh:function(){return i},kv:function(){return r}});let a="https://api.dhyey.delpat.in/api/v1",apiRequest=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=localStorage.getItem("dhyey_token"),r=localStorage.getItem("dhyey_token_expiry");if(s&&r&&new Date().getTime()>parseInt(r))throw console.log("Token expired, clearing session"),localStorage.removeItem("dhyey_user"),localStorage.removeItem("dhyey_token"),localStorage.removeItem("dhyey_token_expiry"),localStorage.removeItem("dhyey_remember_me"),window.location.pathname.includes("/auth/")||(window.location.href="/auth/login"),Error("Session expired. Please log in again.");let o={...t,headers:{"Content-Type":"application/json",...s&&{Authorization:"Bearer ".concat(s)},...t.headers},...s&&{credentials:"include"}},i=await fetch("".concat(a).concat(e),o);if(401===i.status){if(e.includes("/auth/update-password")||e.includes("/auth/change-password")){let e=await i.json().catch(()=>({}));throw Error(e.message||"Current password is incorrect")}throw console.log("Unauthorized request, clearing session"),localStorage.removeItem("dhyey_user"),localStorage.removeItem("dhyey_token"),localStorage.removeItem("dhyey_token_expiry"),localStorage.removeItem("dhyey_remember_me"),window.location.pathname.includes("/auth/")||(window.location.href="/auth/login"),Error("Session expired. Please log in again.")}if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.message||"HTTP error! status: ".concat(i.status))}return i.json()},r={login:(e,t)=>fetch("".concat(a,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(async e=>{if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.message||"HTTP error! status: ".concat(e.status))}return e.json()}),register:e=>fetch("".concat(a,"/auth/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(async e=>{let t=await e.json();if(!e.ok)throw Error(t.message||"HTTP error! status: ".concat(e.status));return t}),forgotPassword:e=>apiRequest("/auth/forgot-password",{method:"POST",body:JSON.stringify({email:e})}),resetPassword:(e,t,s)=>apiRequest("/auth/reset-password/".concat(e),{method:"PATCH",body:JSON.stringify({password:t,passwordConfirm:s})}),updatePassword:(e,t,s)=>apiRequest("/auth/update-password",{method:"PATCH",body:JSON.stringify({passwordCurrent:e,password:t,passwordConfirm:s})}),changePassword:(e,t,s)=>apiRequest("/auth/change-password",{method:"PATCH",body:JSON.stringify({passwordCurrent:e,password:t,passwordConfirm:s})}),logout:()=>apiRequest("/auth/logout",{method:"POST"}),refreshToken:()=>apiRequest("/auth/refresh-token",{method:"POST"})},o={getMe:()=>apiRequest("/users/me"),updateMe:e=>apiRequest("/users/me",{method:"PATCH",body:JSON.stringify(e)}),getUserProfile:e=>apiRequest("/users/profile/".concat(e)),followUser:e=>apiRequest("/users/".concat(e,"/follow"),{method:"POST"}),getUserFollowers:e=>apiRequest("/users/".concat(e,"/followers")),getUserFollowing:e=>apiRequest("/users/".concat(e,"/following")),getUserSavedStories:e=>apiRequest("/users/".concat(e,"/saved")),getUserLikedStories:()=>apiRequest("/users/me/liked"),getAllUsers:()=>apiRequest("/users/admin/all")},i={getPublicStories:e=>apiRequest("/stories".concat(e?"?".concat(e):"")),getStoryById:e=>apiRequest("/stories/".concat(e)),createStory:e=>apiRequest("/stories",{method:"POST",body:JSON.stringify(e)}),updateStory:(e,t)=>apiRequest("/stories/".concat(e),{method:"PATCH",body:JSON.stringify(t)}),deleteStory:e=>apiRequest("/stories/".concat(e),{method:"DELETE"}),likeStory:e=>apiRequest("/stories/".concat(e,"/like"),{method:"POST"}),saveStory:e=>apiRequest("/stories/".concat(e,"/save"),{method:"POST"}),shareStory:(e,t)=>apiRequest("/stories/".concat(e,"/share"),{method:"POST",body:JSON.stringify(t||{})}),getUserStories:e=>apiRequest("/stories/user/".concat(e)),searchStories:(e,t)=>{let s=new URLSearchParams({q:e,...t});return apiRequest("/stories/search?".concat(s))},getStoryComments:e=>apiRequest("/stories/".concat(e,"/comments")),addComment:(e,t,s)=>apiRequest("/stories/".concat(e,"/comments"),{method:"POST",body:JSON.stringify({content:t,parentComment:s})}),likeComment:(e,t)=>apiRequest("/stories/".concat(e,"/comments/").concat(t,"/like"),{method:"POST"})},n={searchStories:(e,t)=>{let s=t?Object.fromEntries(Object.entries(t).filter(e=>{let[t,s]=e;return null!=s&&""!==s})):{},a=new URLSearchParams({q:e,...s});return console.log("API call URL:","/search/stories?".concat(a)),apiRequest("/search/stories?".concat(a))},searchUsers:e=>{let t=new URLSearchParams({q:e});return apiRequest("/search/users?".concat(t))},getSearchSuggestions:e=>{let t=new URLSearchParams({q:e});return apiRequest("/search/suggestions?".concat(t))},getSearchFilters:()=>apiRequest("/search/filters"),globalSearch:e=>{let t=new URLSearchParams({q:e});return apiRequest("/search/global?".concat(t))}},l={getAllStories:e=>apiRequest("/admin/stories".concat(e?"?".concat(e):"")),getStoryForReview:e=>apiRequest("/admin/stories/".concat(e)),approveStory:e=>apiRequest("/admin/stories/".concat(e,"/approve"),{method:"PATCH"}),rejectStory:(e,t)=>apiRequest("/admin/stories/".concat(e,"/reject"),{method:"PATCH",body:JSON.stringify({reason:t})}),bulkApproveStories:e=>apiRequest("/admin/stories/bulk-approve",{method:"PATCH",body:JSON.stringify({storyIds:e})}),bulkRejectStories:(e,t)=>apiRequest("/admin/stories/bulk-reject",{method:"PATCH",body:JSON.stringify({storyIds:e,reason:t})}),getAllUsers:e=>apiRequest("/users/admin/all".concat(e?"?".concat(e):"")),suspendUser:(e,t,s)=>apiRequest("/admin/users/".concat(e,"/suspend"),{method:"PATCH",body:JSON.stringify({reason:t,duration:s})}),unsuspendUser:e=>apiRequest("/admin/users/".concat(e,"/unsuspend"),{method:"PATCH"}),deleteUser:e=>apiRequest("/users/".concat(e),{method:"DELETE"}),getAllAdmins:()=>apiRequest("/admin/admins"),getAdminProfile:()=>apiRequest("/admin/profile"),updateAdminProfile:e=>apiRequest("/admin/profile",{method:"PATCH",body:JSON.stringify(e)}),getAdminSettings:()=>apiRequest("/admin/settings"),updateAdminSettings:e=>apiRequest("/admin/settings",{method:"PATCH",body:JSON.stringify(e)}),getAnalytics:()=>apiRequest("/admin/analytics"),getDashboardStats:()=>apiRequest("/admin/dashboard-stats")}},86981:function(e,t,s){"use strict";s.d(t,{E$:function(){return getAvatarUrl},Jn:function(){return getImageUrl}});let getImageUrl=(e,t)=>{if(!e)return t||"https://ui-avatars.com/api/?name=User&background=6366f1&color=fff&size=150";if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("blob:"))return e;let s=e.startsWith("/")?e:"/".concat(e);return"".concat("https://api.dhyey.delpat.in/api/v1").concat(s)},getAvatarUrl=e=>getImageUrl(e,"https://ui-avatars.com/api/?name=User&background=6366f1&color=fff&size=150")},86965:function(e,t,s){"use strict";s.d(t,{Am:function(){return r},D2:function(){return a}});let ToastManager=class ToastManager{subscribe(e){return this.listeners.add(e),()=>this.listeners.delete(e)}show(e){this.listeners.forEach(t=>t(e))}constructor(){this.listeners=new Set}};let a=new ToastManager,showToast=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e3;a.show({message:e,type:t,duration:s})},r={success:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;return showToast(e,"success",t)},error:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;return showToast(e,"error",t)},info:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;return showToast(e,"info",t)},warning:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;return showToast(e,"warning",t)}}},96871:function(e,t,s){e.exports=s(92054)}},function(e){e.O(0,[2054,6895,7115,2835,1744],function(){return e(e.s=49616)}),_N_E=e.O()}]);