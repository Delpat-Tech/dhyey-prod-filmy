(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6296],{18347:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var r=s(57068);let a=(0,r.Z)("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},25498:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var r=s(57068);let a=(0,r.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},31621:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var r=s(57068);let a=(0,r.Z)("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]])},6026:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var r=s(57068);let a=(0,r.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},51843:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var r=s(57068);let a=(0,r.Z)("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},23587:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var r=s(57068);let a=(0,r.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},60028:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var r=s(57068);let a=(0,r.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},39300:function(e,t,s){"use strict";s.d(t,{Z:function(){return a}});var r=s(57068);let a=(0,r.Z)("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]])},84811:function(e,t,s){Promise.resolve().then(s.bind(s,97418))},97418:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return StoryReviewDetail}});var r=s(37821),a=s(58078),i=s(96871),o=s.n(i),n=s(45039),l=s.n(n),d=s(25498),c=s(6026),u=s(39300),h=s(31621),x=s(18347),m=s(23587),p=s(60028),g=s(51843),y=s(8494),v=s(88742);function StoryReviewDetail(e){var t,s,i,n,f,b,j,w,N,S,k,R,q,A,P,T,C,O,U,Z,E,_,D;let{storyId:z}=e,[I,F]=(0,a.useState)(null),[H,J]=(0,a.useState)(!0),[L,M]=(0,a.useState)("content"),[V,B]=(0,a.useState)(""),[G,W]=(0,a.useState)(""),[X,K]=(0,a.useState)(!1),[Q,Y]=(0,a.useState)(!1),[$,ee]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let loadStory=async()=>{try{J(!0);let e=await y.Sb.getStoryForReview(z);F(e.data.story)}catch(e){console.error("Failed to load story:",e),(0,v.c0)({type:"error",title:"Failed to load story",message:"Story not available"})}finally{J(!1)}};loadStory()},[z]);let handleApprove=async()=>{ee(!0);try{await y.Sb.approveStory(z),(0,v.c0)({type:"success",title:"Story Approved",message:"The story has been approved and published. The author will be notified."}),K(!1),B("");let e=await y.Sb.getStoryForReview(z);F(e.data.story)}catch(e){(0,v.c0)({type:"error",title:"Approval Failed",message:"Failed to approve story. Please try again."})}finally{ee(!1)}},handleReject=async()=>{ee(!0);try{await y.Sb.rejectStory(z,G),(0,v.c0)({type:"success",title:"Story Rejected",message:"The story has been rejected. The author will be notified with the reason."}),Y(!1),W("");let e=await y.Sb.getStoryForReview(z);F(e.data.story)}catch(e){(0,v.c0)({type:"error",title:"Rejection Failed",message:"Failed to reject story. Please try again."})}finally{ee(!1)}},formatDate=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return H?(0,r.jsx)("div",{className:"space-y-6",children:(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,r.jsx)("div",{className:"animate-pulse",children:(0,r.jsxs)("div",{className:"flex space-x-4",children:[(0,r.jsx)("div",{className:"w-48 h-32 bg-gray-200 rounded"}),(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,r.jsx)("div",{className:"h-6 bg-gray-200 rounded w-3/4"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),(0,r.jsx)("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})]})})})}):I?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)(o(),{href:"/admin/stories",className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:(0,r.jsx)(d.Z,{size:20})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Story Review"}),(0,r.jsx)("p",{className:"text-gray-600",children:"Review and moderate submitted content"})]})]}),(0,r.jsx)("div",{className:"flex space-x-3",children:"approved"===I.status?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 px-4 py-2 bg-green-100 text-green-700 rounded-lg",children:[(0,r.jsx)(c.Z,{size:16}),(0,r.jsx)("span",{children:"Approved"})]}),(0,r.jsxs)("button",{onClick:()=>Y(!0),className:"flex items-center space-x-2 px-4 py-2 border border-red-300 text-red-700 rounded-lg hover:bg-red-50",children:[(0,r.jsx)(u.Z,{size:16}),(0,r.jsx)("span",{children:"Reject"})]})]}):"rejected"===I.status?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 px-4 py-2 bg-red-100 text-red-700 rounded-lg",children:[(0,r.jsx)(u.Z,{size:16}),(0,r.jsx)("span",{children:"Rejected"})]}),(0,r.jsxs)("button",{onClick:()=>K(!0),className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[(0,r.jsx)(c.Z,{size:16}),(0,r.jsx)("span",{children:"Approve"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{onClick:()=>Y(!0),className:"flex items-center space-x-2 px-4 py-2 border border-red-300 text-red-700 rounded-lg hover:bg-red-50",children:[(0,r.jsx)(u.Z,{size:16}),(0,r.jsx)("span",{children:"Reject"})]}),(0,r.jsxs)("button",{onClick:()=>K(!0),className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[(0,r.jsx)(c.Z,{size:16}),(0,r.jsx)("span",{children:"Approve"})]})]})})]}),(0,r.jsx)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-start space-x-6",children:[I.image?(0,r.jsx)(l(),{src:I.image,alt:I.title,width:200,height:120,className:"rounded-lg object-cover"}):(0,r.jsx)("div",{className:"w-48 h-32 bg-gradient-to-br from-purple-100 to-pink-100 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-purple-500 text-4xl",children:"\uD83D\uDCD6"})}),(0,r.jsx)("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("h2",{className:"text-xl font-bold text-gray-900",children:I.title}),(0,r.jsxs)("div",{className:"flex items-center mt-2 space-x-4 text-sm text-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(l(),{src:(null===(t=I.author)||void 0===t?void 0:t.avatar)||"/default-avatar.png",alt:(null===(s=I.author)||void 0===s?void 0:s.name)||"Author",width:20,height:20,className:"rounded-full"}),(0,r.jsxs)("span",{children:["by ",(null===(i=I.author)||void 0===i?void 0:i.name)||"Unknown Author"]})]}),(0,r.jsx)("span",{children:"•"}),(0,r.jsx)("span",{children:I.genre||"Unknown Genre"}),(0,r.jsx)("span",{children:"•"}),(0,r.jsxs)("span",{children:[(null===(n=I.content)||void 0===n?void 0:n.split(" ").length)||0," words"]})]}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mt-3",children:(I.hashtags||I.tags||[]).map((e,t)=>(0,r.jsx)("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-sm rounded",children:e.startsWith("#")?e:"#".concat(e)},t))})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsx)("div",{className:"flex items-center space-x-2 mb-2",children:(0,r.jsx)("span",{className:"px-3 py-1 text-sm font-medium ".concat("pending"===I.status||"in_review"===I.status?"rounded bg-yellow-100 text-yellow-800":"rounded-full ".concat("approved"===I.status||"published"===I.status?"bg-green-100 text-green-800":"rejected"===I.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800")),children:"pending"===I.status?"Pending Review":"in_review"===I.status?"In Review":"approved"===I.status?"Approved":"published"===I.status?"Published":"rejected"===I.status?"Rejected":I.status||"Unknown Status"})}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-1 mb-1",children:[(0,r.jsx)(h.Z,{size:14}),(0,r.jsxs)("span",{children:["Submitted ",formatDate(I.createdAt||I.submittedAt||new Date().toISOString())]})]}),((null===(f=I.reports)||void 0===f?void 0:f.length)||0)>0&&(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-1 text-red-600",children:[(0,r.jsx)(x.Z,{size:14}),(0,r.jsxs)("span",{children:[(null===(b=I.reports)||void 0===b?void 0:b.length)||0," report(s)"]})]})]})]})]})})]})}),(0,r.jsx)("div",{className:"border-b border-gray-200",children:(0,r.jsx)("nav",{className:"-mb-px flex space-x-8",children:[{id:"content",label:"Content",icon:m.Z},{id:"author",label:"Author Info",icon:p.Z},{id:"history",label:"History",icon:g.Z}].map(e=>(0,r.jsxs)("button",{onClick:()=>M(e.id),className:"flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm ".concat(L===e.id?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:[(0,r.jsx)(e.icon,{size:16}),(0,r.jsx)("span",{children:e.label})]},e.id))})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 max-w-full overflow-hidden",children:["content"===L&&(0,r.jsx)("div",{className:"p-6",children:(0,r.jsx)("div",{className:"prose max-w-full",children:(0,r.jsx)("div",{className:"whitespace-pre-wrap text-gray-800 leading-relaxed break-words overflow-wrap-anywhere max-w-full",children:I.content})})}),"author"===L&&(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-start space-x-6",children:[(0,r.jsx)(l(),{src:(null===(j=I.author)||void 0===j?void 0:j.avatar)||"/default-avatar.png",alt:(null===(w=I.author)||void 0===w?void 0:w.name)||"Author",width:80,height:80,className:"rounded-full"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900",children:(null===(N=I.author)||void 0===N?void 0:N.name)||"Unknown Author"}),(null===(S=I.author)||void 0===S?void 0:S.verified)&&(0,r.jsx)(c.Z,{className:"h-5 w-5 text-blue-500"})]}),(0,r.jsxs)("p",{className:"text-gray-600",children:["@",(null===(k=I.author)||void 0===k?void 0:k.username)||"unknown"]}),(0,r.jsx)("p",{className:"text-gray-600",children:(null===(R=I.author)||void 0===R?void 0:R.email)||"No email available"}),(0,r.jsx)("p",{className:"mt-2 text-gray-700",children:(null===(q=I.author)||void 0===q?void 0:q.bio)||"No bio available"}),(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-4 mt-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-xl font-bold text-gray-900",children:(null===(P=I.author)||void 0===P?void 0:null===(A=P.stats)||void 0===A?void 0:A.stories)||0}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Stories"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-xl font-bold text-gray-900",children:(null===(C=I.author)||void 0===C?void 0:null===(T=C.stats)||void 0===T?void 0:T.followers)||0}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Followers"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-xl font-bold text-gray-900",children:(null===(U=I.author)||void 0===U?void 0:null===(O=U.stats)||void 0===O?void 0:O.following)||0}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Following"})]}),(0,r.jsxs)("div",{className:"text-center",children:[(0,r.jsx)("div",{className:"text-xl font-bold text-gray-900",children:(null===(E=I.author)||void 0===E?void 0:null===(Z=E.stats)||void 0===Z?void 0:Z.likes)||0}),(0,r.jsx)("div",{className:"text-sm text-gray-600",children:"Total Likes"})]})]}),(0,r.jsxs)("div",{className:"mt-4 text-sm text-gray-500",children:["Joined ",formatDate((null===(_=I.author)||void 0===_?void 0:_.createdAt)||(null===(D=I.author)||void 0===D?void 0:D.joinDate)||new Date().toISOString())]})]})]})}),"history"===L&&(0,r.jsx)("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-2 h-2 mt-2 bg-blue-400 rounded-full"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-900",children:"Story submitted for review"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:formatDate(I.createdAt||I.submittedAt||new Date().toISOString())})]})]}),I.rejectedAt&&(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-2 h-2 mt-2 bg-red-400 rounded-full"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-900",children:"Story rejected"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:formatDate(I.rejectedAt)}),(I.rejectionReason||I.moderationNote)&&(0,r.jsxs)("p",{className:"text-xs text-red-600 mt-1 italic",children:["Reason: ",I.rejectionReason||I.moderationNote]})]})]}),I.approvedAt&&(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-2 h-2 mt-2 bg-green-400 rounded-full"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-900",children:"Story approved"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:formatDate(I.approvedAt)}),I.approvalNote&&(0,r.jsxs)("p",{className:"text-xs text-gray-600 mt-1 italic",children:["Note: ",I.approvalNote]})]})]}),I.publishedAt&&(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-2 h-2 mt-2 bg-green-400 rounded-full"}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm text-gray-900",children:"Story published"}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:formatDate(I.publishedAt)})]})]})]})})]}),X&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Approve Story"}),(0,r.jsxs)("p",{className:"text-gray-600 mb-4",children:['Are you sure you want to approve "',I.title,'"? This will make it visible to all users.']}),(0,r.jsx)("textarea",{value:V,onChange:e=>B(e.target.value),placeholder:"Add a note (optional)",className:"w-full p-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-gray-900 bg-white",rows:3}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-4",children:[(0,r.jsx)("button",{onClick:()=>K(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{onClick:handleApprove,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Approve Story"})]})]})}),Q&&(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Reject Story"}),(0,r.jsxs)("p",{className:"text-gray-600 mb-4",children:['Please provide a reason for rejecting "',I.title,'". This will be sent to the author.']}),(0,r.jsx)("textarea",{value:G,onChange:e=>W(e.target.value),placeholder:"Reason for rejection (required)",className:"w-full p-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent text-gray-900 bg-white",rows:4,required:!0}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-4",children:[(0,r.jsx)("button",{onClick:()=>Y(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,r.jsx)("button",{onClick:handleReject,disabled:!G.trim(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Reject Story"})]})]})})]}):(0,r.jsxs)("div",{className:"text-center py-12",children:[(0,r.jsx)("h3",{className:"text-lg font-medium text-gray-900",children:"Story not found"}),(0,r.jsx)("p",{className:"text-gray-500",children:"The requested story could not be loaded."})]})}},8494:function(e,t,s){"use strict";s.d(t,{OF:function(){return n},Sb:function(){return l},TV:function(){return i},fh:function(){return o},kv:function(){return a}});let r="https://api.dhyey.delpat.in/api/v1",apiRequest=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=localStorage.getItem("dhyey_token"),a=localStorage.getItem("dhyey_token_expiry");if(s&&a&&new Date().getTime()>parseInt(a))throw console.log("Token expired, clearing session"),localStorage.removeItem("dhyey_user"),localStorage.removeItem("dhyey_token"),localStorage.removeItem("dhyey_token_expiry"),localStorage.removeItem("dhyey_remember_me"),window.location.pathname.includes("/auth/")||(window.location.href="/auth/login"),Error("Session expired. Please log in again.");let i={...t,headers:{"Content-Type":"application/json",...s&&{Authorization:"Bearer ".concat(s)},...t.headers},...s&&{credentials:"include"}},o=await fetch("".concat(r).concat(e),i);if(401===o.status){if(e.includes("/auth/update-password")||e.includes("/auth/change-password")){let e=await o.json().catch(()=>({}));throw Error(e.message||"Current password is incorrect")}throw console.log("Unauthorized request, clearing session"),localStorage.removeItem("dhyey_user"),localStorage.removeItem("dhyey_token"),localStorage.removeItem("dhyey_token_expiry"),localStorage.removeItem("dhyey_remember_me"),window.location.pathname.includes("/auth/")||(window.location.href="/auth/login"),Error("Session expired. Please log in again.")}if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.message||"HTTP error! status: ".concat(o.status))}return o.json()},a={login:(e,t)=>fetch("".concat(r,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(async e=>{if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.message||"HTTP error! status: ".concat(e.status))}return e.json()}),register:e=>fetch("".concat(r,"/auth/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(async e=>{let t=await e.json();if(!e.ok)throw Error(t.message||"HTTP error! status: ".concat(e.status));return t}),forgotPassword:e=>apiRequest("/auth/forgot-password",{method:"POST",body:JSON.stringify({email:e})}),resetPassword:(e,t,s)=>apiRequest("/auth/reset-password/".concat(e),{method:"PATCH",body:JSON.stringify({password:t,passwordConfirm:s})}),updatePassword:(e,t,s)=>apiRequest("/auth/update-password",{method:"PATCH",body:JSON.stringify({passwordCurrent:e,password:t,passwordConfirm:s})}),changePassword:(e,t,s)=>apiRequest("/auth/change-password",{method:"PATCH",body:JSON.stringify({passwordCurrent:e,password:t,passwordConfirm:s})}),logout:()=>apiRequest("/auth/logout",{method:"POST"}),refreshToken:()=>apiRequest("/auth/refresh-token",{method:"POST"})},i={getMe:()=>apiRequest("/users/me"),updateMe:e=>apiRequest("/users/me",{method:"PATCH",body:JSON.stringify(e)}),getUserProfile:e=>apiRequest("/users/profile/".concat(e)),followUser:e=>apiRequest("/users/".concat(e,"/follow"),{method:"POST"}),getUserFollowers:e=>apiRequest("/users/".concat(e,"/followers")),getUserFollowing:e=>apiRequest("/users/".concat(e,"/following")),getUserSavedStories:e=>apiRequest("/users/".concat(e,"/saved")),getUserLikedStories:()=>apiRequest("/users/me/liked"),getAllUsers:()=>apiRequest("/users/admin/all")},o={getPublicStories:e=>apiRequest("/stories".concat(e?"?".concat(e):"")),getStoryById:e=>apiRequest("/stories/".concat(e)),createStory:e=>apiRequest("/stories",{method:"POST",body:JSON.stringify(e)}),updateStory:(e,t)=>apiRequest("/stories/".concat(e),{method:"PATCH",body:JSON.stringify(t)}),deleteStory:e=>apiRequest("/stories/".concat(e),{method:"DELETE"}),likeStory:e=>apiRequest("/stories/".concat(e,"/like"),{method:"POST"}),saveStory:e=>apiRequest("/stories/".concat(e,"/save"),{method:"POST"}),shareStory:(e,t)=>apiRequest("/stories/".concat(e,"/share"),{method:"POST",body:JSON.stringify(t||{})}),getUserStories:e=>apiRequest("/stories/user/".concat(e)),searchStories:(e,t)=>{let s=new URLSearchParams({q:e,...t});return apiRequest("/stories/search?".concat(s))},getStoryComments:e=>apiRequest("/stories/".concat(e,"/comments")),addComment:(e,t,s)=>apiRequest("/stories/".concat(e,"/comments"),{method:"POST",body:JSON.stringify({content:t,parentComment:s})}),likeComment:(e,t)=>apiRequest("/stories/".concat(e,"/comments/").concat(t,"/like"),{method:"POST"})},n={searchStories:(e,t)=>{let s=t?Object.fromEntries(Object.entries(t).filter(e=>{let[t,s]=e;return null!=s&&""!==s})):{},r=new URLSearchParams({q:e,...s});return console.log("API call URL:","/search/stories?".concat(r)),apiRequest("/search/stories?".concat(r))},searchUsers:e=>{let t=new URLSearchParams({q:e});return apiRequest("/search/users?".concat(t))},getSearchSuggestions:e=>{let t=new URLSearchParams({q:e});return apiRequest("/search/suggestions?".concat(t))},getSearchFilters:()=>apiRequest("/search/filters"),globalSearch:e=>{let t=new URLSearchParams({q:e});return apiRequest("/search/global?".concat(t))}},l={getAllStories:e=>apiRequest("/admin/stories".concat(e?"?".concat(e):"")),getStoryForReview:e=>apiRequest("/admin/stories/".concat(e)),approveStory:e=>apiRequest("/admin/stories/".concat(e,"/approve"),{method:"PATCH"}),rejectStory:(e,t)=>apiRequest("/admin/stories/".concat(e,"/reject"),{method:"PATCH",body:JSON.stringify({reason:t})}),bulkApproveStories:e=>apiRequest("/admin/stories/bulk-approve",{method:"PATCH",body:JSON.stringify({storyIds:e})}),bulkRejectStories:(e,t)=>apiRequest("/admin/stories/bulk-reject",{method:"PATCH",body:JSON.stringify({storyIds:e,reason:t})}),getAllUsers:e=>apiRequest("/users/admin/all".concat(e?"?".concat(e):"")),suspendUser:(e,t,s)=>apiRequest("/admin/users/".concat(e,"/suspend"),{method:"PATCH",body:JSON.stringify({reason:t,duration:s})}),unsuspendUser:e=>apiRequest("/admin/users/".concat(e,"/unsuspend"),{method:"PATCH"}),deleteUser:e=>apiRequest("/users/".concat(e),{method:"DELETE"}),getAllAdmins:()=>apiRequest("/admin/admins"),getAdminProfile:()=>apiRequest("/admin/profile"),updateAdminProfile:e=>apiRequest("/admin/profile",{method:"PATCH",body:JSON.stringify(e)}),getAdminSettings:()=>apiRequest("/admin/settings"),updateAdminSettings:e=>apiRequest("/admin/settings",{method:"PATCH",body:JSON.stringify(e)}),getAnalytics:()=>apiRequest("/admin/analytics"),getDashboardStats:()=>apiRequest("/admin/dashboard-stats")}},88742:function(e,t,s){"use strict";s.d(t,{Mv:function(){return shareProfile},c0:function(){return showNotification}});let showNotification=e=>{let{type:t,title:s,message:r,duration:a=3e3}=e,i=document.createElement("div");i.className="fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm transition-all duration-300 ".concat("success"===t?"bg-green-100 text-green-800 border border-green-200":"error"===t?"bg-red-100 text-red-800 border border-red-200":"warning"===t?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-blue-100 text-blue-800 border border-blue-200"),i.innerHTML='\n    <div class="flex items-start">\n      <div class="flex-1">\n        <div class="font-medium">'.concat(s,"</div>\n        ").concat(r?'<div class="text-sm mt-1">'.concat(r,"</div>"):"",'\n      </div>\n      <button class="ml-2 text-gray-400 hover:text-gray-600" onclick="this.parentElement.parentElement.remove()">\n        \xd7\n      </button>\n    </div>\n  '),document.body.appendChild(i),setTimeout(()=>{i.parentElement&&i.remove()},a)},handleAsyncError=function(e){var t,s;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"An unexpected error occurred";console.error("Error:",e);let a=(null==e?void 0:null===(s=e.response)||void 0===s?void 0:null===(t=s.data)||void 0===t?void 0:t.message)||(null==e?void 0:e.message)||r;showNotification({type:"error",title:"Error",message:a})},showSuccess=(e,t)=>{showNotification({type:"success",title:e,message:t})},shareProfile=async(e,t)=>{let s="".concat(window.location.origin,"/profile/").concat(t.username),r="Check out ".concat(t.name,"'s profile on Dhyey");try{switch(e){case"copy":await navigator.clipboard.writeText(s),showSuccess("Link Copied","Profile link copied to clipboard!");break;case"twitter":window.open("https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(r),"&url=").concat(encodeURIComponent(s)),"_blank");break;case"facebook":window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(s)),"_blank");break;case"linkedin":window.open("https://www.linkedin.com/sharing/share-offsite/?url=".concat(encodeURIComponent(s)),"_blank");break;default:throw Error("Unsupported platform")}}catch(e){handleAsyncError(e,"Failed to share profile")}}},96871:function(e,t,s){e.exports=s(92054)}},function(e){e.O(0,[2054,6895,7115,2835,1744],function(){return e(e.s=84811)}),_N_E=e.O()}]);