(()=>{var e={};e.id=2495,e.ids=[2495],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},39491:e=>{"use strict";e.exports=require("assert")},6113:e=>{"use strict";e.exports=require("crypto")},82361:e=>{"use strict";e.exports=require("events")},57147:e=>{"use strict";e.exports=require("fs")},13685:e=>{"use strict";e.exports=require("http")},95687:e=>{"use strict";e.exports=require("https")},41808:e=>{"use strict";e.exports=require("net")},71017:e=>{"use strict";e.exports=require("path")},12781:e=>{"use strict";e.exports=require("stream")},76224:e=>{"use strict";e.exports=require("tty")},57310:e=>{"use strict";e.exports=require("url")},73837:e=>{"use strict";e.exports=require("util")},59796:e=>{"use strict";e.exports=require("zlib")},42887:(e,s,r)=>{"use strict";r.r(s),r.d(s,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>c,pages:()=>m,routeModule:()=>p,tree:()=>o});var t=r(36577),a=r(55533),n=r(40443),i=r.n(n),d=r(53320),l={};for(let e in d)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>d[e]);r.d(s,l);let o=["",{children:["admin",{children:["admins",{children:["add",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,29237)),"D:\\Prog\\Webdev\\react\\filmy-creators\\frontend\\src\\app\\admin\\admins\\add\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,46191)),"D:\\Prog\\Webdev\\react\\filmy-creators\\frontend\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,4199)),"D:\\Prog\\Webdev\\react\\filmy-creators\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,31459,23)),"next/dist/client/components/not-found-error"]}],m=["D:\\Prog\\Webdev\\react\\filmy-creators\\frontend\\src\\app\\admin\\admins\\add\\page.tsx"],c="/admin/admins/add/page",u={require:r,loadChunk:()=>Promise.resolve()},p=new t.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/admins/add/page",pathname:"/admin/admins/add",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},96038:(e,s,r)=>{Promise.resolve().then(r.bind(r,92780))},92780:(e,s,r)=>{"use strict";r.r(s),r.d(s,{default:()=>AddAdminPage});var t=r(22406),a=r(33466),n=r(36460),i=r(80404),d=r(55731),l=r.n(d),o=r(89514),m=r(2153),c=r(78775),u=r(19785),p=r(81380),x=r(88598),g=r(96084),h=r(84913),b=r(60698),f=r(84867);let j=[{value:"admin",label:"Admin",description:"Can manage content, users, and basic settings",permissions:["content_management","user_management","basic_settings"]}];function AddAdminForm(){let[e,s]=(0,i.useState)({name:"",email:"",password:"",username:"",role:"",permissions:[],sendInvite:!0,customMessage:""}),[r,a]=(0,i.useState)({}),[n,d]=(0,i.useState)(!1),[y,v]=(0,i.useState)(!1),handleInputChange=e=>{let{name:t,value:n,type:i}=e.target;if("checkbox"===i){let r=e.target.checked;s(e=>({...e,[t]:r}))}else s(e=>({...e,[t]:n}));r[t]&&a(e=>({...e,[t]:""}))},validateForm=()=>{let s={};return e.name.trim()||(s.name="Full name is required"),e.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(s.email="Please enter a valid email address"):s.email="Email is required",e.password.trim()?e.password.length<6&&(s.password="Password must be at least 6 characters"):s.password="Password is required",a(s),0===Object.keys(s).length},handleSubmit=async r=>{if(r.preventDefault(),validateForm()){d(!0);try{let r=localStorage.getItem("dhyey_token");if(console.log("Token from localStorage:",r),console.log("Sending request to create admin:",{name:e.name,email:e.email,password:e.password}),!r){a({submit:"No authentication token found. Please log in again."});return}let t=await o.Z.post("/api/v1/admin/create-admin",{name:e.name,email:e.email,password:e.password},{headers:{Authorization:`Bearer ${r}`}});console.log("Admin created successfully:",t.data),v(!0),s({name:"",email:"",password:"",username:"",role:"",permissions:[],sendInvite:!0,customMessage:""}),a({})}catch(e){console.error("Error adding admin:",e),a({submit:e.response?.data?.message||"Failed to create admin"})}finally{d(!1)}}};return j.find(s=>s.value===e.role),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-4",children:[t.jsx(l(),{href:"/admin/admins",className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:t.jsx(m.Z,{size:20})}),(0,t.jsxs)("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Add New Admin"}),t.jsx("p",{className:"text-gray-600",children:"Invite a new user to join the admin team"})]})]}),y&&t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(c.Z,{className:"h-5 w-5 text-green-600"}),(0,t.jsxs)("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-green-800",children:"Admin Added Successfully!"}),t.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Admin user has been created successfully!"})]}),t.jsx("button",{onClick:()=>v(!1),className:"text-green-400 hover:text-green-600",children:t.jsx(u.Z,{size:16})})]})}),(0,t.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-8",children:[(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),(0,t.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Full Name *"}),(0,t.jsxs)("div",{className:"relative",children:[t.jsx(p.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),t.jsx("input",{type:"text",id:"name",name:"name",value:e.name,onChange:handleInputChange,className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 bg-white ${r.name?"border-red-300":"border-gray-200"}`,placeholder:"Enter full name"})]}),r.name&&(0,t.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[t.jsx(x.Z,{size:14,className:"mr-1"}),r.name]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address *"}),(0,t.jsxs)("div",{className:"relative",children:[t.jsx(g.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),t.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:handleInputChange,className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 bg-white ${r.email?"border-red-300":"border-gray-200"}`,placeholder:"Enter email address"})]}),r.email&&(0,t.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[t.jsx(x.Z,{size:14,className:"mr-1"}),r.email]})]}),(0,t.jsxs)("div",{children:[t.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700 mb-2",children:"Password *"}),(0,t.jsxs)("div",{className:"relative",children:[t.jsx(h.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),t.jsx("input",{type:"password",id:"password",name:"password",value:e.password,onChange:handleInputChange,className:`w-full pl-10 pr-4 py-2 border rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 bg-white ${r.password?"border-red-300":"border-gray-200"}`,placeholder:"Enter password"})]}),r.password&&(0,t.jsxs)("p",{className:"mt-1 text-sm text-red-600 flex items-center",children:[t.jsx(x.Z,{size:14,className:"mr-1"}),r.password]})]})]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Admin Role"}),(0,t.jsxs)("div",{className:"flex items-center space-x-3 p-4 bg-purple-50 border border-purple-200 rounded-lg",children:[t.jsx(b.Z,{className:"h-5 w-5 text-purple-600"}),(0,t.jsxs)("div",{children:[t.jsx("p",{className:"font-medium text-purple-900",children:"Administrator"}),t.jsx("p",{className:"text-sm text-purple-700",children:"Full access to manage content, users, and system settings"})]})]})]}),r.submit&&t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,t.jsxs)("div",{className:"flex items-center space-x-3",children:[t.jsx(x.Z,{className:"h-5 w-5 text-red-600"}),t.jsx("p",{className:"text-sm text-red-800",children:r.submit})]})}),(0,t.jsxs)("div",{className:"flex items-center justify-end space-x-4",children:[t.jsx(l(),{href:"/admin/admins",className:"px-6 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),t.jsx("button",{type:"submit",disabled:n,className:"flex items-center space-x-2 px-6 py-2 bg-purple-600 text-white rounded-lg hover:bg-purple-700 disabled:opacity-50 disabled:cursor-not-allowed",children:n?(0,t.jsxs)(t.Fragment,{children:[t.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),t.jsx("span",{children:"Creating Admin..."})]}):(0,t.jsxs)(t.Fragment,{children:[t.jsx(f.Z,{size:16}),t.jsx("span",{children:"Create Admin"})]})})]})]})]})}function AddAdminPage(){let{user:e,isAuthenticated:s,isLoading:r}=(0,a.useAuth)(),d=(0,n.useRouter)();return((0,i.useEffect)(()=>{r||s&&e?.role==="admin"||d.push("/auth/login")},[s,e,r,d]),r)?t.jsx("div",{className:"min-h-screen flex items-center justify-center",children:t.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):s&&e?.role==="admin"?t.jsx(AddAdminForm,{}):null}},29237:(e,s,r)=>{"use strict";r.r(s),r.d(s,{$$typeof:()=>i,__esModule:()=>n,default:()=>l});var t=r(19894);let a=(0,t.createProxy)(String.raw`D:\Prog\Webdev\react\filmy-creators\frontend\src\app\admin\admins\add\page.tsx`),{__esModule:n,$$typeof:i}=a,d=a.default,l=d}};var s=require("../../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),r=s.X(0,[7378,8097,9804,621,866,9514,9519,9930,9695,7718],()=>__webpack_exec__(42887));module.exports=r})();