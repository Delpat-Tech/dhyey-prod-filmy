(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[1572,2283],{775:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(57068);let s=(0,a.Z)("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]])},11654:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(57068);let s=(0,a.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},83633:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(57068);let s=(0,a.Z)("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]])},8464:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(57068);let s=(0,a.Z)("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]])},5032:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var a=r(57068);let s=(0,a.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},34856:function(e,t,r){Promise.resolve().then(r.bind(r,34664))},34664:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return CreatePage}});var a=r(37821),s=r(58078),n=r(5032),o=r(8464),i=r(83633),l=r(49913),c=r(45039),d=r.n(c),u=r(8494),h=r(88742);let m=["Fiction","Poetry","Romance","Mystery","Sci-Fi","Fantasy","Drama","Non-Fiction"];function CreateStoryForm(){let[e,t]=(0,s.useState)({title:"",content:"",genres:[],hashtags:"",featuredImage:null}),[r,c]=(0,s.useState)(null),[p,g]=(0,s.useState)(!1),[y,f]=(0,s.useState)("unsaved"),handleInputChange=e=>{let{name:r,value:a}=e.target;t(e=>({...e,[r]:a})),f("unsaved")},handleSubmit=async r=>{r.preventDefault(),g(!0);try{let r={title:e.title,content:e.content,genre:e.genres[0]||"Fiction",hashtags:e.hashtags.split(" ").filter(e=>e.trim()),status:"pending"};await u.fh.createStory(r),(0,h.c0)({type:"success",title:"Story Submitted for Review!",message:"Your story has been submitted and is pending admin approval. You will be notified once it is reviewed."}),t({title:"",content:"",genres:[],hashtags:"",featuredImage:null}),c(null)}catch(e){(0,h.c0)({type:"error",title:"Failed to Create Story",message:e.message||"Something went wrong. Please try again."})}finally{g(!1)}};return(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden backdrop-blur-sm",children:(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"p-8 space-y-6",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Story Title *"}),(0,a.jsx)("input",{type:"text",id:"title",name:"title",value:e.title,onChange:handleInputChange,placeholder:"Enter your story title...",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-base transition-all duration-200 text-gray-900 bg-white placeholder:text-gray-500",required:!0})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"genres",className:"block text-sm font-medium text-gray-700 mb-2",children:["Genres * ",(0,a.jsx)("span",{className:"text-sm font-normal text-gray-500",children:"(Select multiple)"})]}),(0,a.jsx)(l.Z,{mode:"multiple",value:e.genres,onChange:r=>{let a=r.map(e=>"#".concat(e.toLowerCase().replace(/[^a-z0-9]/g,""))).join(" "),s=e.hashtags.split(" ").filter(e=>e.trim()&&!m.some(t=>e.toLowerCase()==="#".concat(t.toLowerCase().replace(/[^a-z0-9]/g,"")))).join(" "),n=[s,a].filter(e=>e.trim()).join(" ");t(e=>({...e,genres:r,hashtags:n})),f("unsaved")},placeholder:"Select genres for your story",options:m.map(e=>({label:e,value:e,emoji:"Fiction"===e?"\uD83D\uDCDA":"Poetry"===e?"\uD83C\uDFAD":"Romance"===e?"\uD83D\uDC95":"Mystery"===e?"\uD83D\uDD0D":"Sci-Fi"===e?"\uD83D\uDE80":"Fantasy"===e?"\uD83E\uDDD9‍♂️":"Drama"===e?"\uD83C\uDFAC":"Non-Fiction"===e?"\uD83D\uDCD6":"\uD83D\uDCDD"})),className:"w-full"}),e.genres.length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500 mb-1",children:"Selected genres:"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-1",children:e.genres.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-purple-100 text-purple-700",children:[m.find(t=>t===e)&&(0,a.jsx)("span",{className:"mr-1",children:"Fiction"===e?"\uD83D\uDCDA":"Poetry"===e?"\uD83C\uDFAD":"Romance"===e?"\uD83D\uDC95":"Mystery"===e?"\uD83D\uDD0D":"Sci-Fi"===e?"\uD83D\uDE80":"Fantasy"===e?"\uD83E\uDDD9‍♂️":"Drama"===e?"\uD83C\uDFAC":"Non-Fiction"===e?"\uD83D\uDCD6":"\uD83D\uDCDD"}),e]},e))})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"hashtags",className:"block text-sm font-medium text-gray-700 mb-2",children:"Hashtags"}),(0,a.jsx)("input",{type:"text",id:"hashtags",name:"hashtags",value:e.hashtags,onChange:handleInputChange,placeholder:"#fiction #love #mystery",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 text-base text-gray-900 bg-white placeholder:text-gray-500"}),(0,a.jsxs)("div",{className:"mt-1",children:[(0,a.jsx)("p",{className:"text-xs text-gray-500",children:"Separate hashtags with spaces • Genre hashtags are added automatically"}),e.genres.length>0&&(0,a.jsxs)("div",{className:"mt-1 flex flex-wrap gap-1",children:[(0,a.jsx)("span",{className:"text-xs text-purple-600",children:"Auto-generated:"}),e.genres.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs bg-purple-50 text-purple-600 border border-purple-200",children:["#",e.toLowerCase().replace(/[^a-z0-9]/g,"")]},e))]})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Featured Image"}),r?(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"relative h-48 md:h-64 rounded-lg overflow-hidden",children:(0,a.jsx)(d(),{src:r,alt:"Featured image preview",fill:!0,className:"object-cover"})}),(0,a.jsx)("button",{type:"button",onClick:()=>{t(e=>({...e,featuredImage:null})),c(null)},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:(0,a.jsx)(n.Z,{size:16})})]}):(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-purple-400 transition-colors",children:[(0,a.jsx)("input",{type:"file",id:"featuredImage",accept:"image/*",onChange:e=>{var r;let a=null===(r=e.target.files)||void 0===r?void 0:r[0];if(a){t(e=>({...e,featuredImage:a}));let e=new FileReader;e.onload=e=>{var t;c(null===(t=e.target)||void 0===t?void 0:t.result)},e.readAsDataURL(a)}},className:"hidden"}),(0,a.jsxs)("label",{htmlFor:"featuredImage",className:"cursor-pointer",children:[(0,a.jsx)(o.Z,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),(0,a.jsx)("p",{className:"text-gray-600 mb-2",children:"Click to upload featured image"}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Story *"}),(0,a.jsx)("textarea",{id:"content",name:"content",value:e.content,onChange:handleInputChange,placeholder:"Start writing your story here...",rows:12,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none transition-all duration-200 text-gray-900 bg-white",required:!0}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.content.length," characters"]}),(0,a.jsx)("div",{className:"flex items-center space-x-2",children:(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded-full ".concat("saved"===y?"bg-green-100 text-green-700":"saving"===y?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"),children:"saved"===y?"Saved":"saving"===y?"Saving...":"Unsaved changes"})})]})]}),(0,a.jsx)("div",{className:"flex flex-col sm:flex-row gap-3 pt-6 border-t border-gray-200",children:(0,a.jsxs)("button",{type:"submit",disabled:p||!e.title||!e.content||0===e.genres.length,className:"flex items-center justify-center space-x-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl hover:from-purple-700 hover:to-indigo-700 hover:shadow-lg transform hover:scale-[1.02] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex-1",children:[(0,a.jsx)(i.Z,{size:16}),(0,a.jsx)("span",{children:p?"Submitting...":"Submit for Review"})]})}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,a.jsx)("h4",{className:"font-medium text-blue-900 mb-2",children:"Submission Guidelines"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[(0,a.jsx)("li",{children:"• You can select multiple genres to better categorize your story"}),(0,a.jsx)("li",{children:"• Genre hashtags are automatically added to help with discoverability"}),(0,a.jsx)("li",{children:"• Stories will be reviewed by our team before publication"}),(0,a.jsx)("li",{children:"• Please ensure your content is original and appropriate"}),(0,a.jsx)("li",{children:"• You'll receive an email notification once your story is reviewed"}),(0,a.jsx)("li",{children:"• Approved stories will be published and visible to all users"})]})]})]})})}var p=r(26709);function CreatePage(){let{isAuthenticated:e,isLoading:t,checkTokenValidity:r}=(0,p.useAuth)();return((0,s.useEffect)(()=>{let verifyAuth=async()=>{if(!t&&e){let e=await r();e||(window.location.href="/auth/login")}};verifyAuth()},[e,t,r]),t)?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):e?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8 text-center",children:[(0,a.jsx)("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-purple-500 via-indigo-500 to-purple-700 bg-clip-text text-transparent mb-3",children:"Create Your Story"}),(0,a.jsx)("p",{className:"text-gray-600 text-lg",children:"Create and publish your story for the world to read"})]}),(0,a.jsx)(CreateStoryForm,{})]})}):(window.location.href="/auth/login",null)}},49913:function(e,t,r){"use strict";r.d(t,{Z:function(){return CustomSelect}});var a=r(37821),s=r(58078),n=r(11654),o=r(775);function CustomSelect(e){let{options:t,value:r,defaultValue:i,placeholder:l="Select an option",mode:c="single",style:d,className:u="",onChange:h,disabled:m=!1,optionRender:p}=e,[g,y]=(0,s.useState)(!1),[f,x]=(0,s.useState)(()=>void 0!==r?Array.isArray(r)?r:[r]:void 0!==i?Array.isArray(i)?i:[i]:[]),b=(0,s.useRef)(null);(0,s.useEffect)(()=>{void 0!==r&&x(Array.isArray(r)?r:[r])},[r]),(0,s.useEffect)(()=>{let handleClickOutside=e=>{b.current&&!b.current.contains(e.target)&&y(!1)};return document.addEventListener("mousedown",handleClickOutside),()=>document.removeEventListener("mousedown",handleClickOutside)},[]);let handleOptionClick=e=>{let t;"multiple"===c?t=f.includes(e)?f.filter(t=>t!==e):[...f,e]:(t=[e],y(!1)),x(t),h&&h("multiple"===c?t:t[0]||"")},renderOption=e=>p?p(e):(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[e.emoji&&(0,a.jsx)("span",{role:"img","aria-label":e.label,children:e.emoji}),(0,a.jsx)("span",{children:e.desc||e.label})]});return(0,a.jsxs)("div",{ref:b,className:"relative ".concat(u),style:d,children:[(0,a.jsxs)("button",{type:"button",onClick:()=>!m&&y(!g),disabled:m,className:"\n          w-full px-3 py-2 text-left bg-white border border-gray-300 rounded-lg\n          focus:ring-2 focus:ring-purple-500 focus:border-transparent\n          flex items-center justify-between\n          ".concat(m?"bg-gray-100 cursor-not-allowed text-gray-500":"hover:border-gray-400 cursor-pointer","\n          ").concat(0===f.length?"text-gray-500":"text-gray-900","\n        "),children:[(0,a.jsx)("span",{className:"truncate",children:(()=>{if(0===f.length)return l;if("single"===c){let e=t.find(e=>e.value===f[0]);return(null==e?void 0:e.label)||f[0]}if(1===f.length){let e=t.find(e=>e.value===f[0]);return(null==e?void 0:e.label)||f[0]}return"".concat(f.length," items selected")})()}),(0,a.jsx)(n.Z,{size:16,className:"text-gray-400 transition-transform ".concat(g?"rotate-180":"")})]}),g&&!m&&(0,a.jsxs)("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-60 overflow-auto",children:[t.map(e=>(0,a.jsxs)("button",{type:"button",onClick:()=>!e.disabled&&handleOptionClick(e.value),disabled:e.disabled,className:"\n                w-full px-3 py-2 text-left hover:bg-gray-50 transition-colors\n                flex items-center justify-between\n                ".concat(e.disabled?"text-gray-400 cursor-not-allowed":"text-gray-700","\n                ").concat(f.includes(e.value)?"bg-purple-50 text-purple-700":"","\n              "),children:[(0,a.jsx)("div",{className:"flex-1",children:renderOption(e)}),f.includes(e.value)&&(0,a.jsx)(o.Z,{size:16,className:"text-purple-600 ml-2"})]},e.value)),0===t.length&&(0,a.jsx)("div",{className:"px-3 py-2 text-gray-500 text-center",children:"No options available"})]})]})}},26709:function(e,t,r){"use strict";r.r(t),r.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth},withAuth:function(){return withAuth}});var a=r(37821),s=r(58078),n=r(8494);let o=(0,s.createContext)(void 0);function AuthProvider(e){let{children:t}=e,[r,i]=(0,s.useState)(null),[l,c]=(0,s.useState)(!0);(0,s.useEffect)(()=>{checkAuthStatus()},[]);let checkAuthStatus=async()=>{try{let e=localStorage.getItem("dhyey_user"),t=localStorage.getItem("dhyey_token"),r=localStorage.getItem("dhyey_token_expiry");if(e&&t){if(r&&new Date().getTime()>parseInt(r)){console.log("Token expired, logging out"),logout();return}i(JSON.parse(e)),validateTokenInBackground(t)}}catch(e){console.error("Auth check failed:",e),logout()}finally{c(!1)}},validateTokenInBackground=async e=>{try{let t=await fetch("".concat("https://api.dhyey.delpat.in/api/v1","/users/me"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},credentials:"include"});t.ok||(console.log("Token validation failed, logging out"),logout())}catch(e){console.error("Background token validation failed:",e)}},checkTokenValidity=async()=>{try{let e=localStorage.getItem("dhyey_token");if(!e)return!1;let t=await fetch("".concat("https://api.dhyey.delpat.in/api/v1","/users/me"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},credentials:"include"});return t.ok}catch(e){return console.error("Token validation failed:",e),!1}},login=async function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];c(!0);try{let a=await n.kv.login(e,t),s={id:a.data.user._id,name:a.data.user.name,username:a.data.user.username,email:a.data.user.email,avatar:a.data.user.avatar,role:a.data.user.role||"user"},o=r?new Date().getTime()+2592e6:new Date().getTime()+864e5;localStorage.setItem("dhyey_user",JSON.stringify(s)),localStorage.setItem("dhyey_token",a.token),localStorage.setItem("dhyey_token_expiry",o.toString()),localStorage.setItem("dhyey_remember_me",r.toString()),i(s)}catch(e){if(e.message&&e.message.includes("suspended"))throw Error("Your account has been suspended. Please contact administration for further details.");throw e}finally{c(!1)}},register=async e=>{c(!0);try{let t=await n.kv.register(e),r={id:t.data.user._id,name:t.data.user.name,username:t.data.user.username,email:t.data.user.email,avatar:t.data.user.avatar,role:t.data.user.role||"user"};localStorage.setItem("dhyey_user",JSON.stringify(r)),localStorage.setItem("dhyey_token",t.token),i(r)}finally{c(!1)}},logout=async()=>{try{await n.kv.logout()}catch(e){console.error("Backend logout failed:",e)}localStorage.removeItem("dhyey_user"),localStorage.removeItem("dhyey_token"),localStorage.removeItem("dhyey_token_expiry"),localStorage.removeItem("dhyey_remember_me"),i(null),window.location.href="/auth/login"};return(0,a.jsx)(o.Provider,{value:{user:r,isLoading:l,isAuthenticated:!!r,login,register,logout,updateUser:e=>{if(r){let t={...r,...e};i(t),localStorage.setItem("dhyey_user",JSON.stringify(t))}},checkTokenValidity},children:t})}function useAuth(){let e=(0,s.useContext)(o);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function withAuth(e){return function(t){let{isAuthenticated:r,isLoading:s}=useAuth();return s?(0,a.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):r?(0,a.jsx)(e,{...t}):(window.location.href="/auth/login",null)}}},8494:function(e,t,r){"use strict";r.d(t,{OF:function(){return i},Sb:function(){return l},TV:function(){return n},fh:function(){return o},kv:function(){return s}});let a="https://api.dhyey.delpat.in/api/v1",apiRequest=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=localStorage.getItem("dhyey_token"),s=localStorage.getItem("dhyey_token_expiry");if(r&&s&&new Date().getTime()>parseInt(s))throw console.log("Token expired, clearing session"),localStorage.removeItem("dhyey_user"),localStorage.removeItem("dhyey_token"),localStorage.removeItem("dhyey_token_expiry"),localStorage.removeItem("dhyey_remember_me"),window.location.pathname.includes("/auth/")||(window.location.href="/auth/login"),Error("Session expired. Please log in again.");let n={...t,headers:{"Content-Type":"application/json",...r&&{Authorization:"Bearer ".concat(r)},...t.headers},...r&&{credentials:"include"}},o=await fetch("".concat(a).concat(e),n);if(401===o.status){if(e.includes("/auth/update-password")||e.includes("/auth/change-password")){let e=await o.json().catch(()=>({}));throw Error(e.message||"Current password is incorrect")}throw console.log("Unauthorized request, clearing session"),localStorage.removeItem("dhyey_user"),localStorage.removeItem("dhyey_token"),localStorage.removeItem("dhyey_token_expiry"),localStorage.removeItem("dhyey_remember_me"),window.location.pathname.includes("/auth/")||(window.location.href="/auth/login"),Error("Session expired. Please log in again.")}if(!o.ok){let e=await o.json().catch(()=>({}));throw Error(e.message||"HTTP error! status: ".concat(o.status))}return o.json()},s={login:(e,t)=>fetch("".concat(a,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(async e=>{if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.message||"HTTP error! status: ".concat(e.status))}return e.json()}),register:e=>fetch("".concat(a,"/auth/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(async e=>{let t=await e.json();if(!e.ok)throw Error(t.message||"HTTP error! status: ".concat(e.status));return t}),forgotPassword:e=>apiRequest("/auth/forgot-password",{method:"POST",body:JSON.stringify({email:e})}),resetPassword:(e,t,r)=>apiRequest("/auth/reset-password/".concat(e),{method:"PATCH",body:JSON.stringify({password:t,passwordConfirm:r})}),updatePassword:(e,t,r)=>apiRequest("/auth/update-password",{method:"PATCH",body:JSON.stringify({passwordCurrent:e,password:t,passwordConfirm:r})}),changePassword:(e,t,r)=>apiRequest("/auth/change-password",{method:"PATCH",body:JSON.stringify({passwordCurrent:e,password:t,passwordConfirm:r})}),logout:()=>apiRequest("/auth/logout",{method:"POST"}),refreshToken:()=>apiRequest("/auth/refresh-token",{method:"POST"})},n={getMe:()=>apiRequest("/users/me"),updateMe:e=>apiRequest("/users/me",{method:"PATCH",body:JSON.stringify(e)}),getUserProfile:e=>apiRequest("/users/profile/".concat(e)),followUser:e=>apiRequest("/users/".concat(e,"/follow"),{method:"POST"}),getUserFollowers:e=>apiRequest("/users/".concat(e,"/followers")),getUserFollowing:e=>apiRequest("/users/".concat(e,"/following")),getUserSavedStories:e=>apiRequest("/users/".concat(e,"/saved")),getUserLikedStories:()=>apiRequest("/users/me/liked"),getAllUsers:()=>apiRequest("/users/admin/all")},o={getPublicStories:e=>apiRequest("/stories".concat(e?"?".concat(e):"")),getStoryById:e=>apiRequest("/stories/".concat(e)),createStory:e=>apiRequest("/stories",{method:"POST",body:JSON.stringify(e)}),updateStory:(e,t)=>apiRequest("/stories/".concat(e),{method:"PATCH",body:JSON.stringify(t)}),deleteStory:e=>apiRequest("/stories/".concat(e),{method:"DELETE"}),likeStory:e=>apiRequest("/stories/".concat(e,"/like"),{method:"POST"}),saveStory:e=>apiRequest("/stories/".concat(e,"/save"),{method:"POST"}),shareStory:(e,t)=>apiRequest("/stories/".concat(e,"/share"),{method:"POST",body:JSON.stringify(t||{})}),getUserStories:e=>apiRequest("/stories/user/".concat(e)),searchStories:(e,t)=>{let r=new URLSearchParams({q:e,...t});return apiRequest("/stories/search?".concat(r))},getStoryComments:e=>apiRequest("/stories/".concat(e,"/comments")),addComment:(e,t,r)=>apiRequest("/stories/".concat(e,"/comments"),{method:"POST",body:JSON.stringify({content:t,parentComment:r})}),likeComment:(e,t)=>apiRequest("/stories/".concat(e,"/comments/").concat(t,"/like"),{method:"POST"})},i={searchStories:(e,t)=>{let r=t?Object.fromEntries(Object.entries(t).filter(e=>{let[t,r]=e;return null!=r&&""!==r})):{},a=new URLSearchParams({q:e,...r});return console.log("API call URL:","/search/stories?".concat(a)),apiRequest("/search/stories?".concat(a))},searchUsers:e=>{let t=new URLSearchParams({q:e});return apiRequest("/search/users?".concat(t))},getSearchSuggestions:e=>{let t=new URLSearchParams({q:e});return apiRequest("/search/suggestions?".concat(t))},getSearchFilters:()=>apiRequest("/search/filters"),globalSearch:e=>{let t=new URLSearchParams({q:e});return apiRequest("/search/global?".concat(t))}},l={getAllStories:e=>apiRequest("/admin/stories".concat(e?"?".concat(e):"")),getStoryForReview:e=>apiRequest("/admin/stories/".concat(e)),approveStory:e=>apiRequest("/admin/stories/".concat(e,"/approve"),{method:"PATCH"}),rejectStory:(e,t)=>apiRequest("/admin/stories/".concat(e,"/reject"),{method:"PATCH",body:JSON.stringify({reason:t})}),bulkApproveStories:e=>apiRequest("/admin/stories/bulk-approve",{method:"PATCH",body:JSON.stringify({storyIds:e})}),bulkRejectStories:(e,t)=>apiRequest("/admin/stories/bulk-reject",{method:"PATCH",body:JSON.stringify({storyIds:e,reason:t})}),getAllUsers:e=>apiRequest("/users/admin/all".concat(e?"?".concat(e):"")),suspendUser:(e,t,r)=>apiRequest("/admin/users/".concat(e,"/suspend"),{method:"PATCH",body:JSON.stringify({reason:t,duration:r})}),unsuspendUser:e=>apiRequest("/admin/users/".concat(e,"/unsuspend"),{method:"PATCH"}),deleteUser:e=>apiRequest("/users/".concat(e),{method:"DELETE"}),getAllAdmins:()=>apiRequest("/admin/admins"),getAdminProfile:()=>apiRequest("/admin/profile"),updateAdminProfile:e=>apiRequest("/admin/profile",{method:"PATCH",body:JSON.stringify(e)}),getAdminSettings:()=>apiRequest("/admin/settings"),updateAdminSettings:e=>apiRequest("/admin/settings",{method:"PATCH",body:JSON.stringify(e)}),getAnalytics:()=>apiRequest("/admin/analytics"),getDashboardStats:()=>apiRequest("/admin/dashboard-stats")}},88742:function(e,t,r){"use strict";r.d(t,{Mv:function(){return shareProfile},c0:function(){return showNotification}});let showNotification=e=>{let{type:t,title:r,message:a,duration:s=3e3}=e,n=document.createElement("div");n.className="fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm transition-all duration-300 ".concat("success"===t?"bg-green-100 text-green-800 border border-green-200":"error"===t?"bg-red-100 text-red-800 border border-red-200":"warning"===t?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-blue-100 text-blue-800 border border-blue-200"),n.innerHTML='\n    <div class="flex items-start">\n      <div class="flex-1">\n        <div class="font-medium">'.concat(r,"</div>\n        ").concat(a?'<div class="text-sm mt-1">'.concat(a,"</div>"):"",'\n      </div>\n      <button class="ml-2 text-gray-400 hover:text-gray-600" onclick="this.parentElement.parentElement.remove()">\n        \xd7\n      </button>\n    </div>\n  '),document.body.appendChild(n),setTimeout(()=>{n.parentElement&&n.remove()},s)},handleAsyncError=function(e){var t,r;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"An unexpected error occurred";console.error("Error:",e);let s=(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||(null==e?void 0:e.message)||a;showNotification({type:"error",title:"Error",message:s})},showSuccess=(e,t)=>{showNotification({type:"success",title:e,message:t})},shareProfile=async(e,t)=>{let r="".concat(window.location.origin,"/profile/").concat(t.username),a="Check out ".concat(t.name,"'s profile on Dhyey");try{switch(e){case"copy":await navigator.clipboard.writeText(r),showSuccess("Link Copied","Profile link copied to clipboard!");break;case"twitter":window.open("https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(a),"&url=").concat(encodeURIComponent(r)),"_blank");break;case"facebook":window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(r)),"_blank");break;case"linkedin":window.open("https://www.linkedin.com/sharing/share-offsite/?url=".concat(encodeURIComponent(r)),"_blank");break;default:throw Error("Unsupported platform")}}catch(e){handleAsyncError(e,"Failed to share profile")}}},84434:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"RouterContext",{enumerable:!0,get:function(){return n}});let a=r(32582),s=a._(r(58078)),n=s.default.createContext(null)}},function(e){e.O(0,[6895,7115,2835,1744],function(){return e(e.s=34856)}),_N_E=e.O()}]);