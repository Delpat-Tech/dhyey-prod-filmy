(()=>{var e={};e.id=2797,e.ids=[2797],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},19258:(e,t,s)=>{"use strict";s.d(t,{Z:()=>a});var r=s(8763);let a=(0,r.Z)("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]])},36646:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>h,pages:()=>d,routeModule:()=>x,tree:()=>c});var r=s(36577),a=s(55533),l=s(40443),n=s.n(l),i=s(53320),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);s.d(t,o);let c=["",{children:["search",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,19207)),"C:\\Delpath\\dhyey-prod-filmy\\frontend\\src\\app\\search\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,4199)),"C:\\Delpath\\dhyey-prod-filmy\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,31459,23)),"next/dist/client/components/not-found-error"]}],d=["C:\\Delpath\\dhyey-prod-filmy\\frontend\\src\\app\\search\\page.tsx"],h="/search/page",m={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/search/page",pathname:"/search",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},27610:(e,t,s)=>{Promise.resolve().then(s.bind(s,46224))},46224:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>SearchInterface});var r=s(22406),a=s(80404),l=s(68888),n=s(19785),i=s(19258),o=s(98097),c=s.n(o),d=s(55731),h=s.n(d),m=s(38837),x=s(31893),u=s(59315),p=s(57327),g=s(9695);let f=[{id:1,title:"The Digital Nomad's Journey",author:{name:"Alex Thompson",username:"alexwrites",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face"},excerpt:"Working from coffee shops around the world taught me more than any office ever could...",image:"https://images.unsplash.com/photo-1521737604893-d14cc237f11d?w=300&h=200&fit=crop",genre:"Non-Fiction",likes:342,comments:28,saves:89,timeAgo:"3h",hashtags:["#travel","#work","#lifestyle"]},{id:2,title:"Midnight in Tokyo",author:{name:"Yuki Tanaka",username:"yukistories",avatar:"https://images.unsplash.com/photo-1544005313-94ddf0286df2?w=40&h=40&fit=crop&crop=face"},excerpt:"The neon lights reflected off the wet streets as I walked through Shibuya, each step taking me further from my past...",image:"https://images.unsplash.com/photo-1540959733332-eab4deabeeaf?w=300&h=200&fit=crop",genre:"Fiction",likes:567,comments:45,saves:123,timeAgo:"5h",hashtags:["#tokyo","#fiction","#urban"]},{id:3,title:"The Art of Letting Go",author:{name:"Maya Patel",username:"mayapoetry",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=40&h=40&fit=crop&crop=face"},excerpt:"Like autumn leaves that dance on wind, our memories float away, leaving space for new growth...",image:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=300&h=200&fit=crop",genre:"Poetry",likes:234,comments:19,saves:67,timeAgo:"1d",hashtags:["#poetry","#healing","#growth"]}];function SearchResults({query:e,searchType:t,genre:s,sortBy:a,results:n,isLoading:i,hasSearched:o}){let d=n&&n.length>0?n:o&&n?[]:f,y=n?d:d.filter(r=>{if("All"!==s&&r.genre!==s)return!1;if(!e)return!0;let a=e.toLowerCase();switch(t){case"title":return r.title.toLowerCase().includes(a);case"author":return r.author.name.toLowerCase().includes(a)||r.author.username.toLowerCase().includes(a);case"hashtag":return r.hashtags?.some(e=>e.toLowerCase().includes(a));default:return r.title.toLowerCase().includes(a)||r.author.name.toLowerCase().includes(a)||r.hashtags?.some(e=>e.toLowerCase().includes(a))||r.excerpt?.toLowerCase().includes(a)}});return i?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-purple-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Searching..."})]}):e||"All"!==s||o?0===y.length?(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:r.jsx(l.Z,{size:32,className:"text-gray-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Results Found"}),r.jsx("p",{className:"text-gray-600",children:"Try adjusting your search terms or filters to find what you're looking for"})]}):(0,r.jsxs)("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex items-center justify-between",children:(0,r.jsxs)("p",{className:"text-sm text-gray-600",children:[y.length," result",1!==y.length?"s":""," found",e&&` for "${e}"`]})}),r.jsx("div",{className:"grid gap-4 md:gap-6",children:y.map(e=>r.jsx("div",{className:"bg-white rounded-xl border border-gray-100 overflow-hidden hover:shadow-md transition-shadow",children:(0,r.jsxs)("div",{className:"md:flex",children:[r.jsx("div",{className:"md:w-48 h-48 md:h-auto relative flex-shrink-0",children:r.jsx(h(),{href:`/story/${e._id||e.id}`,children:r.jsx(c(),{src:(0,g.Jn)(e.image),alt:e.title,fill:!0,className:"object-cover hover:scale-105 transition-transform duration-300"})})}),(0,r.jsxs)("div",{className:"flex-1 p-4 md:p-6",children:[(0,r.jsxs)("div",{className:"flex items-start justify-between mb-3",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx(h(),{href:`/profile/${e.author.username}`,children:r.jsx(c(),{src:(0,g.E$)(e.author.avatar),alt:e.author.name,width:32,height:32,className:"rounded-full"})}),(0,r.jsxs)("div",{children:[r.jsx(h(),{href:`/profile/${e.author.username}`,className:"font-medium text-gray-900 hover:text-purple-600",children:e.author.name}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-500",children:[(0,r.jsxs)("span",{children:["@",e.author.username]}),r.jsx("span",{children:"â€¢"}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx(m.Z,{size:12}),r.jsx("span",{children:e.timeAgo})]})]})]})]}),r.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:e.genre})]}),(0,r.jsxs)(h(),{href:`/story/${e._id||e.id}`,children:[r.jsx("h3",{className:"font-bold text-lg text-gray-900 mb-2 hover:text-purple-600 transition-colors",children:e.title}),r.jsx("p",{className:"text-gray-700 mb-3 line-clamp-2",children:e.excerpt})]}),e.hashtags&&e.hashtags.length>0&&r.jsx("div",{className:"flex items-center space-x-1 mb-4",children:e.hashtags.map((e,t)=>r.jsx("span",{className:"text-purple-600 text-sm hover:underline cursor-pointer",children:e},t))}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-6 text-sm text-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx(x.Z,{size:16}),r.jsx("span",{children:e.likes})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx(u.Z,{size:16}),r.jsx("span",{children:e.comments})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-1",children:[r.jsx(p.Z,{size:16}),r.jsx("span",{children:e.saves})]})]}),r.jsx(h(),{href:`/story/${e.id}`,className:"text-purple-600 hover:text-purple-700 font-medium text-sm",children:"Read More"})]})]})]})},e._id||e.id))}),r.jsx("div",{className:"text-center py-8",children:r.jsx("button",{className:"bg-gradient-to-r from-purple-500 to-pink-500 text-white px-8 py-3 rounded-full font-medium hover:from-purple-600 hover:to-pink-600 transition-all",children:"Load More Results"})})]}):(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("div",{className:"w-24 h-24 mx-auto mb-4 bg-gray-100 rounded-full flex items-center justify-center",children:r.jsx(l.Z,{size:32,className:"text-gray-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Start Your Discovery"}),r.jsx("p",{className:"text-gray-600",children:"Search for stories, authors, or hashtags to find amazing content"})]})}var y=s(34661);let j=["All","Fiction","Poetry","Romance","Mystery","Sci-Fi","Fantasy","Drama"],v=["Latest","Most Liked","Most Saved","Trending"];function SearchInterface(){let[e,t]=(0,a.useState)(""),[s,o]=(0,a.useState)("All"),[c,d]=(0,a.useState)("Latest"),[h,m]=(0,a.useState)(!1),[x,u]=(0,a.useState)("all"),[p,g]=(0,a.useState)([]),[f,b]=(0,a.useState)(!1),[N,w]=(0,a.useState)(!1),performSearch=async e=>{if(!e.trim()){g([]),w(!1);return}b(!0),w(!0);try{let t=[],r=e,a={genre:"All"!==s?s:void 0,sortBy:c.toLowerCase().replace(" ","_")};"author"===x?a.author=e:"hashtag"===x&&(r=e.startsWith("#")?e:`#${e}`),console.log("Searching with query:",r,"type:",x,"filters:",a);let l=await y.OF.searchStories(r,a);console.log("Full search response:",l),t=l.stories||[],console.log("Found",t.length,"stories:",t),g(t)}catch(e){console.error("Search failed:",e),g([])}finally{b(!1)}},handleSearch=async t=>{t.preventDefault(),performSearch(e)};return(0,a.useEffect)(()=>{let t=setTimeout(()=>{e.length>=2?(console.log("Auto-searching for:",e),performSearch(e)):0===e.length&&(g([]),w(!1))},500);return()=>clearTimeout(t)},[e,x,s,c]),(0,r.jsxs)("div",{className:"space-y-6",children:[r.jsx("form",{onSubmit:handleSearch,className:"relative",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx(l.Z,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400",size:20}),r.jsx("input",{type:"text",placeholder:"Search stories, authors, or hashtags...",value:e,onChange:e=>t(e.target.value),className:"w-full pl-12 pr-12 py-4 bg-white border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-lg text-gray-900"}),e&&r.jsx("button",{type:"button",onClick:()=>{t("")},className:"absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.jsx(n.Z,{size:20})})]})}),r.jsx("div",{className:"flex space-x-2 overflow-x-auto pb-2",children:[{key:"all",label:"All"},{key:"title",label:"Title"},{key:"author",label:"Author"},{key:"hashtag",label:"Hashtag"}].map(({key:e,label:t})=>r.jsx("button",{onClick:()=>u(e),className:`px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap transition-colors ${x===e?"bg-purple-500 text-white":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:t},e))}),(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("button",{onClick:()=>m(!h),className:"flex items-center space-x-2 px-4 py-2 bg-white border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx(i.Z,{size:16}),r.jsx("span",{className:"text-sm font-medium",children:"Filters"})]}),"All"!==s&&(0,r.jsxs)("div",{className:"flex items-center space-x-2 px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm",children:[r.jsx("span",{children:s}),r.jsx("button",{onClick:()=>o("All"),children:r.jsx(n.Z,{size:14})})]})]}),r.jsx("select",{value:c,onChange:e=>d(e.target.value),className:"px-4 py-2 bg-white border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm text-gray-900",children:v.map(e=>r.jsx("option",{value:e,children:e},e))})]}),h&&(0,r.jsxs)("div",{className:"bg-white border border-gray-200 rounded-xl p-6 space-y-4",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Filter by Genre"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:j.map(e=>r.jsx("button",{onClick:()=>o(e),className:`px-4 py-2 rounded-full text-sm font-medium transition-colors ${s===e?"bg-purple-500 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:e},e))})]}),r.jsx(SearchResults,{query:e,searchType:x,genre:s,sortBy:c,results:p,isLoading:f,hasSearched:N})]})}},19207:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>SearchPage});var r=s(31487),a=s(19894);let l=(0,a.createProxy)(String.raw`C:\Delpath\dhyey-prod-filmy\frontend\src\components\search\SearchInterface.tsx`),{__esModule:n,$$typeof:i}=l,o=l.default;function SearchPage(){return r.jsx("div",{className:"min-h-screen bg-gray-50",children:(0,r.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-6",children:[(0,r.jsxs)("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-2",children:"Discover Stories"}),r.jsx("p",{className:"text-gray-600",children:"Search by title, author, or hashtags to find your next great read"})]}),r.jsx(o,{})]})})}}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[7378,8097,4810,4907,9695],()=>__webpack_exec__(36646));module.exports=s})();