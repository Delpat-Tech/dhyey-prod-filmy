(()=>{var e={};e.id=9674,e.ids=[9674],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},18128:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});var a=t(8763);let r=(0,a.Z)("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]])},19166:(e,s,t)=>{"use strict";t.d(s,{Z:()=>r});var a=t(8763);let r=(0,a.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},16352:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>o});var a=t(36577),r=t(55533),l=t(40443),n=t.n(l),i=t(53320),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(s,d);let o=["",{children:["admin",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,48325)),"C:\\Delpath\\dhyey-prod-filmy\\frontend\\src\\app\\admin\\users\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,46191)),"C:\\Delpath\\dhyey-prod-filmy\\frontend\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,4199)),"C:\\Delpath\\dhyey-prod-filmy\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,31459,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Delpath\\dhyey-prod-filmy\\frontend\\src\\app\\admin\\users\\page.tsx"],u="/admin/users/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/users/page",pathname:"/admin/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},7358:(e,s,t)=>{Promise.resolve().then(t.bind(t,63279))},63279:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>UserManagement});var a=t(22406),r=t(80404),l=t(55731),n=t.n(l),i=t(98097),d=t.n(i),o=t(60698),c=t(21088),u=t(78775),m=t(18128),x=t(68888),h=t(33326),p=t(96084),g=t(39355);let b=(0,r.forwardRef)(({checked:e=!1,onChange:s,disabled:t=!1,size:r="md",className:l="",id:n,name:i,value:d,indeterminate:o=!1,...c},u)=>(0,a.jsxs)("div",{className:`relative inline-flex items-center ${l}`,children:[a.jsx("input",{ref:u,type:"checkbox",id:n,name:i,value:d,checked:e,onChange:e=>{s&&s(e.target.checked)},disabled:t,className:`
            ${{sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"}[r]}
            appearance-none
            border-2
            rounded-md
            cursor-pointer
            transition-all
            duration-200
            ease-in-out
            focus:outline-none
            focus:ring-2
            focus:ring-purple-500
            focus:ring-offset-2
            ${e?"bg-gradient-to-br from-purple-600 to-indigo-600 border-purple-600 shadow-sm":"bg-white border-gray-300 hover:border-purple-400"}
            ${t?"opacity-50 cursor-not-allowed":"hover:shadow-md"}
            ${o?"bg-gradient-to-br from-purple-600 to-indigo-600 border-purple-600":""}
          `,...c}),e&&!o&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:a.jsx("svg",{className:`text-white ${"sm"===r?"w-3 h-3":"md"===r?"w-4 h-4":"w-5 h-5"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),o&&a.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:a.jsx("div",{className:`bg-white rounded-sm ${"sm"===r?"w-2 h-0.5":"md"===r?"w-2.5 h-0.5":"w-3 h-0.5"}`})}),!t&&!e&&a.jsx("div",{className:"absolute inset-0 rounded-md bg-purple-50 opacity-0 hover:opacity-20 transition-opacity duration-200 pointer-events-none"})]}));b.displayName="Checkbox";var y=t(27851),v=t(34661),f=t(69283);let j={active:"bg-green-100 text-green-800",suspended:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800"};function UserManagement(){let[e,s]=(0,r.useState)(""),[t,l]=(0,r.useState)("all"),[i,w]=(0,r.useState)("all"),[N,C]=(0,r.useState)([]),[S,U]=(0,r.useState)(!1),[A,k]=(0,r.useState)(null),[P,_]=(0,r.useState)([]),[D,L]=(0,r.useState)(!0),[$,Z]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let loadUsers=async()=>{try{L(!0);let s=new URLSearchParams;"all"!==t&&s.append("status",t),"all"!==i&&s.append("role",i),e&&s.append("search",e);let a=await v.Sb.getAllUsers(s);_(a.data.users||[])}catch(e){console.error("Failed to load users:",e),_([]),(0,f.c0)({type:"error",title:"Failed to load users",message:"Please check your connection and try again."})}finally{L(!1)}};loadUsers()},[t,i,e]);let M=P.filter(s=>{let a=(s.name||"").toLowerCase().includes(e.toLowerCase())||(s.username||"").toLowerCase().includes(e.toLowerCase())||(s.email||"").toLowerCase().includes(e.toLowerCase()),r="all"===t||s.status===t,l="all"===i||s.role===i;return a&&r&&l}),handleSelectUser=e=>{C(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},handleSelectAll=()=>{C(N.length===M.length?[]:M.map(e=>e.id.toString()))},handleBulkAction=e=>{k(e),U(!0)},confirmBulkAction=async()=>{if(0!==N.length&&A){Z(!0);try{for(let e of N)"suspend"===A?await v.Sb.suspendUser(e,"Bulk suspension by admin"):"activate"===A?await v.Sb.unsuspendUser(e):"delete"===A&&await v.Sb.deleteUser(e);(0,f.c0)({type:"success",title:"Action Completed",message:`${N.length} users have been ${A}d.`});let s=new URLSearchParams;"all"!==t&&s.append("status",t),"all"!==i&&s.append("role",i),e&&s.append("search",e);let a=await v.Sb.getAllUsers(s);_(a.data.users||[])}catch(e){(0,f.c0)({type:"error",title:"Action Failed",message:`Failed to ${A} users. Please try again.`})}finally{Z(!1),U(!1),k(null),C([])}}},handleSingleUserAction=async(s,a)=>{Z(!0);try{"suspend"===a?(await v.Sb.suspendUser(s,"Suspended by admin"),(0,f.c0)({type:"success",title:"User Suspended",message:"The user has been suspended."})):"activate"===a?(await v.Sb.unsuspendUser(s),(0,f.c0)({type:"success",title:"User Activated",message:"The user has been activated."})):"delete"===a&&(await v.Sb.deleteUser(s),(0,f.c0)({type:"success",title:"User Deleted",message:"The user has been deleted."}));let r=new URLSearchParams;"all"!==t&&r.append("status",t),"all"!==i&&r.append("role",i),e&&r.append("search",e);let l=await v.Sb.getAllUsers(r);_(l.data.users||[])}catch(e){(0,f.c0)({type:"error",title:"Action Failed",message:`Failed to ${a} user. Please try again.`})}finally{Z(!1)}},formatDate=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),formatLastActive=e=>{let s=new Date,t=new Date(e),a=Math.floor((s.getTime()-t.getTime())/36e5);if(a<1)return"Just now";if(a<24)return`${a}h ago`;let r=Math.floor(a/24);return r<7?`${r}d ago`:formatDate(e)};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),a.jsx("p",{className:"text-gray-600",children:"Manage platform users and their permissions"})]}),a.jsx("div",{className:"mt-4 sm:mt-0",children:(0,a.jsxs)(n(),{href:"/admin/admins",className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 text-white rounded-lg text-sm font-medium hover:bg-purple-700",children:[a.jsx(o.Z,{size:16}),a.jsx("span",{children:"Manage Admins"})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900",children:P.length})]}),a.jsx(c.Z,{className:"h-8 w-8 text-blue-600"})]})}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900",children:P.filter(e=>"active"===e.status).length})]}),a.jsx(u.Z,{className:"h-8 w-8 text-green-600"})]})}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Suspended"}),a.jsx("p",{className:"text-3xl font-bold text-gray-900",children:P.filter(e=>"suspended"===e.status).length})]}),a.jsx(m.Z,{className:"h-8 w-8 text-red-600"})]})})]}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),a.jsx("input",{type:"text",placeholder:"Search users...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 bg-white"})]}),a.jsx(y.Z,{value:t,onChange:e=>l(e),options:[{label:"All Status",value:"all"},{label:"Active",value:"active",emoji:"✅"},{label:"Suspended",value:"suspended",emoji:"⛔"}]}),a.jsx(y.Z,{value:i,onChange:e=>w(e),options:[{label:"All Roles",value:"all"},{label:"User",value:"user",emoji:"\uD83D\uDC64"},{label:"Admin",value:"admin",emoji:"\uD83D\uDC51"}]})]})}),N.length>0&&a.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{className:"text-sm font-medium text-blue-900",children:[N.length," user(s) selected"]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:()=>handleBulkAction("activate"),className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:"Activate"}),a.jsx("button",{onClick:()=>handleBulkAction("suspend"),className:"px-3 py-1 bg-yellow-600 text-white rounded text-sm hover:bg-yellow-700",children:"Suspend"}),a.jsx("button",{onClick:()=>handleBulkAction("delete"),className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Delete"}),a.jsx("button",{onClick:()=>C([]),className:"px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:"Clear"})]})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[a.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center",children:[a.jsx(b,{checked:N.length===M.length&&M.length>0,onChange:()=>handleSelectAll(),size:"md",className:"mr-3"}),(0,a.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["Users (",M.length,")"]})]})}),a.jsx("div",{className:"divide-y divide-gray-200",children:M.map(e=>a.jsx("div",{className:"p-6 hover:bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[a.jsx(b,{checked:N.includes(e.id),onChange:()=>handleSelectUser(e.id),size:"md"}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 flex-1",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(d(),{src:e.avatar,alt:e.name,width:48,height:48,className:"rounded-full"}),e.verified&&a.jsx(u.Z,{className:"absolute -bottom-1 -right-1 h-4 w-4 text-blue-500 bg-white rounded-full"})]}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[a.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${j[e.status]||j.active}`,children:e.status}),e.reportCount>0&&(0,a.jsxs)("span",{className:"px-2 py-1 bg-red-100 text-red-600 rounded text-xs font-medium",children:[e.reportCount," report(s)"]})]}),(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["@",e.username," • ",e.email]}),(0,a.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:[e.location," • Joined ",formatDate(e.joinDate)]})]}),(0,a.jsxs)("div",{className:"hidden md:flex items-center space-x-6 text-sm text-gray-500",children:[(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"font-medium text-gray-900",children:e.stats?.storiesCount||e.stats?.stories||0}),a.jsx("div",{children:"Stories"})]}),(0,a.jsxs)("div",{className:"text-center",children:[a.jsx("div",{className:"font-medium text-gray-900",children:e.stats?.followersCount||e.stats?.followers||0}),a.jsx("div",{children:"Followers"})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-500",children:["Last active: ",formatLastActive(e.lastActive)]}),(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 mt-2",children:[a.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded",title:"View Profile",children:a.jsx(h.Z,{size:16})}),a.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded",title:"Send Message",children:a.jsx(p.Z,{size:16})}),"admin@dhyey.com"!==e.email&&a.jsx("button",{onClick:()=>handleSingleUserAction(e.id,"suspended"===e.status?"activate":"suspend"),className:`p-1 rounded ${"suspended"===e.status?"text-green-400 hover:text-green-600 hover:bg-green-50":"text-red-400 hover:text-red-600 hover:bg-red-50"}`,title:"suspended"===e.status?"Unsuspend User":"Suspend User",disabled:$,children:a.jsx(g.Z,{size:16})})]})]})]})]})},e.id))})]}),S&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Confirm ",A?.charAt(0).toUpperCase(),A?.slice(1)," Action"]}),(0,a.jsxs)("p",{className:"text-gray-600 mb-4",children:["Are you sure you want to ",A," ",N.length," selected user(s)? This action cannot be undone."]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>U(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,a.jsxs)("button",{onClick:confirmBulkAction,className:`px-4 py-2 rounded-lg text-white ${"delete"===A?"bg-red-600 hover:bg-red-700":"suspend"===A?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"}`,children:[A?.charAt(0).toUpperCase(),A?.slice(1)," Users"]})]})]})})]})}},48325:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>AdminUsersPage});var a=t(31487),r=t(19894);let l=(0,r.createProxy)(String.raw`C:\Delpath\dhyey-prod-filmy\frontend\src\components\admin\UserManagement.tsx`),{__esModule:n,$$typeof:i}=l,d=l.default;function AdminUsersPage(){return a.jsx(d,{})}}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[7378,8097,9804,621,866,6739,4907,9695,1510,9283,7851],()=>__webpack_exec__(16352));module.exports=t})();