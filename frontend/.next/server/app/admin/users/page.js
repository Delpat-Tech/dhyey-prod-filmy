(()=>{var e={};e.id=9674,e.ids=[9674],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},18128:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(8763);let a=(0,r.Z)("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]])},19166:(e,s,t)=>{"use strict";t.d(s,{Z:()=>a});var r=t(8763);let a=(0,r.Z)("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]])},64827:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>n.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>x,tree:()=>o});var r=t(36577),a=t(55533),l=t(40443),n=t.n(l),i=t(53320),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);t.d(s,d);let o=["",{children:["admin",{children:["users",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,48325)),"D:\\Prog\\Webdev\\react\\filmy-creators\\frontend\\src\\app\\admin\\users\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,46191)),"D:\\Prog\\Webdev\\react\\filmy-creators\\frontend\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,4199)),"D:\\Prog\\Webdev\\react\\filmy-creators\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,31459,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\Prog\\Webdev\\react\\filmy-creators\\frontend\\src\\app\\admin\\users\\page.tsx"],u="/admin/users/page",m={require:t,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/users/page",pathname:"/admin/users",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},99298:(e,s,t)=>{Promise.resolve().then(t.bind(t,63279))},63279:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>UserManagement});var r=t(22406),a=t(80404),l=t(55731),n=t.n(l),i=t(98097),d=t.n(i),o=t(60698),c=t(21088),u=t(78775),m=t(18128),x=t(68888),h=t(33326),p=t(96084),g=t(39355);let b=(0,a.forwardRef)(({checked:e=!1,onChange:s,disabled:t=!1,size:a="md",className:l="",id:n,name:i,value:d,indeterminate:o=!1,...c},u)=>(0,r.jsxs)("div",{className:`relative inline-flex items-center ${l}`,children:[r.jsx("input",{ref:u,type:"checkbox",id:n,name:i,value:d,checked:e,onChange:e=>{s&&s(e.target.checked)},disabled:t,className:`
            ${{sm:"w-4 h-4",md:"w-5 h-5",lg:"w-6 h-6"}[a]}
            appearance-none
            border-2
            rounded-md
            cursor-pointer
            transition-all
            duration-200
            ease-in-out
            focus:outline-none
            focus:ring-2
            focus:ring-purple-500
            focus:ring-offset-2
            ${e?"bg-gradient-to-br from-purple-600 to-indigo-600 border-purple-600 shadow-sm":"bg-white border-gray-300 hover:border-purple-400"}
            ${t?"opacity-50 cursor-not-allowed":"hover:shadow-md"}
            ${o?"bg-gradient-to-br from-purple-600 to-indigo-600 border-purple-600":""}
          `,...c}),e&&!o&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:r.jsx("svg",{className:`text-white ${"sm"===a?"w-3 h-3":"md"===a?"w-4 h-4":"w-5 h-5"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:3,d:"M5 13l4 4L19 7"})})}),o&&r.jsx("div",{className:"absolute inset-0 flex items-center justify-center pointer-events-none",children:r.jsx("div",{className:`bg-white rounded-sm ${"sm"===a?"w-2 h-0.5":"md"===a?"w-2.5 h-0.5":"w-3 h-0.5"}`})}),!t&&!e&&r.jsx("div",{className:"absolute inset-0 rounded-md bg-purple-50 opacity-0 hover:opacity-20 transition-opacity duration-200 pointer-events-none"})]}));b.displayName="Checkbox";var v=t(27851),y=t(34661),f=t(69283);let j={active:"bg-green-100 text-green-800",suspended:"bg-red-100 text-red-800",pending:"bg-yellow-100 text-yellow-800"};function UserManagement(){let[e,s]=(0,a.useState)(""),[t,l]=(0,a.useState)("all"),[i,w]=(0,a.useState)("all"),[N,S]=(0,a.useState)([]),[U,A]=(0,a.useState)(!1),[C,k]=(0,a.useState)(null),[P,_]=(0,a.useState)([]),[D,L]=(0,a.useState)(!0),[$,Z]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let loadUsers=async()=>{try{L(!0);let s=new URLSearchParams;"all"!==t&&s.append("status",t),"all"!==i&&s.append("role",i),e&&s.append("search",e);let r=await y.Sb.getAllUsers(s);_(r.data.users||[])}catch(e){console.error("Failed to load users:",e),_([]),(0,f.c0)({type:"error",title:"Failed to load users",message:"Please check your connection and try again."})}finally{L(!1)}};loadUsers()},[t,i,e]);let M=P.filter(s=>{let r=(s.name||"").toLowerCase().includes(e.toLowerCase())||(s.username||"").toLowerCase().includes(e.toLowerCase())||(s.email||"").toLowerCase().includes(e.toLowerCase()),a="all"===t||s.status===t,l="all"===i||s.role===i;return r&&a&&l}),handleSelectUser=e=>{S(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},handleSelectAll=()=>{S(N.length===M.length?[]:M.map(e=>e.id.toString()))},handleBulkAction=e=>{k(e),A(!0)},confirmBulkAction=async()=>{if(0!==N.length&&C){Z(!0);try{for(let e of N)"suspend"===C?await y.Sb.suspendUser(e,"Bulk suspension by admin"):"activate"===C?await y.Sb.unsuspendUser(e):"delete"===C&&await y.Sb.deleteUser(e);(0,f.c0)({type:"success",title:"Action Completed",message:`${N.length} users have been ${C}d.`});let s=new URLSearchParams;"all"!==t&&s.append("status",t),"all"!==i&&s.append("role",i),e&&s.append("search",e);let r=await y.Sb.getAllUsers(s);_(r.data.users||[])}catch(e){(0,f.c0)({type:"error",title:"Action Failed",message:`Failed to ${C} users. Please try again.`})}finally{Z(!1),A(!1),k(null),S([])}}},handleSingleUserAction=async(s,r)=>{Z(!0);try{"suspend"===r?(await y.Sb.suspendUser(s,"Suspended by admin"),(0,f.c0)({type:"success",title:"User Suspended",message:"The user has been suspended."})):"activate"===r?(await y.Sb.unsuspendUser(s),(0,f.c0)({type:"success",title:"User Activated",message:"The user has been activated."})):"delete"===r&&(await y.Sb.deleteUser(s),(0,f.c0)({type:"success",title:"User Deleted",message:"The user has been deleted."}));let a=new URLSearchParams;"all"!==t&&a.append("status",t),"all"!==i&&a.append("role",i),e&&a.append("search",e);let l=await y.Sb.getAllUsers(a);_(l.data.users||[])}catch(e){(0,f.c0)({type:"error",title:"Action Failed",message:`Failed to ${r} user. Please try again.`})}finally{Z(!1)}},formatDate=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),formatLastActive=e=>{let s=new Date,t=new Date(e),r=Math.floor((s.getTime()-t.getTime())/36e5);if(r<1)return"Just now";if(r<24)return`${r}h ago`;let a=Math.floor(r/24);return a<7?`${a}d ago`:formatDate(e)};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"User Management"}),r.jsx("p",{className:"text-gray-600",children:"Manage platform users and their permissions"})]}),r.jsx("div",{className:"mt-4 sm:mt-0",children:(0,r.jsxs)(n(),{href:"/admin/admins",className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 text-white rounded-lg text-sm font-medium hover:bg-purple-700",children:[r.jsx(o.Z,{size:16}),r.jsx("span",{children:"Manage Admins"})]})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Users"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:P.length})]}),r.jsx(c.Z,{className:"h-8 w-8 text-blue-600"})]})}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Users"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:P.filter(e=>"active"===e.status).length})]}),r.jsx(u.Z,{className:"h-8 w-8 text-green-600"})]})}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Suspended"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:P.filter(e=>"suspended"===e.status).length})]}),r.jsx(m.Z,{className:"h-8 w-8 text-red-600"})]})})]}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx(x.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),r.jsx("input",{type:"text",placeholder:"Search users...",value:e,onChange:e=>s(e.target.value),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 bg-white"})]}),r.jsx(v.Z,{value:t,onChange:e=>l(e),options:[{label:"All Status",value:"all"},{label:"Active",value:"active",emoji:"✅"},{label:"Suspended",value:"suspended",emoji:"⛔"}]}),r.jsx(v.Z,{value:i,onChange:e=>w(e),options:[{label:"All Roles",value:"all"},{label:"User",value:"user",emoji:"\uD83D\uDC64"},{label:"Admin",value:"admin",emoji:"\uD83D\uDC51"}]})]})}),N.length>0&&r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("span",{className:"text-sm font-medium text-blue-900",children:[N.length," user(s) selected"]}),(0,r.jsxs)("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>handleBulkAction("activate"),className:"px-3 py-1 bg-green-600 text-white rounded text-sm hover:bg-green-700",children:"Activate"}),r.jsx("button",{onClick:()=>handleBulkAction("suspend"),className:"px-3 py-1 bg-yellow-600 text-white rounded text-sm hover:bg-yellow-700",children:"Suspend"}),r.jsx("button",{onClick:()=>handleBulkAction("delete"),className:"px-3 py-1 bg-red-600 text-white rounded text-sm hover:bg-red-700",children:"Delete"}),r.jsx("button",{onClick:()=>S([]),className:"px-3 py-1 bg-gray-600 text-white rounded text-sm hover:bg-gray-700",children:"Clear"})]})]})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:(0,r.jsxs)("div",{className:"flex items-center",children:[r.jsx(b,{checked:N.length===M.length&&M.length>0,onChange:()=>handleSelectAll(),size:"md",className:"mr-3"}),(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["Users (",M.length,")"]})]})}),r.jsx("div",{className:"divide-y divide-gray-200",children:M.map(e=>r.jsx("div",{className:"p-6 hover:bg-gray-50",children:(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx(b,{checked:N.includes(e.id),onChange:()=>handleSelectUser(e.id),size:"md"}),(0,r.jsxs)("div",{className:"flex items-center space-x-4 flex-1",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx(d(),{src:e.avatar,alt:e.name,width:48,height:48,className:"rounded-full"}),e.verified&&r.jsx(u.Z,{className:"absolute -bottom-1 -right-1 h-4 w-4 text-blue-500 bg-white rounded-full"})]}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900 truncate",children:e.name}),r.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${j[e.status]||j.active}`,children:e.status}),e.reportCount>0&&(0,r.jsxs)("span",{className:"px-2 py-1 bg-red-100 text-red-600 rounded text-xs font-medium",children:[e.reportCount," report(s)"]})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["@",e.username," • ",e.email]}),(0,r.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:[e.location," • Joined ",formatDate(e.joinDate)]})]}),(0,r.jsxs)("div",{className:"hidden md:flex items-center space-x-6 text-sm text-gray-500",children:[(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"font-medium text-gray-900",children:e.stats?.storiesCount||e.stats?.stories||0}),r.jsx("div",{children:"Stories"})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"font-medium text-gray-900",children:e.stats?.followersCount||e.stats?.followers||0}),r.jsx("div",{children:"Followers"})]})]}),(0,r.jsxs)("div",{className:"text-right",children:[(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["Last active: ",formatLastActive(e.lastActive)]}),(0,r.jsxs)("div",{className:"flex items-center justify-center space-x-2 mt-2",children:[r.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded",title:"View Profile",children:r.jsx(h.Z,{size:16})}),r.jsx("button",{className:"p-1 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded",title:"Send Message",children:r.jsx(p.Z,{size:16})}),"admin@dhyey.com"!==e.email&&r.jsx("button",{onClick:()=>handleSingleUserAction(e.id,"suspended"===e.status?"activate":"suspend"),className:`p-1 rounded ${"suspended"===e.status?"text-green-400 hover:text-green-600 hover:bg-green-50":"text-red-400 hover:text-red-600 hover:bg-red-50"}`,title:"suspended"===e.status?"Unsuspend User":"Suspend User",disabled:$,children:r.jsx(g.Z,{size:16})})]})]})]})]})},e.id))})]}),U&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[(0,r.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Confirm ",C?.charAt(0).toUpperCase(),C?.slice(1)," Action"]}),(0,r.jsxs)("p",{className:"text-gray-600 mb-4",children:["Are you sure you want to ",C," ",N.length," selected user(s)? This action cannot be undone."]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[r.jsx("button",{onClick:()=>A(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),(0,r.jsxs)("button",{onClick:confirmBulkAction,className:`px-4 py-2 rounded-lg text-white ${"delete"===C?"bg-red-600 hover:bg-red-700":"suspend"===C?"bg-yellow-600 hover:bg-yellow-700":"bg-green-600 hover:bg-green-700"}`,children:[C?.charAt(0).toUpperCase(),C?.slice(1)," Users"]})]})]})})]})}},48325:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>AdminUsersPage});var r=t(31487),a=t(19894);let l=(0,a.createProxy)(String.raw`D:\Prog\Webdev\react\filmy-creators\frontend\src\components\admin\UserManagement.tsx`),{__esModule:n,$$typeof:i}=l,d=l.default;function AdminUsersPage(){return r.jsx(d,{})}}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[7378,8097,9804,621,866,6739,9930,9695,7718,9283,7851],()=>__webpack_exec__(64827));module.exports=t})();