(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9091],{87962:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(57068);let s=(0,r.Z)("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]])},39607:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(57068);let s=(0,r.Z)("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]])},16426:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(57068);let s=(0,r.Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},70383:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(57068);let s=(0,r.Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},52080:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(57068);let s=(0,r.Z)("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},23587:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(57068);let s=(0,r.Z)("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]])},37373:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(57068);let s=(0,r.Z)("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]])},55822:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(57068);let s=(0,r.Z)("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]])},71859:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(57068);let s=(0,r.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},35221:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(57068);let s=(0,r.Z)("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]])},25861:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(57068);let s=(0,r.Z)("UserCheck",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]])},60028:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(57068);let s=(0,r.Z)("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},92611:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(57068);let s=(0,r.Z)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]])},5032:function(e,t,a){"use strict";a.d(t,{Z:function(){return s}});var r=a(57068);let s=(0,r.Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},17547:function(e,t,a){Promise.resolve().then(a.bind(a,1961))},1961:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return AdminLayout}});var r=a(37821),s=a(58078),n=a(96871),i=a.n(n),o=a(46179),l=a(57068);let c=(0,l.Z)("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);var d=a(87962),u=a(23587),h=a(92611),m=a(25861),y=a(35221),g=a(39607),p=a(70383),f=a(16426),x=a(52080),v=a(8494);function AdminSidebar(e){let{isCollapsed:t,onToggle:a}=e,n=(0,o.usePathname)(),[l,k]=(0,s.useState)(0);(0,s.useEffect)(()=>{loadPendingCount()},[]);let loadPendingCount=async()=>{try{var e;let t=await v.Sb.getDashboardStats();(null===(e=t.data)||void 0===e?void 0:e.pendingReviews)&&k(t.data.pendingReviews)}catch(e){console.error("Failed to load pending count:",e)}},b=[{title:"Overview",items:[{name:"Dashboard",href:"/admin",icon:c},{name:"Analytics",href:"/admin/analytics",icon:d.Z}]},{title:"Content Management",items:[{name:"Story Reviews",href:"/admin/stories",icon:u.Z,badge:l>0?l.toString():void 0}]},{title:"User Management",items:[{name:"All Users",href:"/admin/users",icon:h.Z},{name:"Admin Users",href:"/admin/admins",icon:m.Z}]},{title:"DHEY Production",items:[{name:"Competitions",href:"/admin/competitions",icon:y.Z},{name:"Portfolio",href:"/admin/portfolio",icon:g.Z}]}];return(0,r.jsxs)("aside",{className:"hidden lg:flex lg:flex-col lg:fixed lg:inset-y-0 lg:pt-16 bg-white border-r border-gray-200 transition-all duration-300 ".concat(t?"lg:w-16":"lg:w-64"),children:[(0,r.jsx)("div",{className:"absolute -right-3 top-6 z-10",children:(0,r.jsx)("button",{onClick:a,className:"bg-white border border-gray-200 rounded-full p-1 shadow-sm hover:shadow-md transition-shadow",children:t?(0,r.jsx)(p.Z,{className:"h-4 w-4 text-gray-600"}):(0,r.jsx)(f.Z,{className:"h-4 w-4 text-gray-600"})})}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col min-h-0 overflow-y-auto",children:[(0,r.jsx)("nav",{className:"flex-1 px-4 py-6 space-y-8",children:b.map(e=>(0,r.jsxs)("div",{children:[!t&&(0,r.jsx)("h3",{className:"px-3 text-xs font-semibold text-gray-500 uppercase tracking-wider",children:e.title}),(0,r.jsx)("div",{className:"".concat(t?"":"mt-3"," space-y-1"),children:e.items.map(e=>{let a=n===e.href;return(0,r.jsxs)(i(),{href:e.href,className:"group flex items-center px-3 py-2 text-sm font-medium rounded-lg transition-colors ".concat(a?"bg-purple-100 text-purple-700 border-r-2 border-purple-500":"text-gray-700 hover:text-gray-900 hover:bg-gray-100"," ").concat(t?"justify-center":""),title:t?e.name:void 0,children:[(0,r.jsx)(e.icon,{className:"flex-shrink-0 h-5 w-5 ".concat(t?"":"-ml-1 mr-3"," ").concat(a?"text-purple-500":"text-gray-400 group-hover:text-gray-500")}),!t&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{className:"truncate",children:e.name}),e.badge&&(0,r.jsx)("span",{className:"ml-auto inline-block py-0.5 px-2 text-xs font-medium rounded-full bg-red-100 text-red-600",children:e.badge})]}),t&&e.badge&&(0,r.jsx)("span",{className:"absolute -top-1 -right-1 inline-block w-3 h-3 bg-red-500 rounded-full"})]},e.name)})})]},e.title))}),(0,r.jsx)("div",{className:"flex-shrink-0 p-4 border-t border-gray-200",children:t?(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i(),{href:"/admin/stories",className:"w-full flex items-center justify-center p-2 border border-transparent rounded-lg shadow-sm text-white bg-purple-600 hover:bg-purple-700 transition-colors",title:"Review Stories",children:(0,r.jsx)(u.Z,{className:"h-4 w-4"})}),(0,r.jsx)(i(),{href:"/",className:"w-full flex items-center justify-center p-2 border border-gray-300 rounded-lg text-gray-700 bg-white hover:bg-gray-50 transition-colors",title:"View Site",children:(0,r.jsx)(x.Z,{className:"h-4 w-4"})})]}):(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)(i(),{href:"/admin/stories",className:"w-full flex items-center justify-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-purple-600 hover:bg-purple-700 transition-colors",children:"Review Stories"}),(0,r.jsx)(i(),{href:"/",className:"w-full flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"View Site"})]})})]})]})}var k=a(45039),b=a.n(k),w=a(5032),S=a(55822),j=a(60028),N=a(71859),R=a(37373),q=a(26709),A=a(86981);function AdminHeader(){let[e,t]=(0,s.useState)(!1),[a,n]=(0,s.useState)(!1),{logout:l,user:c}=(0,q.useAuth)(),d=(0,o.useRouter)(),u={name:(null==c?void 0:c.name)||"Loading...",email:(null==c?void 0:c.email)||"Loading...",avatar:(0,A.E$)(null==c?void 0:c.avatar),role:(null==c?void 0:c.role)==="admin"?"Admin":"User"},handleLogout=async()=>{try{await l()}catch(e){console.error("Logout failed:",e),d.push("/auth/login")}};return(0,r.jsx)("header",{className:"bg-white border-b border-gray-200 sticky top-0 z-50",children:(0,r.jsx)("div",{className:"px-4 sm:px-6 lg:px-8",children:(0,r.jsxs)("div",{className:"flex justify-between items-center h-16",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsx)("button",{onClick:()=>n(!a),className:"lg:hidden p-2 text-gray-600 hover:text-gray-900 hover:bg-gray-100 rounded-lg",children:a?(0,r.jsx)(w.Z,{size:20}):(0,r.jsx)(S.Z,{size:20})}),(0,r.jsxs)(i(),{href:"/admin",className:"flex items-center space-x-2",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-lg flex items-center justify-center",children:(0,r.jsx)("span",{className:"text-white font-bold text-sm",children:"FC"})}),(0,r.jsxs)("div",{className:"hidden sm:block",children:[(0,r.jsx)("span",{className:"text-xl font-bold text-gray-900",children:"Admin Panel"}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:"DHEY Productions"})]})]})]}),(0,r.jsx)("div",{className:"flex items-center space-x-3",children:(0,r.jsxs)("div",{className:"relative",children:[(0,r.jsxs)("button",{onClick:()=>t(!e),className:"flex items-center space-x-2 p-1 hover:bg-gray-100 rounded-lg",children:[(0,r.jsx)(b(),{src:u.avatar,alt:u.name,width:32,height:32,className:"rounded-full"}),(0,r.jsxs)("div",{className:"hidden sm:block text-left",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-gray-900",children:u.name}),(0,r.jsx)("div",{className:"text-xs text-gray-500",children:u.role})]})]}),e&&(0,r.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg z-50 min-w-max",children:[(0,r.jsxs)("div",{className:"p-3 border-b border-gray-100",children:[(0,r.jsx)("div",{className:"font-medium text-gray-900",children:u.name}),(0,r.jsx)("div",{className:"text-sm text-gray-500",children:u.email})]}),(0,r.jsxs)("div",{className:"py-1",children:[(0,r.jsxs)(i(),{href:"/admin/profile",className:"flex items-center space-x-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,r.jsx)(j.Z,{size:16}),(0,r.jsx)("span",{children:"Profile Settings"})]}),(0,r.jsxs)(i(),{href:"/admin/settings",className:"flex items-center space-x-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-100",children:[(0,r.jsx)(N.Z,{size:16}),(0,r.jsx)("span",{children:"Admin Settings"})]}),(0,r.jsx)("hr",{className:"my-1"}),(0,r.jsxs)("button",{onClick:handleLogout,className:"flex items-center space-x-2 px-4 py-2 text-sm text-red-600 hover:bg-red-50 w-full text-left",children:[(0,r.jsx)(R.Z,{size:16}),(0,r.jsx)("span",{children:"Sign Out"})]})]})]})]})})]})})})}function AdminLayout(e){let{children:t}=e,[a,n]=(0,s.useState)(!1);return(0,r.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,r.jsx)(AdminHeader,{}),(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)(AdminSidebar,{isCollapsed:a,onToggle:()=>{n(!a)}}),(0,r.jsx)("main",{className:"flex-1 p-6 transition-all duration-300 ".concat(a?"lg:ml-16":"lg:ml-64"),children:t})]})]})}},26709:function(e,t,a){"use strict";a.r(t),a.d(t,{AuthProvider:function(){return AuthProvider},useAuth:function(){return useAuth},withAuth:function(){return withAuth}});var r=a(37821),s=a(58078),n=a(8494);let i=(0,s.createContext)(void 0);function AuthProvider(e){let{children:t}=e,[a,o]=(0,s.useState)(null),[l,c]=(0,s.useState)(!0);(0,s.useEffect)(()=>{checkAuthStatus()},[]);let checkAuthStatus=async()=>{try{let e=localStorage.getItem("dhyey_user"),t=localStorage.getItem("dhyey_token"),a=localStorage.getItem("dhyey_token_expiry");if(e&&t){if(a&&new Date().getTime()>parseInt(a)){console.log("Token expired, logging out"),logout();return}o(JSON.parse(e)),validateTokenInBackground(t)}}catch(e){console.error("Auth check failed:",e),logout()}finally{c(!1)}},validateTokenInBackground=async e=>{try{let t=await fetch("".concat("https://api.dhyey.delpat.in/api/v1","/users/me"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},credentials:"include"});t.ok||(console.log("Token validation failed, logging out"),logout())}catch(e){console.error("Background token validation failed:",e)}},checkTokenValidity=async()=>{try{let e=localStorage.getItem("dhyey_token");if(!e)return!1;let t=await fetch("".concat("https://api.dhyey.delpat.in/api/v1","/users/me"),{headers:{Authorization:"Bearer ".concat(e),"Content-Type":"application/json"},credentials:"include"});return t.ok}catch(e){return console.error("Token validation failed:",e),!1}},login=async function(e,t){let a=arguments.length>2&&void 0!==arguments[2]&&arguments[2];c(!0);try{let r=await n.kv.login(e,t),s={id:r.data.user._id,name:r.data.user.name,username:r.data.user.username,email:r.data.user.email,avatar:r.data.user.avatar,role:r.data.user.role||"user"},i=a?new Date().getTime()+2592e6:new Date().getTime()+864e5;localStorage.setItem("dhyey_user",JSON.stringify(s)),localStorage.setItem("dhyey_token",r.token),localStorage.setItem("dhyey_token_expiry",i.toString()),localStorage.setItem("dhyey_remember_me",a.toString()),o(s)}catch(e){if(e.message&&e.message.includes("suspended"))throw Error("Your account has been suspended. Please contact administration for further details.");throw e}finally{c(!1)}},register=async e=>{c(!0);try{let t=await n.kv.register(e),a={id:t.data.user._id,name:t.data.user.name,username:t.data.user.username,email:t.data.user.email,avatar:t.data.user.avatar,role:t.data.user.role||"user"};localStorage.setItem("dhyey_user",JSON.stringify(a)),localStorage.setItem("dhyey_token",t.token),o(a)}finally{c(!1)}},logout=async()=>{try{await n.kv.logout()}catch(e){console.error("Backend logout failed:",e)}localStorage.removeItem("dhyey_user"),localStorage.removeItem("dhyey_token"),localStorage.removeItem("dhyey_token_expiry"),localStorage.removeItem("dhyey_remember_me"),o(null),window.location.href="/auth/login"};return(0,r.jsx)(i.Provider,{value:{user:a,isLoading:l,isAuthenticated:!!a,login,register,logout,updateUser:e=>{if(a){let t={...a,...e};o(t),localStorage.setItem("dhyey_user",JSON.stringify(t))}},checkTokenValidity},children:t})}function useAuth(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}function withAuth(e){return function(t){let{isAuthenticated:a,isLoading:s}=useAuth();return s?(0,r.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):a?(0,r.jsx)(e,{...t}):(window.location.href="/auth/login",null)}}},8494:function(e,t,a){"use strict";a.d(t,{OF:function(){return o},Sb:function(){return l},TV:function(){return n},fh:function(){return i},kv:function(){return s}});let r="https://api.dhyey.delpat.in/api/v1",apiRequest=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=localStorage.getItem("dhyey_token"),s=localStorage.getItem("dhyey_token_expiry");if(a&&s&&new Date().getTime()>parseInt(s))throw console.log("Token expired, clearing session"),localStorage.removeItem("dhyey_user"),localStorage.removeItem("dhyey_token"),localStorage.removeItem("dhyey_token_expiry"),localStorage.removeItem("dhyey_remember_me"),window.location.pathname.includes("/auth/")||(window.location.href="/auth/login"),Error("Session expired. Please log in again.");let n={...t,headers:{"Content-Type":"application/json",...a&&{Authorization:"Bearer ".concat(a)},...t.headers},...a&&{credentials:"include"}},i=await fetch("".concat(r).concat(e),n);if(401===i.status){if(e.includes("/auth/update-password")||e.includes("/auth/change-password")){let e=await i.json().catch(()=>({}));throw Error(e.message||"Current password is incorrect")}throw console.log("Unauthorized request, clearing session"),localStorage.removeItem("dhyey_user"),localStorage.removeItem("dhyey_token"),localStorage.removeItem("dhyey_token_expiry"),localStorage.removeItem("dhyey_remember_me"),window.location.pathname.includes("/auth/")||(window.location.href="/auth/login"),Error("Session expired. Please log in again.")}if(!i.ok){let e=await i.json().catch(()=>({}));throw Error(e.message||"HTTP error! status: ".concat(i.status))}return i.json()},s={login:(e,t)=>fetch("".concat(r,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(async e=>{if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.message||"HTTP error! status: ".concat(e.status))}return e.json()}),register:e=>fetch("".concat(r,"/auth/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(async e=>{let t=await e.json();if(!e.ok)throw Error(t.message||"HTTP error! status: ".concat(e.status));return t}),forgotPassword:e=>apiRequest("/auth/forgot-password",{method:"POST",body:JSON.stringify({email:e})}),resetPassword:(e,t,a)=>apiRequest("/auth/reset-password/".concat(e),{method:"PATCH",body:JSON.stringify({password:t,passwordConfirm:a})}),updatePassword:(e,t,a)=>apiRequest("/auth/update-password",{method:"PATCH",body:JSON.stringify({passwordCurrent:e,password:t,passwordConfirm:a})}),changePassword:(e,t,a)=>apiRequest("/auth/change-password",{method:"PATCH",body:JSON.stringify({passwordCurrent:e,password:t,passwordConfirm:a})}),logout:()=>apiRequest("/auth/logout",{method:"POST"}),refreshToken:()=>apiRequest("/auth/refresh-token",{method:"POST"})},n={getMe:()=>apiRequest("/users/me"),updateMe:e=>apiRequest("/users/me",{method:"PATCH",body:JSON.stringify(e)}),getUserProfile:e=>apiRequest("/users/profile/".concat(e)),followUser:e=>apiRequest("/users/".concat(e,"/follow"),{method:"POST"}),getUserFollowers:e=>apiRequest("/users/".concat(e,"/followers")),getUserFollowing:e=>apiRequest("/users/".concat(e,"/following")),getUserSavedStories:e=>apiRequest("/users/".concat(e,"/saved")),getUserLikedStories:()=>apiRequest("/users/me/liked"),getAllUsers:()=>apiRequest("/users/admin/all")},i={getPublicStories:e=>apiRequest("/stories".concat(e?"?".concat(e):"")),getStoryById:e=>apiRequest("/stories/".concat(e)),createStory:e=>apiRequest("/stories",{method:"POST",body:JSON.stringify(e)}),updateStory:(e,t)=>apiRequest("/stories/".concat(e),{method:"PATCH",body:JSON.stringify(t)}),deleteStory:e=>apiRequest("/stories/".concat(e),{method:"DELETE"}),likeStory:e=>apiRequest("/stories/".concat(e,"/like"),{method:"POST"}),saveStory:e=>apiRequest("/stories/".concat(e,"/save"),{method:"POST"}),shareStory:(e,t)=>apiRequest("/stories/".concat(e,"/share"),{method:"POST",body:JSON.stringify(t||{})}),getUserStories:e=>apiRequest("/stories/user/".concat(e)),searchStories:(e,t)=>{let a=new URLSearchParams({q:e,...t});return apiRequest("/stories/search?".concat(a))},getStoryComments:e=>apiRequest("/stories/".concat(e,"/comments")),addComment:(e,t,a)=>apiRequest("/stories/".concat(e,"/comments"),{method:"POST",body:JSON.stringify({content:t,parentComment:a})}),likeComment:(e,t)=>apiRequest("/stories/".concat(e,"/comments/").concat(t,"/like"),{method:"POST"})},o={searchStories:(e,t)=>{let a=t?Object.fromEntries(Object.entries(t).filter(e=>{let[t,a]=e;return null!=a&&""!==a})):{},r=new URLSearchParams({q:e,...a});return console.log("API call URL:","/search/stories?".concat(r)),apiRequest("/search/stories?".concat(r))},searchUsers:e=>{let t=new URLSearchParams({q:e});return apiRequest("/search/users?".concat(t))},getSearchSuggestions:e=>{let t=new URLSearchParams({q:e});return apiRequest("/search/suggestions?".concat(t))},getSearchFilters:()=>apiRequest("/search/filters"),globalSearch:e=>{let t=new URLSearchParams({q:e});return apiRequest("/search/global?".concat(t))}},l={getAllStories:e=>apiRequest("/admin/stories".concat(e?"?".concat(e):"")),getStoryForReview:e=>apiRequest("/admin/stories/".concat(e)),approveStory:e=>apiRequest("/admin/stories/".concat(e,"/approve"),{method:"PATCH"}),rejectStory:(e,t)=>apiRequest("/admin/stories/".concat(e,"/reject"),{method:"PATCH",body:JSON.stringify({reason:t})}),bulkApproveStories:e=>apiRequest("/admin/stories/bulk-approve",{method:"PATCH",body:JSON.stringify({storyIds:e})}),bulkRejectStories:(e,t)=>apiRequest("/admin/stories/bulk-reject",{method:"PATCH",body:JSON.stringify({storyIds:e,reason:t})}),getAllUsers:e=>apiRequest("/users/admin/all".concat(e?"?".concat(e):"")),suspendUser:(e,t,a)=>apiRequest("/admin/users/".concat(e,"/suspend"),{method:"PATCH",body:JSON.stringify({reason:t,duration:a})}),unsuspendUser:e=>apiRequest("/admin/users/".concat(e,"/unsuspend"),{method:"PATCH"}),deleteUser:e=>apiRequest("/users/".concat(e),{method:"DELETE"}),getAllAdmins:()=>apiRequest("/admin/admins"),getAdminProfile:()=>apiRequest("/admin/profile"),updateAdminProfile:e=>apiRequest("/admin/profile",{method:"PATCH",body:JSON.stringify(e)}),getAdminSettings:()=>apiRequest("/admin/settings"),updateAdminSettings:e=>apiRequest("/admin/settings",{method:"PATCH",body:JSON.stringify(e)}),getAnalytics:()=>apiRequest("/admin/analytics"),getDashboardStats:()=>apiRequest("/admin/dashboard-stats")}},86981:function(e,t,a){"use strict";a.d(t,{E$:function(){return getAvatarUrl},Jn:function(){return getImageUrl}});let getImageUrl=(e,t)=>{if(!e)return t||"https://ui-avatars.com/api/?name=User&background=6366f1&color=fff&size=150";if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("blob:"))return e;let a=e.startsWith("/")?e:"/".concat(e);return"".concat("https://api.dhyey.delpat.in/api/v1").concat(a)},getAvatarUrl=e=>getImageUrl(e,"https://ui-avatars.com/api/?name=User&background=6366f1&color=fff&size=150")},96871:function(e,t,a){e.exports=a(92054)},46179:function(e,t,a){e.exports=a(85353)}},function(e){e.O(0,[2054,6895,7115,2835,1744],function(){return e(e.s=17547)}),_N_E=e.O()}]);