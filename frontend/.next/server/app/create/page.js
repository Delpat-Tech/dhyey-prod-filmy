(()=>{var e={};e.id=1572,e.ids=[1572],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},13430:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>p,originalPathname:()=>u,pages:()=>c,routeModule:()=>m,tree:()=>d});var a=r(36577),s=r(55533),l=r(40443),n=r.n(l),i=r(53320),o={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>i[e]);r.d(t,o);let d=["",{children:["create",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,61302)),"C:\\Delpath\\dhyey-prod-filmy\\frontend\\src\\app\\create\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,4199)),"C:\\Delpath\\dhyey-prod-filmy\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,31459,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Delpath\\dhyey-prod-filmy\\frontend\\src\\app\\create\\page.tsx"],u="/create/page",p={require:r,loadChunk:()=>Promise.resolve()},m=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/create/page",pathname:"/create",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},8859:(e,t,r)=>{Promise.resolve().then(r.bind(r,79926))},79926:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>CreatePage});var a=r(22406),s=r(80404),l=r(19785),n=r(14796),i=r(62033),o=r(27851),d=r(98097),c=r.n(d),u=r(34661),p=r(69283);let m=["Fiction","Poetry","Romance","Mystery","Sci-Fi","Fantasy","Drama","Non-Fiction"];function CreateStoryForm(){let[e,t]=(0,s.useState)({title:"",content:"",genres:[],hashtags:"",featuredImage:null}),[r,d]=(0,s.useState)(null),[x,h]=(0,s.useState)(!1),[g,y]=(0,s.useState)("unsaved"),handleInputChange=e=>{let{name:r,value:a}=e.target;t(e=>({...e,[r]:a})),y("unsaved")},handleSubmit=async r=>{r.preventDefault(),h(!0);try{let r={title:e.title,content:e.content,genre:e.genres[0]||"Fiction",hashtags:e.hashtags.split(" ").filter(e=>e.trim()),status:"pending"};await u.fh.createStory(r),(0,p.c0)({type:"success",title:"Story Submitted for Review!",message:"Your story has been submitted and is pending admin approval. You will be notified once it is reviewed."}),t({title:"",content:"",genres:[],hashtags:"",featuredImage:null}),d(null)}catch(e){(0,p.c0)({type:"error",title:"Failed to Create Story",message:e.message||"Something went wrong. Please try again."})}finally{h(!1)}};return a.jsx("div",{className:"bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden backdrop-blur-sm",children:(0,a.jsxs)("form",{onSubmit:handleSubmit,className:"p-8 space-y-6",children:[(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:"Story Title *"}),a.jsx("input",{type:"text",id:"title",name:"title",value:e.title,onChange:handleInputChange,placeholder:"Enter your story title...",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 text-base transition-all duration-200 text-gray-900 bg-white placeholder:text-gray-500",required:!0})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-2 gap-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"genres",className:"block text-sm font-medium text-gray-700 mb-2",children:["Genres * ",a.jsx("span",{className:"text-sm font-normal text-gray-500",children:"(Select multiple)"})]}),a.jsx(o.Z,{mode:"multiple",value:e.genres,onChange:r=>{let a=r.map(e=>`#${e.toLowerCase().replace(/[^a-z0-9]/g,"")}`).join(" "),s=e.hashtags.split(" ").filter(e=>e.trim()&&!m.some(t=>e.toLowerCase()===`#${t.toLowerCase().replace(/[^a-z0-9]/g,"")}`)).join(" "),l=[s,a].filter(e=>e.trim()).join(" ");t(e=>({...e,genres:r,hashtags:l})),y("unsaved")},placeholder:"Select genres for your story",options:m.map(e=>({label:e,value:e,emoji:"Fiction"===e?"\uD83D\uDCDA":"Poetry"===e?"\uD83C\uDFAD":"Romance"===e?"\uD83D\uDC95":"Mystery"===e?"\uD83D\uDD0D":"Sci-Fi"===e?"\uD83D\uDE80":"Fantasy"===e?"\uD83E\uDDD9‍♂️":"Drama"===e?"\uD83C\uDFAC":"Non-Fiction"===e?"\uD83D\uDCD6":"\uD83D\uDCDD"})),className:"w-full"}),e.genres.length>0&&(0,a.jsxs)("div",{className:"mt-2",children:[a.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Selected genres:"}),a.jsx("div",{className:"flex flex-wrap gap-1",children:e.genres.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-purple-100 text-purple-700",children:[m.find(t=>t===e)&&a.jsx("span",{className:"mr-1",children:"Fiction"===e?"\uD83D\uDCDA":"Poetry"===e?"\uD83C\uDFAD":"Romance"===e?"\uD83D\uDC95":"Mystery"===e?"\uD83D\uDD0D":"Sci-Fi"===e?"\uD83D\uDE80":"Fantasy"===e?"\uD83E\uDDD9‍♂️":"Drama"===e?"\uD83C\uDFAC":"Non-Fiction"===e?"\uD83D\uDCD6":"\uD83D\uDCDD"}),e]},e))})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"hashtags",className:"block text-sm font-medium text-gray-700 mb-2",children:"Hashtags"}),a.jsx("input",{type:"text",id:"hashtags",name:"hashtags",value:e.hashtags,onChange:handleInputChange,placeholder:"#fiction #love #mystery",className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 transition-all duration-200 text-base text-gray-900 bg-white placeholder:text-gray-500"}),(0,a.jsxs)("div",{className:"mt-1",children:[a.jsx("p",{className:"text-xs text-gray-500",children:"Separate hashtags with spaces • Genre hashtags are added automatically"}),e.genres.length>0&&(0,a.jsxs)("div",{className:"mt-1 flex flex-wrap gap-1",children:[a.jsx("span",{className:"text-xs text-purple-600",children:"Auto-generated:"}),e.genres.map(e=>(0,a.jsxs)("span",{className:"inline-flex items-center px-1.5 py-0.5 rounded text-xs bg-purple-50 text-purple-600 border border-purple-200",children:["#",e.toLowerCase().replace(/[^a-z0-9]/g,"")]},e))]})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Featured Image"}),r?(0,a.jsxs)("div",{className:"relative",children:[a.jsx("div",{className:"relative h-48 md:h-64 rounded-lg overflow-hidden",children:a.jsx(c(),{src:r,alt:"Featured image preview",fill:!0,className:"object-cover"})}),a.jsx("button",{type:"button",onClick:()=>{t(e=>({...e,featuredImage:null})),d(null)},className:"absolute top-2 right-2 bg-red-500 text-white rounded-full p-1 hover:bg-red-600 transition-colors",children:a.jsx(l.Z,{size:16})})]}):(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-purple-400 transition-colors",children:[a.jsx("input",{type:"file",id:"featuredImage",accept:"image/*",onChange:e=>{let r=e.target.files?.[0];if(r){t(e=>({...e,featuredImage:r}));let e=new FileReader;e.onload=e=>{d(e.target?.result)},e.readAsDataURL(r)}},className:"hidden"}),(0,a.jsxs)("label",{htmlFor:"featuredImage",className:"cursor-pointer",children:[a.jsx(n.Z,{className:"mx-auto h-12 w-12 text-gray-400 mb-4"}),a.jsx("p",{className:"text-gray-600 mb-2",children:"Click to upload featured image"}),a.jsx("p",{className:"text-sm text-gray-500",children:"PNG, JPG, GIF up to 10MB"})]})]})]}),(0,a.jsxs)("div",{children:[a.jsx("label",{htmlFor:"content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Story *"}),a.jsx("textarea",{id:"content",name:"content",value:e.content,onChange:handleInputChange,placeholder:"Start writing your story here...",rows:12,className:"w-full px-4 py-3 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-purple-500 resize-none transition-all duration-200 text-gray-900 bg-white",required:!0}),(0,a.jsxs)("div",{className:"flex justify-between items-center mt-2",children:[(0,a.jsxs)("p",{className:"text-sm text-gray-500",children:[e.content.length," characters"]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("span",{className:`text-xs px-2 py-1 rounded-full ${"saved"===g?"bg-green-100 text-green-700":"saving"===g?"bg-yellow-100 text-yellow-700":"bg-gray-100 text-gray-600"}`,children:"saved"===g?"Saved":"saving"===g?"Saving...":"Unsaved changes"})})]})]}),a.jsx("div",{className:"flex flex-col sm:flex-row gap-3 pt-6 border-t border-gray-200",children:(0,a.jsxs)("button",{type:"submit",disabled:x||!e.title||!e.content||0===e.genres.length,className:"flex items-center justify-center space-x-2 px-6 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white rounded-xl hover:from-purple-700 hover:to-indigo-700 hover:shadow-lg transform hover:scale-[1.02] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex-1",children:[a.jsx(i.Z,{size:16}),a.jsx("span",{children:x?"Submitting...":"Submit for Review"})]})}),(0,a.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[a.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Submission Guidelines"}),(0,a.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1",children:[a.jsx("li",{children:"• You can select multiple genres to better categorize your story"}),a.jsx("li",{children:"• Genre hashtags are automatically added to help with discoverability"}),a.jsx("li",{children:"• Stories will be reviewed by our team before publication"}),a.jsx("li",{children:"• Please ensure your content is original and appropriate"}),a.jsx("li",{children:"• You'll receive an email notification once your story is reviewed"}),a.jsx("li",{children:"• Approved stories will be published and visible to all users"})]})]})]})})}var x=r(33466);function CreatePage(){let{isAuthenticated:e,isLoading:t,checkTokenValidity:r}=(0,x.useAuth)();return((0,s.useEffect)(()=>{let verifyAuth=async()=>{if(!t&&e){let e=await r();e||(window.location.href="/auth/login")}};verifyAuth()},[e,t,r]),t)?a.jsx("div",{className:"min-h-screen flex items-center justify-center",children:a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):e?a.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-white",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"mb-8 text-center",children:[a.jsx("h1",{className:"text-3xl md:text-4xl font-bold bg-gradient-to-r from-purple-500 via-indigo-500 to-purple-700 bg-clip-text text-transparent mb-3",children:"Create Your Story"}),a.jsx("p",{className:"text-gray-600 text-lg",children:"Create and publish your story for the world to read"})]}),a.jsx(CreateStoryForm,{})]})}):null}},61302:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>n,__esModule:()=>l,default:()=>o});var a=r(19894);let s=(0,a.createProxy)(String.raw`C:\Delpath\dhyey-prod-filmy\frontend\src\app\create\page.tsx`),{__esModule:l,$$typeof:n}=s,i=s.default,o=i}};var t=require("../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),r=t.X(0,[7378,8097,3354,6429,9283,7851],()=>__webpack_exec__(13430));module.exports=r})();