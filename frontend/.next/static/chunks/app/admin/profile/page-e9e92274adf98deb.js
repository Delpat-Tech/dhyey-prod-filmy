(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9374],{63284:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(57068);let r=(0,a.Z)("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]])},71859:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(57068);let r=(0,a.Z)("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]])},71607:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(57068);let r=(0,a.Z)("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10",key:"1irkt0"}]])},13473:function(e,t,s){Promise.resolve().then(s.bind(s,17194))},17194:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return AdminProfilePage}});var a=s(37821),r=s(45039),i=s.n(r),n=s(96871),o=s.n(n),l=s(58078),c=s(71607),d=s(63284),m=s(71859),u=s(8494),h=s(86981);function AdminProfilePage(){var e,t,s,r;let[n,g]=(0,l.useState)(null),[p,x]=(0,l.useState)(!0);(0,l.useEffect)(()=>{fetchAdminData()},[]);let fetchAdminData=async()=>{try{let e=await u.Sb.getAdminProfile();g(e.data.user)}catch(e){console.error("Error fetching admin data:",e)}finally{x(!1)}};return p?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"px-4 py-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start md:space-x-8",children:[(0,a.jsx)("div",{className:"w-20 h-20 md:w-[150px] md:h-[150px] bg-gray-200 rounded-full animate-pulse mb-4 md:mb-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsx)("div",{className:"h-6 bg-gray-200 rounded w-48 mb-2 animate-pulse"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-32 mb-4 animate-pulse"}),(0,a.jsx)("div",{className:"h-10 bg-gray-200 rounded w-24 animate-pulse"})]})]})})})})}):n?(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"px-4 py-6",children:(0,a.jsxs)("div",{className:"flex flex-col md:flex-row md:items-start md:space-x-8",children:[(0,a.jsx)(i(),{src:(0,h.E$)(n.avatar),alt:n.name||"Admin",width:80,height:80,className:"rounded-full md:w-[150px] md:h-[150px] mb-4 md:mb-0"}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,a.jsx)("h1",{className:"text-xl md:text-2xl font-bold text-gray-900",children:n.name||"Admin User"}),(0,a.jsx)(c.Z,{className:"text-purple-600",size:20})]}),(0,a.jsxs)("p",{className:"text-gray-600 mb-3 md:mb-4",children:["@",n.username||"admin"]}),(0,a.jsxs)("div",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-purple-100 text-purple-800 mb-4",children:[(0,a.jsx)(c.Z,{size:12,className:"mr-1"}),"Administrator"]}),(0,a.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,a.jsxs)(o(),{href:"/admin/profile/edit",className:"bg-purple-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-purple-600 transition-colors flex items-center space-x-2",children:[(0,a.jsx)(d.Z,{size:16}),(0,a.jsx)("span",{children:"Edit Profile"})]}),(0,a.jsxs)(o(),{href:"/admin/settings",className:"bg-gray-100 text-gray-700 px-4 py-2 rounded-lg font-medium hover:bg-gray-200 transition-colors flex items-center space-x-2",children:[(0,a.jsx)(m.Z,{size:16}),(0,a.jsx)("span",{children:"Settings"})]})]})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg md:text-xl font-bold text-gray-900",children:(null===(e=n.stats)||void 0===e?void 0:e.storiesCount)||0}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Stories Managed"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg md:text-xl font-bold text-gray-900",children:(null===(t=n.stats)||void 0===t?void 0:t.followersCount)||0}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Users Managed"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg md:text-xl font-bold text-gray-900",children:(null===(s=n.stats)||void 0===s?void 0:s.followingCount)||0}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Reports Handled"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-lg md:text-xl font-bold text-gray-900",children:(null===(r=n.stats)||void 0===r?void 0:r.likesCount)||0}),(0,a.jsx)("div",{className:"text-sm text-gray-600",children:"Actions Taken"})]})]}),(0,a.jsxs)("div",{className:"space-y-2",children:[n.bio&&(0,a.jsx)("p",{className:"text-gray-900",children:n.bio}),n.location&&(0,a.jsxs)("p",{className:"text-gray-600",children:["\uD83D\uDCCD ",n.location]}),n.website&&(0,a.jsxs)("p",{className:"text-gray-600",children:["\uD83D\uDD17 ",(0,a.jsx)("a",{href:n.website,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:underline",children:n.website})]}),(0,a.jsxs)("p",{className:"text-gray-600",children:["\uD83D\uDEE1ï¸ Admin since ",new Date(n.createdAt||Date.now()).toLocaleDateString()]})]})]})]})})}),(0,a.jsxs)("div",{className:"bg-white mt-4 rounded-lg border border-gray-200 p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)(o(),{href:"/admin/stories",className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Manage Stories"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Review and moderate user stories"})]}),(0,a.jsxs)(o(),{href:"/admin/users",className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"Manage Users"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"View and manage user accounts"})]}),(0,a.jsxs)(o(),{href:"/admin/analytics",className:"p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-2",children:"View Analytics"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Platform statistics and insights"})]})]})]})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsx)("div",{className:"max-w-4xl mx-auto",children:(0,a.jsx)("div",{className:"bg-white border-b border-gray-200",children:(0,a.jsx)("div",{className:"px-4 py-6 text-center",children:(0,a.jsx)("p",{className:"text-gray-600",children:"Failed to load admin profile."})})})})})}},8494:function(e,t,s){"use strict";s.d(t,{OF:function(){return o},Sb:function(){return l},TV:function(){return i},fh:function(){return n},kv:function(){return r}});let a="https://api.dhyey.delpat.in/api/v1",apiRequest=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=localStorage.getItem("dhyey_token"),r=localStorage.getItem("dhyey_token_expiry");if(s&&r&&new Date().getTime()>parseInt(r))throw console.log("Token expired, clearing session"),localStorage.removeItem("dhyey_user"),localStorage.removeItem("dhyey_token"),localStorage.removeItem("dhyey_token_expiry"),localStorage.removeItem("dhyey_remember_me"),window.location.pathname.includes("/auth/")||(window.location.href="/auth/login"),Error("Session expired. Please log in again.");let i={...t,headers:{"Content-Type":"application/json",...s&&{Authorization:"Bearer ".concat(s)},...t.headers},...s&&{credentials:"include"}},n=await fetch("".concat(a).concat(e),i);if(401===n.status){if(e.includes("/auth/update-password")||e.includes("/auth/change-password")){let e=await n.json().catch(()=>({}));throw Error(e.message||"Current password is incorrect")}throw console.log("Unauthorized request, clearing session"),localStorage.removeItem("dhyey_user"),localStorage.removeItem("dhyey_token"),localStorage.removeItem("dhyey_token_expiry"),localStorage.removeItem("dhyey_remember_me"),window.location.pathname.includes("/auth/")||(window.location.href="/auth/login"),Error("Session expired. Please log in again.")}if(!n.ok){let e=await n.json().catch(()=>({}));throw Error(e.message||"HTTP error! status: ".concat(n.status))}return n.json()},r={login:(e,t)=>fetch("".concat(a,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(async e=>{if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.message||"HTTP error! status: ".concat(e.status))}return e.json()}),register:e=>fetch("".concat(a,"/auth/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(async e=>{let t=await e.json();if(!e.ok)throw Error(t.message||"HTTP error! status: ".concat(e.status));return t}),forgotPassword:e=>apiRequest("/auth/forgot-password",{method:"POST",body:JSON.stringify({email:e})}),resetPassword:(e,t,s)=>apiRequest("/auth/reset-password/".concat(e),{method:"PATCH",body:JSON.stringify({password:t,passwordConfirm:s})}),updatePassword:(e,t,s)=>apiRequest("/auth/update-password",{method:"PATCH",body:JSON.stringify({passwordCurrent:e,password:t,passwordConfirm:s})}),changePassword:(e,t,s)=>apiRequest("/auth/change-password",{method:"PATCH",body:JSON.stringify({passwordCurrent:e,password:t,passwordConfirm:s})}),logout:()=>apiRequest("/auth/logout",{method:"POST"}),refreshToken:()=>apiRequest("/auth/refresh-token",{method:"POST"})},i={getMe:()=>apiRequest("/users/me"),updateMe:e=>apiRequest("/users/me",{method:"PATCH",body:JSON.stringify(e)}),getUserProfile:e=>apiRequest("/users/profile/".concat(e)),followUser:e=>apiRequest("/users/".concat(e,"/follow"),{method:"POST"}),getUserFollowers:e=>apiRequest("/users/".concat(e,"/followers")),getUserFollowing:e=>apiRequest("/users/".concat(e,"/following")),getUserSavedStories:e=>apiRequest("/users/".concat(e,"/saved")),getUserLikedStories:()=>apiRequest("/users/me/liked"),getAllUsers:()=>apiRequest("/users/admin/all")},n={getPublicStories:e=>apiRequest("/stories".concat(e?"?".concat(e):"")),getStoryById:e=>apiRequest("/stories/".concat(e)),createStory:e=>apiRequest("/stories",{method:"POST",body:JSON.stringify(e)}),updateStory:(e,t)=>apiRequest("/stories/".concat(e),{method:"PATCH",body:JSON.stringify(t)}),deleteStory:e=>apiRequest("/stories/".concat(e),{method:"DELETE"}),likeStory:e=>apiRequest("/stories/".concat(e,"/like"),{method:"POST"}),saveStory:e=>apiRequest("/stories/".concat(e,"/save"),{method:"POST"}),shareStory:(e,t)=>apiRequest("/stories/".concat(e,"/share"),{method:"POST",body:JSON.stringify(t||{})}),getUserStories:e=>apiRequest("/stories/user/".concat(e)),searchStories:(e,t)=>{let s=new URLSearchParams({q:e,...t});return apiRequest("/stories/search?".concat(s))},getStoryComments:e=>apiRequest("/stories/".concat(e,"/comments")),addComment:(e,t,s)=>apiRequest("/stories/".concat(e,"/comments"),{method:"POST",body:JSON.stringify({content:t,parentComment:s})}),likeComment:(e,t)=>apiRequest("/stories/".concat(e,"/comments/").concat(t,"/like"),{method:"POST"})},o={searchStories:(e,t)=>{let s=t?Object.fromEntries(Object.entries(t).filter(e=>{let[t,s]=e;return null!=s&&""!==s})):{},a=new URLSearchParams({q:e,...s});return console.log("API call URL:","/search/stories?".concat(a)),apiRequest("/search/stories?".concat(a))},searchUsers:e=>{let t=new URLSearchParams({q:e});return apiRequest("/search/users?".concat(t))},getSearchSuggestions:e=>{let t=new URLSearchParams({q:e});return apiRequest("/search/suggestions?".concat(t))},getSearchFilters:()=>apiRequest("/search/filters"),globalSearch:e=>{let t=new URLSearchParams({q:e});return apiRequest("/search/global?".concat(t))}},l={getAllStories:e=>apiRequest("/admin/stories".concat(e?"?".concat(e):"")),getStoryForReview:e=>apiRequest("/admin/stories/".concat(e)),approveStory:e=>apiRequest("/admin/stories/".concat(e,"/approve"),{method:"PATCH"}),rejectStory:(e,t)=>apiRequest("/admin/stories/".concat(e,"/reject"),{method:"PATCH",body:JSON.stringify({reason:t})}),bulkApproveStories:e=>apiRequest("/admin/stories/bulk-approve",{method:"PATCH",body:JSON.stringify({storyIds:e})}),bulkRejectStories:(e,t)=>apiRequest("/admin/stories/bulk-reject",{method:"PATCH",body:JSON.stringify({storyIds:e,reason:t})}),getAllUsers:e=>apiRequest("/users/admin/all".concat(e?"?".concat(e):"")),suspendUser:(e,t,s)=>apiRequest("/admin/users/".concat(e,"/suspend"),{method:"PATCH",body:JSON.stringify({reason:t,duration:s})}),unsuspendUser:e=>apiRequest("/admin/users/".concat(e,"/unsuspend"),{method:"PATCH"}),deleteUser:e=>apiRequest("/users/".concat(e),{method:"DELETE"}),getAllAdmins:()=>apiRequest("/admin/admins"),getAdminProfile:()=>apiRequest("/admin/profile"),updateAdminProfile:e=>apiRequest("/admin/profile",{method:"PATCH",body:JSON.stringify(e)}),getAdminSettings:()=>apiRequest("/admin/settings"),updateAdminSettings:e=>apiRequest("/admin/settings",{method:"PATCH",body:JSON.stringify(e)}),getAnalytics:()=>apiRequest("/admin/analytics"),getDashboardStats:()=>apiRequest("/admin/dashboard-stats")}},86981:function(e,t,s){"use strict";s.d(t,{E$:function(){return getAvatarUrl},Jn:function(){return getImageUrl}});let getImageUrl=(e,t)=>{if(!e)return t||"https://ui-avatars.com/api/?name=User&background=6366f1&color=fff&size=150";if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith("blob:"))return e;let s=e.startsWith("/")?e:"/".concat(e);return"".concat("https://api.dhyey.delpat.in/api/v1").concat(s)},getAvatarUrl=e=>getImageUrl(e,"https://ui-avatars.com/api/?name=User&background=6366f1&color=fff&size=150")},96871:function(e,t,s){e.exports=s(92054)}},function(e){e.O(0,[2054,6895,7115,2835,1744],function(){return e(e.s=13473)}),_N_E=e.O()}]);