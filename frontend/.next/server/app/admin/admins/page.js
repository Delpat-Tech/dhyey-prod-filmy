(()=>{var e={};e.id=111,e.ids=[111],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},53631:(e,s,t)=>{"use strict";t.r(s),t.d(s,{GlobalError:()=>d.a,__next_app__:()=>x,originalPathname:()=>m,pages:()=>c,routeModule:()=>u,tree:()=>o});var r=t(36577),a=t(55533),n=t(40443),d=t.n(n),i=t(53320),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(s,l);let o=["",{children:["admin",{children:["admins",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,1685)),"D:\\Prog\\Webdev\\react\\filmy-creators\\frontend\\src\\app\\admin\\admins\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,46191)),"D:\\Prog\\Webdev\\react\\filmy-creators\\frontend\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,4199)),"D:\\Prog\\Webdev\\react\\filmy-creators\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,31459,23)),"next/dist/client/components/not-found-error"]}],c=["D:\\Prog\\Webdev\\react\\filmy-creators\\frontend\\src\\app\\admin\\admins\\page.tsx"],m="/admin/admins/page",x={require:t,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/admins/page",pathname:"/admin/admins",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},80762:(e,s,t)=>{Promise.resolve().then(t.bind(t,96064))},96064:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>AdminUsersManagementPage});var r=t(22406),a=t(33466),n=t(36460),d=t(80404),i=t(55731),l=t.n(i),o=t(98097),c=t.n(o),m=t(25653),x=t(60698),u=t(84867),p=t(78775),g=t(68888),h=t(52631),f=t(59469),j=t(96084),y=t(39355),v=t(34661);let b={super_admin:m.Z,admin:x.Z};function AdminUserList(){let{user:e}=(0,a.useAuth)(),[s,t]=(0,d.useState)([]),[n,i]=(0,d.useState)(!0),[o,N]=(0,d.useState)(""),[w,A]=(0,d.useState)(""),[_,S]=(0,d.useState)("all"),[P,D]=(0,d.useState)("all"),[L,Z]=(0,d.useState)([]),[C,U]=(0,d.useState)(!1),[q,M]=(0,d.useState)(null);(0,d.useEffect)(()=>{loadAdmins()},[]);let loadAdmins=async()=>{try{i(!0);let e=await v.Sb.getAllAdmins();t(e.data.admins)}catch(e){N(e.message||"Failed to load admin users")}finally{i(!1)}},E=s.filter(e=>{let s=e.name?.toLowerCase().includes(w.toLowerCase())||e.username?.toLowerCase().includes(w.toLowerCase())||e.email?.toLowerCase().includes(w.toLowerCase()),t="all"===_||e.role===_,r="all"===P||e.status===P;return s&&t&&r}),handleSuspendToggle=async(e,s)=>{try{"suspended"===s?await v.Sb.unsuspendUser(e):await v.Sb.suspendUser(e,"Suspended by admin"),loadAdmins()}catch(e){console.error("Failed to update user status:",e)}},formatDate=e=>new Date(e).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"}),formatLastActive=e=>{let s=new Date,t=new Date(e),r=Math.floor((s.getTime()-t.getTime())/36e5);if(r<1)return"Just now";if(r<24)return`${r}h ago`;let a=Math.floor(r/24);return a<7?`${a}d ago`:formatDate(e)},getRoleDisplayName=e=>{switch(e){case"super_admin":return"Super Admin";case"admin":return"Admin";default:return e}};return(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Admin Management"}),r.jsx("p",{className:"text-gray-600",children:"Manage admin users and their permissions"})]}),(0,r.jsxs)("div",{className:"mt-4 sm:mt-0 flex space-x-3",children:[r.jsx(l(),{href:"/admin/users",className:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50",children:"View All Users"}),(0,r.jsxs)(l(),{href:"/admin/admins/add",className:"flex items-center space-x-2 px-4 py-2 bg-purple-600 text-white rounded-lg text-sm font-medium hover:bg-purple-700",children:[r.jsx(u.Z,{size:16}),r.jsx("span",{children:"Add Admin"})]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Admins"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s.length})]}),r.jsx(x.Z,{className:"h-8 w-8 text-purple-600"})]})}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Super Admins"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s.filter(e=>"super_admin"===e.role).length})]}),r.jsx(m.Z,{className:"h-8 w-8 text-purple-600"})]})}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Admins"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:s.filter(e=>"active"===e.status).length})]}),r.jsx(p.Z,{className:"h-8 w-8 text-green-600"})]})})]}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx(g.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),r.jsx("input",{type:"text",placeholder:"Search admins...",value:w,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 placeholder-gray-500 bg-white pl-10"})]}),(0,r.jsxs)("select",{value:P,onChange:e=>D(e.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 bg-white",children:[r.jsx("option",{value:"all",children:"All Status"}),r.jsx("option",{value:"active",children:"Active"}),r.jsx("option",{value:"suspended",children:"Suspended"})]})]})}),n&&(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-12 text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading admin users..."})]}),o&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:(0,r.jsxs)("div",{className:"flex items-center space-x-3",children:[r.jsx(h.Z,{className:"h-5 w-5 text-red-600"}),r.jsx("p",{className:"text-sm text-red-800",children:o})]})}),!n&&!o&&(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:(0,r.jsxs)("span",{className:"text-sm font-medium text-gray-900",children:["Admin Users (",E.length,")"]})}),r.jsx("div",{className:"divide-y divide-gray-200",children:E.map(s=>{let t=b[s.role]||x.Z;return(0,r.jsxs)("div",{className:"p-6 hover:bg-gray-50",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"relative",children:[r.jsx(c(),{src:s.avatar||"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=48&h=48&fit=crop&crop=face",alt:s.name,width:48,height:48,className:"rounded-full"}),r.jsx("div",{className:"absolute -bottom-1 -right-1 bg-white rounded-full p-1",children:r.jsx(t,{className:"h-3 w-3 text-purple-600"})})]}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("h3",{className:"text-sm font-medium text-gray-900",children:s.name}),r.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-white text-gray-700 border border-gray-200",children:getRoleDisplayName(s.role)}),r.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-white text-gray-700 border border-gray-200",children:s.status})]}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:["@",s.username," • ",s.email]}),(0,r.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:["• Created on ",formatDate(s.createdAt)]})]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,r.jsxs)("div",{className:"text-right text-sm",children:[r.jsx("div",{className:"text-gray-900 font-medium",children:"Admin Permissions"}),(0,r.jsxs)("div",{className:"text-gray-500",children:["Last active: ",s.lastActive?formatLastActive(s.lastActive):"Never"]})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",title:"Edit Admin",children:r.jsx(f.Z,{size:16})}),r.jsx("button",{className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",title:"Send Message",children:r.jsx(j.Z,{size:16})}),"super_admin"!==s.role&&"admin@dhyey.com"!==s.email&&s._id!==e?.id&&r.jsx("button",{onClick:()=>handleSuspendToggle(s._id,s.status),className:`p-2 rounded-lg ${"suspended"===s.status?"text-green-400 hover:text-green-600 hover:bg-green-50":"text-red-400 hover:text-red-600 hover:bg-red-50"}`,title:"suspended"===s.status?"Unsuspend User":"Suspend User",children:r.jsx(y.Z,{size:16})})]})]})]}),r.jsx("div",{className:"mt-4 pl-16",children:r.jsx("div",{className:"flex flex-wrap gap-2",children:r.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 text-xs rounded",children:"Admin Access"})})})]},s._id)})}),0===E.length&&(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx(x.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No admins found"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Try adjusting your search or filter criteria."})]})]})]})}function AdminUsersManagementPage(){let{user:e,isAuthenticated:s,isLoading:t}=(0,a.useAuth)(),i=(0,n.useRouter)();return((0,d.useEffect)(()=>{t||s&&e?.role==="admin"||i.push("/auth/login")},[s,e,t,i]),t)?r.jsx("div",{className:"min-h-screen flex items-center justify-center",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-purple-600"})}):s&&e?.role==="admin"?r.jsx(AdminUserList,{}):null}},1685:(e,s,t)=>{"use strict";t.r(s),t.d(s,{$$typeof:()=>d,__esModule:()=>n,default:()=>l});var r=t(19894);let a=(0,r.createProxy)(String.raw`D:\Prog\Webdev\react\filmy-creators\frontend\src\app\admin\admins\page.tsx`),{__esModule:n,$$typeof:d}=a,i=a.default,l=i}};var s=require("../../../webpack-runtime.js");s.C(e);var __webpack_exec__=e=>s(s.s=e),t=s.X(0,[7378,8097,9804,621,866,6739,7848,9930,9695,7718],()=>__webpack_exec__(53631));module.exports=t})();