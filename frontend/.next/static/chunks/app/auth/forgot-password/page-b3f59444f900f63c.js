(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[6047],{57068:function(e,t,r){"use strict";r.d(t,{Z:function(){return createLucideIcon}});var s=r(58078),o={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};let toKebabCase=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),createLucideIcon=(e,t)=>{let r=(0,s.forwardRef)(({color:r="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:i,children:c,...l},d)=>(0,s.createElement)("svg",{ref:d,...o,width:n,height:n,stroke:r,strokeWidth:i?24*Number(a)/Number(n):a,className:`lucide lucide-${toKebabCase(e)}`,...l},[...t.map(([e,t])=>(0,s.createElement)(e,t)),...(Array.isArray(c)?c:[c])||[]]));return r.displayName=`${e}`,r}},34270:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var s=r(57068);let o=(0,s.Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},25498:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var s=r(57068);let o=(0,s.Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},19019:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var s=r(57068);let o=(0,s.Z)("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]])},6026:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var s=r(57068);let o=(0,s.Z)("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]])},7672:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var s=r(57068);let o=(0,s.Z)("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]])},60801:function(e,t,r){Promise.resolve().then(r.bind(r,58751))},58751:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return ForgotPasswordForm}});var s=r(37821),o=r(58078),n=r(96871),a=r.n(n),i=r(6026),c=r(25498),l=r(7672),d=r(34270),u=r(19019),m=r(88742),h=r(8494);function ForgotPasswordForm(){let[e,t]=(0,o.useState)(""),[r,n]=(0,o.useState)(!1),[p,g]=(0,o.useState)(!1),[f,y]=(0,o.useState)(""),validateEmail=e=>/\S+@\S+\.\S+/.test(e),handleSubmit=async t=>{if(t.preventDefault(),!e){y("Email is required");return}if(!validateEmail(e)){y("Please enter a valid email address");return}y(""),n(!0);try{await h.kv.forgotPassword(e),g(!0),(0,m.c0)({type:"success",title:"Reset Link Sent!",message:"Check your email for password reset instructions"})}catch(e){(0,m.c0)({type:"error",title:"Failed to Send Reset Link",message:e.message||"Something went wrong. Please try again."})}finally{n(!1)}};return p?(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-indigo-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-md",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-green-100 rounded-2xl mb-4",children:(0,s.jsx)(i.Z,{className:"h-8 w-8 text-green-600"})}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Check Your Email"}),(0,s.jsx)("p",{className:"text-gray-600",children:"We've sent password reset instructions to"}),(0,s.jsx)("p",{className:"text-purple-600 font-medium",children:e})]}),(0,s.jsx)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-200 p-8",children:(0,s.jsxs)("div",{className:"text-center space-y-4",children:[(0,s.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium text-blue-900 mb-2",children:"What's next?"}),(0,s.jsxs)("ul",{className:"text-sm text-blue-800 space-y-1 text-left",children:[(0,s.jsx)("li",{children:"• Check your email inbox (and spam folder)"}),(0,s.jsx)("li",{children:"• Click the reset link in the email"}),(0,s.jsx)("li",{children:"• Create a new password"}),(0,s.jsx)("li",{children:"• Sign in with your new password"})]})]}),(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsx)("button",{onClick:()=>g(!1),className:"w-full px-4 py-3 bg-gray-100 text-gray-700 font-medium rounded-xl hover:bg-gray-200 transition-colors",children:"Try Different Email"}),(0,s.jsxs)(a(),{href:"/auth/login",className:"w-full inline-flex items-center justify-center px-4 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-medium rounded-xl hover:from-purple-700 hover:to-indigo-700 transition-all duration-200",children:[(0,s.jsx)(c.Z,{className:"mr-2 h-5 w-5"}),"Back to Sign In"]})]})]})}),(0,s.jsx)("div",{className:"text-center mt-6",children:(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Didn't receive the email?"," ",(0,s.jsx)("button",{onClick:()=>g(!1),className:"text-purple-600 hover:underline font-medium",children:"Try again"})]})})]})}):(0,s.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-50 via-white to-indigo-50 flex items-center justify-center p-4",children:(0,s.jsxs)("div",{className:"w-full max-w-md",children:[(0,s.jsxs)("div",{className:"text-center mb-8",children:[(0,s.jsx)("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gradient-to-r from-purple-600 to-indigo-600 rounded-2xl mb-4",children:(0,s.jsx)("span",{className:"text-2xl font-bold text-white",children:"D"})}),(0,s.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:"Forgot Password?"}),(0,s.jsx)("p",{className:"text-gray-600",children:"No worries! Enter your email and we'll send you reset instructions."})]}),(0,s.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl border border-gray-200 p-8",children:[(0,s.jsxs)("form",{onSubmit:handleSubmit,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:"Email Address"}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:(0,s.jsx)(l.Z,{className:"h-5 w-5 text-gray-400"})}),(0,s.jsx)("input",{type:"email",id:"email",value:e,onChange:e=>{t(e.target.value),f&&y("")},placeholder:"Enter your email address",className:"w-full pl-10 pr-4 py-3 border rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all duration-200 text-gray-900 bg-white placeholder-gray-400 ".concat(f?"border-red-300":"border-gray-300")})]}),f&&(0,s.jsxs)("div",{className:"flex items-center mt-1 text-sm text-red-600",children:[(0,s.jsx)(d.Z,{className:"h-4 w-4 mr-1"}),f]})]}),(0,s.jsx)("button",{type:"submit",disabled:r,className:"w-full flex items-center justify-center px-4 py-3 bg-gradient-to-r from-purple-600 to-indigo-600 text-white font-medium rounded-xl hover:from-purple-700 hover:to-indigo-700 focus:outline-none focus:ring-2 focus:ring-purple-500 focus:ring-offset-2 transform hover:scale-[1.02] transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:transform-none",children:r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white mr-2"}),"Sending Reset Link..."]}):(0,s.jsxs)(s.Fragment,{children:["Send Reset Link",(0,s.jsx)(u.Z,{className:"ml-2 h-5 w-5"})]})})]}),(0,s.jsx)("div",{className:"mt-6 text-center",children:(0,s.jsxs)(a(),{href:"/auth/login",className:"inline-flex items-center text-purple-600 hover:text-purple-500 font-medium",children:[(0,s.jsx)(c.Z,{className:"mr-1 h-4 w-4"}),"Back to Sign In"]})})]}),(0,s.jsx)("div",{className:"text-center mt-8",children:(0,s.jsxs)("p",{className:"text-sm text-gray-500",children:["Still having trouble?"," ",(0,s.jsx)(a(),{href:"/contact",className:"text-purple-600 hover:underline",children:"Contact Support"})]})})]})})}},8494:function(e,t,r){"use strict";r.d(t,{OF:function(){return i},Sb:function(){return c},TV:function(){return n},fh:function(){return a},kv:function(){return o}});let s="https://api.dhyey.delpat.in/api/v1",apiRequest=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=localStorage.getItem("dhyey_token"),o=localStorage.getItem("dhyey_token_expiry");if(r&&o&&new Date().getTime()>parseInt(o))throw console.log("Token expired, clearing session"),localStorage.removeItem("dhyey_user"),localStorage.removeItem("dhyey_token"),localStorage.removeItem("dhyey_token_expiry"),localStorage.removeItem("dhyey_remember_me"),window.location.pathname.includes("/auth/")||(window.location.href="/auth/login"),Error("Session expired. Please log in again.");let n={...t,headers:{"Content-Type":"application/json",...r&&{Authorization:"Bearer ".concat(r)},...t.headers},...r&&{credentials:"include"}},a=await fetch("".concat(s).concat(e),n);if(401===a.status){if(e.includes("/auth/update-password")||e.includes("/auth/change-password")){let e=await a.json().catch(()=>({}));throw Error(e.message||"Current password is incorrect")}throw console.log("Unauthorized request, clearing session"),localStorage.removeItem("dhyey_user"),localStorage.removeItem("dhyey_token"),localStorage.removeItem("dhyey_token_expiry"),localStorage.removeItem("dhyey_remember_me"),window.location.pathname.includes("/auth/")||(window.location.href="/auth/login"),Error("Session expired. Please log in again.")}if(!a.ok){let e=await a.json().catch(()=>({}));throw Error(e.message||"HTTP error! status: ".concat(a.status))}return a.json()},o={login:(e,t)=>fetch("".concat(s,"/auth/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})}).then(async e=>{if(!e.ok){let t=await e.json().catch(()=>({}));throw Error(t.message||"HTTP error! status: ".concat(e.status))}return e.json()}),register:e=>fetch("".concat(s,"/auth/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(async e=>{let t=await e.json();if(!e.ok)throw Error(t.message||"HTTP error! status: ".concat(e.status));return t}),forgotPassword:e=>apiRequest("/auth/forgot-password",{method:"POST",body:JSON.stringify({email:e})}),resetPassword:(e,t,r)=>apiRequest("/auth/reset-password/".concat(e),{method:"PATCH",body:JSON.stringify({password:t,passwordConfirm:r})}),updatePassword:(e,t,r)=>apiRequest("/auth/update-password",{method:"PATCH",body:JSON.stringify({passwordCurrent:e,password:t,passwordConfirm:r})}),changePassword:(e,t,r)=>apiRequest("/auth/change-password",{method:"PATCH",body:JSON.stringify({passwordCurrent:e,password:t,passwordConfirm:r})}),logout:()=>apiRequest("/auth/logout",{method:"POST"}),refreshToken:()=>apiRequest("/auth/refresh-token",{method:"POST"})},n={getMe:()=>apiRequest("/users/me"),updateMe:e=>apiRequest("/users/me",{method:"PATCH",body:JSON.stringify(e)}),getUserProfile:e=>apiRequest("/users/profile/".concat(e)),followUser:e=>apiRequest("/users/".concat(e,"/follow"),{method:"POST"}),getUserFollowers:e=>apiRequest("/users/".concat(e,"/followers")),getUserFollowing:e=>apiRequest("/users/".concat(e,"/following")),getUserSavedStories:e=>apiRequest("/users/".concat(e,"/saved")),getUserLikedStories:()=>apiRequest("/users/me/liked"),getAllUsers:()=>apiRequest("/users/admin/all")},a={getPublicStories:e=>apiRequest("/stories".concat(e?"?".concat(e):"")),getStoryById:e=>apiRequest("/stories/".concat(e)),createStory:e=>apiRequest("/stories",{method:"POST",body:JSON.stringify(e)}),updateStory:(e,t)=>apiRequest("/stories/".concat(e),{method:"PATCH",body:JSON.stringify(t)}),deleteStory:e=>apiRequest("/stories/".concat(e),{method:"DELETE"}),likeStory:e=>apiRequest("/stories/".concat(e,"/like"),{method:"POST"}),saveStory:e=>apiRequest("/stories/".concat(e,"/save"),{method:"POST"}),shareStory:(e,t)=>apiRequest("/stories/".concat(e,"/share"),{method:"POST",body:JSON.stringify(t||{})}),getUserStories:e=>apiRequest("/stories/user/".concat(e)),searchStories:(e,t)=>{let r=new URLSearchParams({q:e,...t});return apiRequest("/stories/search?".concat(r))},getStoryComments:e=>apiRequest("/stories/".concat(e,"/comments")),addComment:(e,t,r)=>apiRequest("/stories/".concat(e,"/comments"),{method:"POST",body:JSON.stringify({content:t,parentComment:r})}),likeComment:(e,t)=>apiRequest("/stories/".concat(e,"/comments/").concat(t,"/like"),{method:"POST"})},i={searchStories:(e,t)=>{let r=t?Object.fromEntries(Object.entries(t).filter(e=>{let[t,r]=e;return null!=r&&""!==r})):{},s=new URLSearchParams({q:e,...r});return console.log("API call URL:","/search/stories?".concat(s)),apiRequest("/search/stories?".concat(s))},searchUsers:e=>{let t=new URLSearchParams({q:e});return apiRequest("/search/users?".concat(t))},getSearchSuggestions:e=>{let t=new URLSearchParams({q:e});return apiRequest("/search/suggestions?".concat(t))},getSearchFilters:()=>apiRequest("/search/filters"),globalSearch:e=>{let t=new URLSearchParams({q:e});return apiRequest("/search/global?".concat(t))}},c={getAllStories:e=>apiRequest("/admin/stories".concat(e?"?".concat(e):"")),getStoryForReview:e=>apiRequest("/admin/stories/".concat(e)),approveStory:e=>apiRequest("/admin/stories/".concat(e,"/approve"),{method:"PATCH"}),rejectStory:(e,t)=>apiRequest("/admin/stories/".concat(e,"/reject"),{method:"PATCH",body:JSON.stringify({reason:t})}),bulkApproveStories:e=>apiRequest("/admin/stories/bulk-approve",{method:"PATCH",body:JSON.stringify({storyIds:e})}),bulkRejectStories:(e,t)=>apiRequest("/admin/stories/bulk-reject",{method:"PATCH",body:JSON.stringify({storyIds:e,reason:t})}),getAllUsers:e=>apiRequest("/users/admin/all".concat(e?"?".concat(e):"")),suspendUser:(e,t,r)=>apiRequest("/admin/users/".concat(e,"/suspend"),{method:"PATCH",body:JSON.stringify({reason:t,duration:r})}),unsuspendUser:e=>apiRequest("/admin/users/".concat(e,"/unsuspend"),{method:"PATCH"}),deleteUser:e=>apiRequest("/users/".concat(e),{method:"DELETE"}),getAllAdmins:()=>apiRequest("/admin/admins"),getAdminProfile:()=>apiRequest("/admin/profile"),updateAdminProfile:e=>apiRequest("/admin/profile",{method:"PATCH",body:JSON.stringify(e)}),getAdminSettings:()=>apiRequest("/admin/settings"),updateAdminSettings:e=>apiRequest("/admin/settings",{method:"PATCH",body:JSON.stringify(e)}),getAnalytics:()=>apiRequest("/admin/analytics"),getDashboardStats:()=>apiRequest("/admin/dashboard-stats")}},88742:function(e,t,r){"use strict";r.d(t,{Mv:function(){return shareProfile},c0:function(){return showNotification}});let showNotification=e=>{let{type:t,title:r,message:s,duration:o=3e3}=e,n=document.createElement("div");n.className="fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg max-w-sm transition-all duration-300 ".concat("success"===t?"bg-green-100 text-green-800 border border-green-200":"error"===t?"bg-red-100 text-red-800 border border-red-200":"warning"===t?"bg-yellow-100 text-yellow-800 border border-yellow-200":"bg-blue-100 text-blue-800 border border-blue-200"),n.innerHTML='\n    <div class="flex items-start">\n      <div class="flex-1">\n        <div class="font-medium">'.concat(r,"</div>\n        ").concat(s?'<div class="text-sm mt-1">'.concat(s,"</div>"):"",'\n      </div>\n      <button class="ml-2 text-gray-400 hover:text-gray-600" onclick="this.parentElement.parentElement.remove()">\n        \xd7\n      </button>\n    </div>\n  '),document.body.appendChild(n),setTimeout(()=>{n.parentElement&&n.remove()},o)},handleAsyncError=function(e){var t,r;let s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"An unexpected error occurred";console.error("Error:",e);let o=(null==e?void 0:null===(r=e.response)||void 0===r?void 0:null===(t=r.data)||void 0===t?void 0:t.message)||(null==e?void 0:e.message)||s;showNotification({type:"error",title:"Error",message:o})},showSuccess=(e,t)=>{showNotification({type:"success",title:e,message:t})},shareProfile=async(e,t)=>{let r="".concat(window.location.origin,"/profile/").concat(t.username),s="Check out ".concat(t.name,"'s profile on Dhyey");try{switch(e){case"copy":await navigator.clipboard.writeText(r),showSuccess("Link Copied","Profile link copied to clipboard!");break;case"twitter":window.open("https://twitter.com/intent/tweet?text=".concat(encodeURIComponent(s),"&url=").concat(encodeURIComponent(r)),"_blank");break;case"facebook":window.open("https://www.facebook.com/sharer/sharer.php?u=".concat(encodeURIComponent(r)),"_blank");break;case"linkedin":window.open("https://www.linkedin.com/sharing/share-offsite/?url=".concat(encodeURIComponent(r)),"_blank");break;default:throw Error("Unsupported platform")}}catch(e){handleAsyncError(e,"Failed to share profile")}}},8489:function(e,t,r){"use strict";/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s=r(58078),o=Symbol.for("react.element"),n=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,i=s.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,c={key:!0,ref:!0,__self:!0,__source:!0};function q(e,t,r){var s,n={},l=null,d=null;for(s in void 0!==r&&(l=""+r),void 0!==t.key&&(l=""+t.key),void 0!==t.ref&&(d=t.ref),t)a.call(t,s)&&!c.hasOwnProperty(s)&&(n[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps)void 0===n[s]&&(n[s]=t[s]);return{$$typeof:o,type:e,key:l,ref:d,props:n,_owner:i.current}}t.Fragment=n,t.jsx=q,t.jsxs=q},37821:function(e,t,r){"use strict";e.exports=r(8489)},96871:function(e,t,r){e.exports=r(92054)}},function(e){e.O(0,[2054,7115,2835,1744],function(){return e(e.s=60801)}),_N_E=e.O()}]);