(()=>{var e={};e.id=7277,e.ids=[7277],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},71873:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>u,originalPathname:()=>m,pages:()=>c,routeModule:()=>p,tree:()=>d});var a=s(36577),r=s(55533),n=s(40443),i=s.n(n),l=s(53320),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);s.d(t,o);let d=["",{children:["admin",{children:["stories",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,35740)),"C:\\Delpath\\dhyey-prod-filmy\\frontend\\src\\app\\admin\\stories\\page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,46191)),"C:\\Delpath\\dhyey-prod-filmy\\frontend\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,4199)),"C:\\Delpath\\dhyey-prod-filmy\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,31459,23)),"next/dist/client/components/not-found-error"]}],c=["C:\\Delpath\\dhyey-prod-filmy\\frontend\\src\\app\\admin\\stories\\page.tsx"],m="/admin/stories/page",u={require:s,loadChunk:()=>Promise.resolve()},p=new a.AppPageRouteModule({definition:{kind:r.x.APP_PAGE,page:"/admin/stories/page",pathname:"/admin/stories",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},22393:(e,t,s)=>{Promise.resolve().then(s.bind(s,53892))},53892:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>StoryReviewList});var a=s(22406),r=s(80404),n=s(55731),i=s.n(n),l=s(68888),o=s(52631),d=s(74542),c=s(94357),m=s(34661),u=s(69283),p=s(9695);let x=[{id:1,title:"The Last Digital Frontier",author:{name:"Alex Thompson",username:"alexthompson",avatar:"https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?w=40&h=40&fit=crop&crop=face"},excerpt:"In a world where technology has consumed every aspect of human life, one programmer discovers the last untouched digital realm...",genre:"Sci-Fi",wordCount:3420,submittedAt:"2024-01-15T10:30:00Z",status:"pending",priority:"high",featuredImage:"https://images.unsplash.com/photo-1518709268805-4e9042af2176?w=300&h=200&fit=crop",hashtags:["#scifi","#technology","#future"],reportCount:0},{id:2,title:"Midnight Coffee Chronicles",author:{name:"Sarah Chen",username:"sarahchen",avatar:"https://images.unsplash.com/photo-1494790108755-2616b612b786?w=40&h=40&fit=crop&crop=face"},excerpt:"A collection of late-night conversations between strangers in a 24-hour coffee shop that never closes...",genre:"Drama",wordCount:2890,submittedAt:"2024-01-15T08:15:00Z",status:"pending",priority:"medium",featuredImage:"https://images.unsplash.com/photo-1495474472287-4d71bcdd2085?w=300&h=200&fit=crop",hashtags:["#drama","#coffee","#conversations"],reportCount:1},{id:3,title:"Ocean's Memory",author:{name:"Marcus Rivera",username:"marcusrivera",avatar:"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?w=40&h=40&fit=crop&crop=face"},excerpt:"When marine biologist Dr. Elena discovers that whales can store human memories in their songs...",genre:"Fantasy",wordCount:4150,submittedAt:"2024-01-14T16:45:00Z",status:"pending",priority:"low",featuredImage:"https://images.unsplash.com/photo-1544551763-46a013bb70d5?w=300&h=200&fit=crop",hashtags:["#fantasy","#ocean","#memory"],reportCount:0},{id:4,title:"The Quantum Cookbook",author:{name:"Emma Wilson",username:"emmawilson",avatar:"https://images.unsplash.com/photo-1438761681033-6461ffad8d80?w=40&h=40&fit=crop&crop=face"},excerpt:"A chef discovers that her grandmother's recipes can alter reality when cooked with quantum ingredients...",genre:"Sci-Fi",wordCount:2750,submittedAt:"2024-01-14T14:20:00Z",status:"pending",priority:"high",featuredImage:"https://images.unsplash.com/photo-1556909114-f6e7ad7d3136?w=300&h=200&fit=crop",hashtags:["#scifi","#cooking","#quantum"],reportCount:0}],h={pending:"bg-yellow-100 text-yellow-800",approved:"bg-green-100 text-green-800",rejected:"bg-red-100 text-red-800"};function StoryReviewList(){let[e,t]=(0,r.useState)(""),[s,n]=(0,r.useState)(""),[g,f]=(0,r.useState)("all"),[y,v]=(0,r.useState)("all"),[j,b]=(0,r.useState)([]),[N,w]=(0,r.useState)([]),[S,C]=(0,r.useState)(!0),[_,A]=(0,r.useState)(!1),D=(0,r.useRef)(null),[P,k]=(0,r.useState)(!1);(0,r.useEffect)(()=>{let t=setTimeout(()=>{n(e)},500);return()=>clearTimeout(t)},[e]),(0,r.useEffect)(()=>{P&&D.current&&!S&&(D.current.focus(),k(!1))},[N,P,S]),(0,r.useEffect)(()=>{let loadStories=async()=>{try{C(!0);let e=new URLSearchParams;e.append("status",g),"all"!==y&&e.append("genre",y);let t=await m.Sb.getAllStories(e);w(t.data.stories||x)}catch(e){console.error("Failed to load stories:",e),e.message.includes("permission")||e.message.includes("403")?((0,u.c0)({type:"error",title:"Access Denied",message:"You need admin privileges to access this page. Please contact an administrator."}),setTimeout(()=>{window.location.href="/"},3e3)):(w(x),(0,u.c0)({type:"error",title:"Failed to load stories",message:"Using demo data. Please check your connection."}))}finally{C(!1)}};loadStories()},[g,y]);let q=N.filter(t=>{let s=t.title.toLowerCase().includes(e.toLowerCase())||t.author?.name?.toLowerCase().includes(e.toLowerCase()),a="all"===g||t.status===g,r="all"===y||t.genre===y;return s&&a&&r}),formatDate=e=>{if(!e)return"No date";let t=new Date(e);return isNaN(t.getTime())?"Invalid date":t.toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})};return S?(0,a.jsxs)("div",{className:"space-y-6 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto",children:[a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Story Reviews"}),a.jsx("p",{className:"text-gray-600",children:"Loading stories..."})]})}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:a.jsx("div",{className:"animate-pulse space-y-4",children:[1,2,3].map(e=>(0,a.jsxs)("div",{className:"flex space-x-4",children:[a.jsx("div",{className:"w-20 h-16 bg-gray-200 rounded"}),(0,a.jsxs)("div",{className:"flex-1 space-y-2",children:[a.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"}),a.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/4"})]})]},e))})})]}):(0,a.jsxs)("div",{className:"space-y-6 px-4 sm:px-6 lg:px-8 max-w-7xl mx-auto",children:[a.jsx("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Story Reviews"}),(0,a.jsxs)("p",{className:"text-gray-600",children:["Review and manage submitted stories (",N.length," total)"]})]})}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"relative",children:[a.jsx(l.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:16}),a.jsx("input",{ref:D,type:"text",placeholder:"Search stories or authors...",value:e,onChange:e=>t(e.target.value),onFocus:()=>k(!0),onBlur:()=>k(!1),className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 bg-white"})]}),(0,a.jsxs)("select",{value:g,onChange:e=>f(e.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 bg-white",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"pending",children:"Pending"}),a.jsx("option",{value:"approved",children:"Approved"}),a.jsx("option",{value:"rejected",children:"Rejected"})]}),(0,a.jsxs)("select",{value:y,onChange:e=>v(e.target.value),className:"px-3 py-2 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 bg-white",children:[a.jsx("option",{value:"all",children:"All Genres"}),a.jsx("option",{value:"Sci-Fi",children:"Sci-Fi"}),a.jsx("option",{value:"Drama",children:"Drama"}),a.jsx("option",{value:"Fantasy",children:"Fantasy"}),a.jsx("option",{value:"Romance",children:"Romance"}),a.jsx("option",{value:"Mystery",children:"Mystery"})]})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[a.jsx("div",{className:"bg-gray-50 px-6 py-3 border-b border-gray-200",children:a.jsx("div",{className:"flex items-center",children:(0,a.jsxs)("span",{className:"ml-3 text-sm font-medium text-gray-900",children:["Story (",q.length,")"]})})}),a.jsx("div",{className:"divide-y divide-gray-200",children:q.map(e=>a.jsx("div",{className:"p-6 hover:bg-gray-50",children:(0,a.jsxs)("div",{className:"flex items-start space-x-4",children:[a.jsx("div",{className:"flex-shrink-0 w-20 h-16",children:e.featuredImage||e.image?(0,a.jsxs)(a.Fragment,{children:[a.jsx("img",{src:(0,p.Jn)(e.featuredImage||e.image),alt:e.title,className:"rounded-lg object-cover w-full h-full",onError:e=>{let t=e.target;t.style.display="none";let s=t.parentElement?.querySelector(".fallback-image");s&&(s.style.display="flex")}}),a.jsx("div",{className:"fallback-image w-full h-full bg-gradient-to-br from-purple-100 to-pink-100 rounded-lg items-center justify-center hidden",children:a.jsx("span",{className:"text-purple-500 text-2xl",children:"\uD83D\uDCD6"})})]}):a.jsx("div",{className:"fallback-image w-full h-full bg-gradient-to-br from-purple-100 to-pink-100 rounded-lg flex items-center justify-center",children:a.jsx("span",{className:"text-purple-500 text-2xl",children:"\uD83D\uDCD6"})})}),a.jsx("div",{className:"flex-1 min-w-0",children:(0,a.jsxs)("div",{className:"flex items-start justify-between",children:[(0,a.jsxs)("div",{className:"flex-1 min-w-0 pr-4",children:[a.jsx(i(),{href:`/admin/stories/${e.id}`,className:"text-lg font-semibold text-gray-900 hover:text-purple-600 block",children:e.title}),(0,a.jsxs)("div",{className:"flex items-center mt-1 space-x-2",children:[e.author?.avatar?a.jsx("img",{src:(0,p.E$)(e.author.avatar),alt:e.author?.name||"Author",className:"rounded-full w-5 h-5 object-cover",onError:e=>{let t=e.target;t.style.display="none";let s=t.nextElementSibling;s&&(s.style.display="flex")}}):null,a.jsx("div",{className:`w-5 h-5 bg-gradient-to-br from-blue-400 to-purple-500 rounded-full flex items-center justify-center text-white text-xs font-bold ${e.author?.avatar?"hidden":""}`,children:e.author?.name?.charAt(0)?.toUpperCase()||"U"}),(0,a.jsxs)("span",{className:"text-sm text-gray-600",children:["by ",e.author.name]}),a.jsx("span",{className:"text-gray-400",children:"•"}),a.jsx("span",{className:"text-sm text-gray-500",children:e.genre}),a.jsx("span",{className:"text-gray-400",children:"•"}),(0,a.jsxs)("span",{className:"text-sm text-gray-500",children:[e.wordCount," words"]})]}),a.jsx("p",{className:"mt-2 text-sm text-gray-600 line-clamp-2",children:e.excerpt}),a.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:e.hashtags?.map((e,t)=>a.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded",children:e},t))})]}),(0,a.jsxs)("div",{className:"flex flex-col items-end space-y-2 ml-4 flex-shrink-0",children:[a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${h[e.status]}`,children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})}),e.reportCount>0&&(0,a.jsxs)("div",{className:"flex items-center text-red-600",children:[a.jsx(o.Z,{size:14,className:"mr-1"}),(0,a.jsxs)("span",{className:"text-xs",children:[e.reportCount," report(s)"]})]}),(0,a.jsxs)("div",{className:"flex items-center text-gray-500",children:[a.jsx(d.Z,{size:14,className:"mr-1"}),a.jsx("span",{className:"text-xs",children:formatDate(e.submittedAt||e.createdAt||e.publishedAt)})]})]})]})})]})},e.id))}),0===q.length&&(0,a.jsxs)("div",{className:"text-center py-12",children:[a.jsx(c.Z,{className:"mx-auto h-12 w-12 text-gray-400"}),a.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No stories found"}),a.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Try adjusting your search or filter criteria."})]})]}),q.length>0&&(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",a.jsx("span",{className:"font-medium",children:"1"})," to ",a.jsx("span",{className:"font-medium",children:q.length})," of"," ",a.jsx("span",{className:"font-medium",children:q.length})," results"]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[a.jsx("button",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",disabled:!0,children:"Previous"}),a.jsx("button",{className:"px-3 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 disabled:opacity-50",disabled:!0,children:"Next"})]})]})]})}},35740:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>AdminStoriesPage});var a=s(31487),r=s(19894);let n=(0,r.createProxy)(String.raw`C:\Delpath\dhyey-prod-filmy\frontend\src\components\admin\StoryReviewList.tsx`),{__esModule:i,$$typeof:l}=n,o=n.default;function AdminStoriesPage(){return a.jsx(o,{})}}};var t=require("../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[7378,8097,9804,621,866,7478,4907,9695,1510,9283],()=>__webpack_exec__(71873));module.exports=s})();