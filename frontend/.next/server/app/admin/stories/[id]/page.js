(()=>{var e={};e.id=6296,e.ids=[6296],e.modules={55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},25528:e=>{"use strict";e.exports=require("next/dist\\client\\components\\action-async-storage.external.js")},91877:e=>{"use strict";e.exports=require("next/dist\\client\\components\\request-async-storage.external.js")},25319:e=>{"use strict";e.exports=require("next/dist\\client\\components\\static-generation-async-storage.external.js")},57310:e=>{"use strict";e.exports=require("url")},22252:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>m,originalPathname:()=>x,pages:()=>o,routeModule:()=>h,tree:()=>c});var r=s(36577),a=s(55533),l=s(40443),i=s.n(l),n=s(53320),d={};for(let e in n)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>n[e]);s.d(t,d);let c=["",{children:["admin",{children:["stories",{children:["[id]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,87342)),"D:\\Prog\\Webdev\\react\\filmy-creators\\frontend\\src\\app\\admin\\stories\\[id]\\page.tsx"]}]},{}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,46191)),"D:\\Prog\\Webdev\\react\\filmy-creators\\frontend\\src\\app\\admin\\layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,4199)),"D:\\Prog\\Webdev\\react\\filmy-creators\\frontend\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,31459,23)),"next/dist/client/components/not-found-error"]}],o=["D:\\Prog\\Webdev\\react\\filmy-creators\\frontend\\src\\app\\admin\\stories\\[id]\\page.tsx"],x="/admin/stories/[id]/page",m={require:s,loadChunk:()=>Promise.resolve()},h=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/admin/stories/[id]/page",pathname:"/admin/stories/[id]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},28411:(e,t,s)=>{Promise.resolve().then(s.bind(s,66920))},66920:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>StoryReviewDetail});var r=s(22406),a=s(80404),l=s(55731),i=s.n(l),n=s(98097),d=s.n(n),c=s(2153),o=s(78775),x=s(66738),m=s(74542),h=s(52631),p=s(94357),u=s(81380),g=s(38837),j=s(34661),y=s(69283);function StoryReviewDetail({storyId:e}){let[t,s]=(0,a.useState)(null),[l,n]=(0,a.useState)(!0),[v,b]=(0,a.useState)("content"),[f,N]=(0,a.useState)(""),[w,S]=(0,a.useState)(""),[A,k]=(0,a.useState)(!1),[P,R]=(0,a.useState)(!1),[_,D]=(0,a.useState)(!1);(0,a.useEffect)(()=>{let loadStory=async()=>{try{n(!0);let t=await j.Sb.getStoryForReview(e);s(t.data.story)}catch(e){console.error("Failed to load story:",e),(0,y.c0)({type:"error",title:"Failed to load story",message:"Story not available"})}finally{n(!1)}};loadStory()},[e]);let handleApprove=async()=>{D(!0);try{await j.Sb.approveStory(e),(0,y.c0)({type:"success",title:"Story Approved",message:"The story has been approved and published. The author will be notified."}),k(!1),N("");let t=await j.Sb.getStoryForReview(e);s(t.data.story)}catch(e){(0,y.c0)({type:"error",title:"Approval Failed",message:"Failed to approve story. Please try again."})}finally{D(!1)}},handleReject=async()=>{D(!0);try{await j.Sb.rejectStory(e,w),(0,y.c0)({type:"success",title:"Story Rejected",message:"The story has been rejected. The author will be notified with the reason."}),R(!1),S("");let t=await j.Sb.getStoryForReview(e);s(t.data.story)}catch(e){(0,y.c0)({type:"error",title:"Rejection Failed",message:"Failed to reject story. Please try again."})}finally{D(!1)}},formatDate=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"});return l?r.jsx("div",{className:"space-y-6",children:r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:r.jsx("div",{className:"animate-pulse",children:(0,r.jsxs)("div",{className:"flex space-x-4",children:[r.jsx("div",{className:"w-48 h-32 bg-gray-200 rounded"}),(0,r.jsxs)("div",{className:"flex-1 space-y-2",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]})]})})})}):t?(0,r.jsxs)("div",{className:"space-y-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4",children:[r.jsx(i(),{href:"/admin/stories",className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-lg",children:r.jsx(c.Z,{size:20})}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Story Review"}),r.jsx("p",{className:"text-gray-600",children:"Review and moderate submitted content"})]})]}),r.jsx("div",{className:"flex space-x-3",children:"approved"===t.status?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 px-4 py-2 bg-green-100 text-green-700 rounded-lg",children:[r.jsx(o.Z,{size:16}),r.jsx("span",{children:"Approved"})]}),(0,r.jsxs)("button",{onClick:()=>R(!0),className:"flex items-center space-x-2 px-4 py-2 border border-red-300 text-red-700 rounded-lg hover:bg-red-50",children:[r.jsx(x.Z,{size:16}),r.jsx("span",{children:"Reject"})]})]}):"rejected"===t.status?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2 px-4 py-2 bg-red-100 text-red-700 rounded-lg",children:[r.jsx(x.Z,{size:16}),r.jsx("span",{children:"Rejected"})]}),(0,r.jsxs)("button",{onClick:()=>k(!0),className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[r.jsx(o.Z,{size:16}),r.jsx("span",{children:"Approve"})]})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("button",{onClick:()=>R(!0),className:"flex items-center space-x-2 px-4 py-2 border border-red-300 text-red-700 rounded-lg hover:bg-red-50",children:[r.jsx(x.Z,{size:16}),r.jsx("span",{children:"Reject"})]}),(0,r.jsxs)("button",{onClick:()=>k(!0),className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:[r.jsx(o.Z,{size:16}),r.jsx("span",{children:"Approve"})]})]})})]}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:(0,r.jsxs)("div",{className:"flex items-start space-x-6",children:[t.image?r.jsx(d(),{src:t.image,alt:t.title,width:200,height:120,className:"rounded-lg object-cover"}):r.jsx("div",{className:"w-48 h-32 bg-gradient-to-br from-purple-100 to-pink-100 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-purple-500 text-4xl",children:"\uD83D\uDCD6"})}),r.jsx("div",{className:"flex-1",children:(0,r.jsxs)("div",{className:"flex items-start justify-between",children:[(0,r.jsxs)("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:t.title}),(0,r.jsxs)("div",{className:"flex items-center mt-2 space-x-4 text-sm text-gray-600",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx(d(),{src:t.author?.avatar||"/default-avatar.png",alt:t.author?.name||"Author",width:20,height:20,className:"rounded-full"}),(0,r.jsxs)("span",{children:["by ",t.author?.name||"Unknown Author"]})]}),r.jsx("span",{children:"•"}),r.jsx("span",{children:t.genre||"Unknown Genre"}),r.jsx("span",{children:"•"}),(0,r.jsxs)("span",{children:[t.content?.split(" ").length||0," words"]})]}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-3",children:(t.hashtags||t.tags||[]).map((e,t)=>r.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-sm rounded",children:e.startsWith("#")?e:`#${e}`},t))})]}),(0,r.jsxs)("div",{className:"text-right",children:[r.jsx("div",{className:"flex items-center space-x-2 mb-2",children:r.jsx("span",{className:`px-3 py-1 text-sm font-medium ${"pending"===t.status||"in_review"===t.status?"rounded bg-yellow-100 text-yellow-800":`rounded-full ${"approved"===t.status||"published"===t.status?"bg-green-100 text-green-800":"rejected"===t.status?"bg-red-100 text-red-800":"bg-gray-100 text-gray-800"}`}`,children:"pending"===t.status?"Pending Review":"in_review"===t.status?"In Review":"approved"===t.status?"Approved":"published"===t.status?"Published":"rejected"===t.status?"Rejected":t.status||"Unknown Status"})}),(0,r.jsxs)("div",{className:"text-sm text-gray-500",children:[(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-1 mb-1",children:[r.jsx(m.Z,{size:14}),(0,r.jsxs)("span",{children:["Submitted ",formatDate(t.createdAt||t.submittedAt||new Date().toISOString())]})]}),(t.reports?.length||0)>0&&(0,r.jsxs)("div",{className:"flex items-center justify-end space-x-1 text-red-600",children:[r.jsx(h.Z,{size:14}),(0,r.jsxs)("span",{children:[t.reports?.length||0," report(s)"]})]})]})]})]})})]})}),r.jsx("div",{className:"border-b border-gray-200",children:r.jsx("nav",{className:"-mb-px flex space-x-8",children:[{id:"content",label:"Content",icon:p.Z},{id:"author",label:"Author Info",icon:u.Z},{id:"history",label:"History",icon:g.Z}].map(e=>(0,r.jsxs)("button",{onClick:()=>b(e.id),className:`flex items-center space-x-2 py-2 px-1 border-b-2 font-medium text-sm ${v===e.id?"border-purple-500 text-purple-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:[r.jsx(e.icon,{size:16}),r.jsx("span",{children:e.label})]},e.id))})}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 max-w-full overflow-hidden",children:["content"===v&&r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"prose max-w-full",children:r.jsx("div",{className:"whitespace-pre-wrap text-gray-800 leading-relaxed break-words overflow-wrap-anywhere max-w-full",children:t.content})})}),"author"===v&&r.jsx("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"flex items-start space-x-6",children:[r.jsx(d(),{src:t.author?.avatar||"/default-avatar.png",alt:t.author?.name||"Author",width:80,height:80,className:"rounded-full"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:t.author?.name||"Unknown Author"}),t.author?.verified&&r.jsx(o.Z,{className:"h-5 w-5 text-blue-500"})]}),(0,r.jsxs)("p",{className:"text-gray-600",children:["@",t.author?.username||"unknown"]}),r.jsx("p",{className:"text-gray-600",children:t.author?.email||"No email available"}),r.jsx("p",{className:"mt-2 text-gray-700",children:t.author?.bio||"No bio available"}),(0,r.jsxs)("div",{className:"grid grid-cols-4 gap-4 mt-4",children:[(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-xl font-bold text-gray-900",children:t.author?.stats?.stories||0}),r.jsx("div",{className:"text-sm text-gray-600",children:"Stories"})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-xl font-bold text-gray-900",children:t.author?.stats?.followers||0}),r.jsx("div",{className:"text-sm text-gray-600",children:"Followers"})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-xl font-bold text-gray-900",children:t.author?.stats?.following||0}),r.jsx("div",{className:"text-sm text-gray-600",children:"Following"})]}),(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"text-xl font-bold text-gray-900",children:t.author?.stats?.likes||0}),r.jsx("div",{className:"text-sm text-gray-600",children:"Total Likes"})]})]}),(0,r.jsxs)("div",{className:"mt-4 text-sm text-gray-500",children:["Joined ",formatDate(t.author?.createdAt||t.author?.joinDate||new Date().toISOString())]})]})]})}),"history"===v&&r.jsx("div",{className:"p-6",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 w-2 h-2 mt-2 bg-blue-400 rounded-full"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-900",children:"Story submitted for review"}),r.jsx("p",{className:"text-xs text-gray-500",children:formatDate(t.createdAt||t.submittedAt||new Date().toISOString())})]})]}),t.rejectedAt&&(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 w-2 h-2 mt-2 bg-red-400 rounded-full"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-900",children:"Story rejected"}),r.jsx("p",{className:"text-xs text-gray-500",children:formatDate(t.rejectedAt)}),(t.rejectionReason||t.moderationNote)&&(0,r.jsxs)("p",{className:"text-xs text-red-600 mt-1 italic",children:["Reason: ",t.rejectionReason||t.moderationNote]})]})]}),t.approvedAt&&(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 w-2 h-2 mt-2 bg-green-400 rounded-full"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-900",children:"Story approved"}),r.jsx("p",{className:"text-xs text-gray-500",children:formatDate(t.approvedAt)}),t.approvalNote&&(0,r.jsxs)("p",{className:"text-xs text-gray-600 mt-1 italic",children:["Note: ",t.approvalNote]})]})]}),t.publishedAt&&(0,r.jsxs)("div",{className:"flex items-start space-x-3",children:[r.jsx("div",{className:"flex-shrink-0 w-2 h-2 mt-2 bg-green-400 rounded-full"}),(0,r.jsxs)("div",{children:[r.jsx("p",{className:"text-sm text-gray-900",children:"Story published"}),r.jsx("p",{className:"text-xs text-gray-500",children:formatDate(t.publishedAt)})]})]})]})})]}),A&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Approve Story"}),(0,r.jsxs)("p",{className:"text-gray-600 mb-4",children:['Are you sure you want to approve "',t.title,'"? This will make it visible to all users.']}),r.jsx("textarea",{value:f,onChange:e=>N(e.target.value),placeholder:"Add a note (optional)",className:"w-full p-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent text-gray-900 bg-white",rows:3}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-4",children:[r.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:handleApprove,className:"px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700",children:"Approve Story"})]})]})}),P&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Reject Story"}),(0,r.jsxs)("p",{className:"text-gray-600 mb-4",children:['Please provide a reason for rejecting "',t.title,'". This will be sent to the author.']}),r.jsx("textarea",{value:w,onChange:e=>S(e.target.value),placeholder:"Reason for rejection (required)",className:"w-full p-3 border border-gray-200 rounded-lg focus:outline-none focus:ring-2 focus:ring-red-500 focus:border-transparent text-gray-900 bg-white",rows:4,required:!0}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3 mt-4",children:[r.jsx("button",{onClick:()=>R(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50",children:"Cancel"}),r.jsx("button",{onClick:handleReject,disabled:!w.trim(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed",children:"Reject Story"})]})]})})]}):(0,r.jsxs)("div",{className:"text-center py-12",children:[r.jsx("h3",{className:"text-lg font-medium text-gray-900",children:"Story not found"}),r.jsx("p",{className:"text-gray-500",children:"The requested story could not be loaded."})]})}},87342:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>StoryReviewPage});var r=s(31487),a=s(19894);let l=(0,a.createProxy)(String.raw`D:\Prog\Webdev\react\filmy-creators\frontend\src\components\admin\StoryReviewDetail.tsx`),{__esModule:i,$$typeof:n}=l,d=l.default;function StoryReviewPage({params:e}){return r.jsx(d,{storyId:e.id})}}};var t=require("../../../../webpack-runtime.js");t.C(e);var __webpack_exec__=e=>t(t.s=e),s=t.X(0,[7378,8097,9804,621,866,6258,9930,9695,7718,9283],()=>__webpack_exec__(22252));module.exports=s})();